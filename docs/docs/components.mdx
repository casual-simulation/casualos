import {
    source,
    getInterfaceText 
} from '../src/api/ApiGenerator';
import useBaseUrl from '@docusaurus/useBaseUrl';

export const PossibleValuesTable = ({children}) => (
  <table>
    <thead>
      <tr>
        <th>Value</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      {children}
    </tbody>
  </table>
);

export const PossibleValue = ({value, children}) => (
  <tr>
    <td>{value}</td>
    <td>{children}</td>
  </tr>
);

export const PossibleValueCode = ({value, children}) => (
  <PossibleValue value={
    <code>{value}</code>
  }>{children}</PossibleValue>
);

export const AnyColorValues = ({}) => (<>
  <PossibleValue value='Any X11 Color'>
    <a href='https://en.wikipedia.org/wiki/X11_color_names' target='_blank'>X11 colors</a> are a list of standard colors that web browsers support.
  </PossibleValue>
  <PossibleValue value='Any Hex Color'>
    <a href='https://en.wikipedia.org/wiki/Web_colors#Hex_triplet' target='_blank'>Hex colors</a> are three or six digit numbers that specify a color by its red, green, and blue components.
  </PossibleValue>
</>);

export const TagLink = ({tag}) => tag.startsWith('@') ? 
  (<ListenTagLink tag={tag}/>) : 
  (<DataTagLink tag={tag}/>);

export const DataTagLink = ({tag}) => (
  <a href={useBaseUrl('docs/tags') + '#' + tag.replace(/\./g, '').toLowerCase()}>
    <NormalCode>#{tag}</NormalCode>
  </a>
);

export const ListenTagLink = ({tag}) => (
  <a href={useBaseUrl('docs/listen-tags') + '#' + tag.replace(/[\.\(\)\@\[\]]/g, '').toLowerCase()}>
    <NormalCode>{tag}</NormalCode>
  </a>
);

export const ActionLink = ({action}) => (
  <a href={useBaseUrl('docs/actions') + '#' + action.replace(/[\.\(\)\,\?]/g, '').replace(/\s/g, '-').toLowerCase()}>
    <NormalCode>{action}</NormalCode>
  </a>
);

export const NormalCode = ({children}) => (
  React.createElement('code', {}, ...children)
);

export const LabelAnchorValues = ({}) => (<>
  <PossibleValueCode value='top'>
    Top of the bot facing world oriented up. (default)
  </PossibleValueCode>
  <PossibleValueCode value='front'>
    Front of the bot facing world oriented forward.
  </PossibleValueCode>
  <PossibleValueCode value='back'>
    Back of the bot facing world oriented back.
  </PossibleValueCode>
  <PossibleValueCode value='right'>
    Right of the bot facing world oriented right.
  </PossibleValueCode>
  <PossibleValueCode value='left'>
     Left of the bot facing world oriented left.
  </PossibleValueCode>
  <PossibleValueCode value='floating'>
     Floating above the bot.
  </PossibleValueCode>
</>)

export const Badges = ({children}) => (
  <div className='row badge-row'>
    <div className='col'>
      {children}
    </div>
  </div>
);

export const Badge = ({type, children}) => (<span className={`badge badge--${type}`}>{children}</span>);

export const ReadOnlyBadge = ({}) => (<Badge type='warning'>Read-Only</Badge>);

export const VideoBadge = ({url}) => (<Badge type='info'><a href={url} target='_blank'>Video</a></Badge>);

export const UserBotBadge = ({url}) => (<Badge type='primary'>Player Bot</Badge>);

export const HistoryBotBadge = ({url}) => (<Badge type='primary'>History Bot</Badge>);

export const ConfigBotBadge = ({url}) => (<Badge type='primary'>Config Bot</Badge>);

export const Alert = ({type, children}) => (
    <div className={`alert alert--${type}`} role='alert'>
        {children}
    </div>
);

export const InterfaceCode = ({name}) => {
  const int = source.getInterface(name);
  return (<InterfaceNode int={int} />);
};

export const InterfaceNode = ({int}) => (
  <pre>
    <code className='typescript'>
        {getInterfaceText(int)}
    </code>
  </pre>
);

export const FunctionCode = ({name, overload}) => {
  const func = source.getFunction(name);
  let declaration;
  if (func && overload) {
    declaration = func.getOverloads()[overload];
  } else {
    declaration = func;
  }
  return (
    <pre>
      <code className='typescript'>
        {declaration ? declaration.getText() : 'CODE NOT AVAILABLE'}
      </code>
    </pre>
  );
};

export const TypeAliasCode = ({name}) => {
  const type = source.getTypeAlias(name);
  return (
    <pre>
      <code className='typescript'>
        {type.getText()}
      </code>
    </pre>
  );
};