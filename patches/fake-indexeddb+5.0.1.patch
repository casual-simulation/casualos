diff --git a/node_modules/fake-indexeddb/build/cjs/lib/scheduling.js b/node_modules/fake-indexeddb/build/cjs/lib/scheduling.js
index 2814f51..e6e9219 100644
--- a/node_modules/fake-indexeddb/build/cjs/lib/scheduling.js
+++ b/node_modules/fake-indexeddb/build/cjs/lib/scheduling.js
@@ -29,4 +29,9 @@ function getSetImmediateFromJsdom() {
 // transactions are marked as not active when the event loop runs. The next
 // tick queue and microtask queue run within the current event loop macrotask,
 // so they'd process database operations too quickly.
-const queueTask = exports.queueTask = globalThis.setImmediate || getSetImmediateFromJsdom() || (fn => setTimeout(fn, 0));
\ No newline at end of file
+const queueTask = exports.queueTask = (fn) => {
+    const setImmediate = globalThis.setImmediate || 
+        getSetImmediateFromJsdom() || 
+        ((fn) => setTimeout(fn, 0));
+    setImmediate(fn);
+};
\ No newline at end of file
diff --git a/node_modules/fake-indexeddb/build/esm/lib/scheduling.js b/node_modules/fake-indexeddb/build/esm/lib/scheduling.js
index c85f294..1823c3b 100644
--- a/node_modules/fake-indexeddb/build/esm/lib/scheduling.js
+++ b/node_modules/fake-indexeddb/build/esm/lib/scheduling.js
@@ -23,4 +23,9 @@ function getSetImmediateFromJsdom() {
 // transactions are marked as not active when the event loop runs. The next
 // tick queue and microtask queue run within the current event loop macrotask,
 // so they'd process database operations too quickly.
-export const queueTask = globalThis.setImmediate || getSetImmediateFromJsdom() || (fn => setTimeout(fn, 0));
\ No newline at end of file
+export const queueTask = (fn) => {
+    const setImmediate = globalThis.setImmediate || 
+        getSetImmediateFromJsdom() || 
+        ((fn) => setTimeout(fn, 0));
+    setImmediate(fn);
+}
\ No newline at end of file
