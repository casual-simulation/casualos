version: '3.7'

volumes:
    mongodata:
    minio-data:

services:
    minio:
        image: minio/minio:latest
        restart: always
        command: minio server --console-address ":9001"
        ports:
            - '9000:9000'
            - '9001:9001'
        environment:
            MINIO_CONFIG_ENV_FILE: /etc/config.env
        volumes:
            - './conf/minio.env:/etc/config.env'
            - minio-data:/mnt/data
    redis:
        image: 'redis:latest'
        restart: always
        ports:
            - '6379:6379'
    livekit:
        image: livekit/livekit-server:v1.6.1
        command: --config /etc/livekit.yaml
        restart: always
        depends_on:
            - redis
        ports:
            - '7880:7880'
            - '7881:7881'
            - '7882:7882/udp'
        volumes:
            - ./conf/livekit.yaml:/etc/livekit.yaml
