version: '3.7'

volumes:
    mongodata:

services:
    mongo:
        image: 'mongo:latest'
        restart: always
        ports:
            - '27017:27017'
        volumes:
            - 'mongodata:/data/db'
    redis:
        image: 'redis:latest'
        restart: always
        ports:
            - '6379:6379'
    dynamodb:
        command: '-jar DynamoDBLocal.jar -sharedDb -dbPath ./data'
        image: 'amazon/dynamodb-local:latest'
        restart: always
        ports:
            - '9125:8000'
        volumes:
            - './services/data/dynamodb:/home/dynamodblocal/data'
        working_dir: /home/dynamodblocal
    s3:
        image: localstack/localstack:latest
        environment:
            - SERVICES=s3
            - DEFAULT_REGION=us-east-1
            - DATA_DIR=/tmp/s3-data
        ports:
            - '4566:4566'
        volumes:
            - './services/data/s3:/tmp/s3-data'
