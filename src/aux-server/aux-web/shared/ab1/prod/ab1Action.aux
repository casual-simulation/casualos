{"version":2,"updates":[{"id":0,"timestamp":1681764203154,"update":"AewBwoSnqAgAJwEEYm90cyQzOTg4MDFmZS00YjM1LTRjZTQtODI2Zi0yMzgzNWMxYjlhYzUBJwDChKeoCAAGc3lzdGVtAgQAwoSnqAgBFmFiLTEuYWN0aW9uLmNyZWF0ZV9ib3QnAMKEp6gIAAlhYjFBY3Rpb24CBADChKeoCBgEdHJ1ZScAwoSnqAgABGZvcm0CBADChKeoCB0Hbm90aGluZycAwoSnqAgAC2Rlc2NyaXB0aW9uAgQAwoSnqAglDUNyZWF0ZXMgYm90cy4oAMKEp6gIABFhYjFHcmlkQWN0aW9uTWVudQF+JwDChKeoCAARYWIxR3JpZE1lbnVBY3Rpb24CBADChKeoCDTfBEBjb25zdCBncmlkSW5mb3JtYXRpb24gPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiMUdyaWRGb2N1czsKY29uc3QgbmV3Qm90ID0ge307CgpuZXdCb3QuY3JlYXRvciA9IG51bGw7Cm5ld0JvdFtncmlkSW5mb3JtYXRpb24uZGltZW5zaW9uXSA9IHRydWU7Cm5ld0JvdFtncmlkSW5mb3JtYXRpb24uZGltZW5zaW9uICsgIlgiXSA9IGdyaWRJbmZvcm1hdGlvbi5wb3NpdGlvbi54OwpuZXdCb3RbZ3JpZEluZm9ybWF0aW9uLmRpbWVuc2lvbiArICJZIl0gPSBncmlkSW5mb3JtYXRpb24ucG9zaXRpb24ueTsKbmV3Qm90LmNvbG9yID0gIiM3QjY0RkYiOy8vbGlua3MucmVtZW1iZXIudGFncy5hYjFCYXNlQ29sb3I7CgpsZXQgY3JlYXRlZEJvdCA9IGNyZWF0ZShuZXdCb3QpOwoKc2hvdXQoImFiMU1lbnVSZWZyZXNoIik7CgpsaW5rcy5tYW5pZmVzdGF0aW9uLmFiMUNsaWNrKCk7CgpsaW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiMUJvdC5tYXNrcy5saW5lVG8gPSBjcmVhdGVkQm90LmlkOwoKbGlua3MucmVtZW1iZXIubWFza3MuYWIxQm90Rm9jdXMgPSAi8J+UlyIgKyBjcmVhdGVkQm90LmlkOwoKbGlua3MubWFuaWZlc3RhdGlvbi5hYjFDbGljayh7bWVudTogImJvdCJ9KTsoAMKEp6gIABBhYjFHcmlkTWVudUxhYmxlAX4nAMKEp6gIABBhYjFHcmlkTWVudUxhYmVsAgQAwoSnqAiTBQNib3QnAMKEp6gIAA9hYjFHcmlkTWVudUljb24CBADChKeoCJcFB2FkZF9ib3gnAMKEp6gIAAhyZW1lbWJlcgIEAMKEp6gInwUo8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycAwoSnqAgADW1hbmlmZXN0YXRpb24CBADChKeoCMYFKPCflJdkY2E1ZDk4Ny1jNGQ4LTQ2ZTQtYjYwYy1kYWE3YjJmNGRkYWQoAMKEp6gIABNhYjFCb3RNZW51U29ydE9yZGVyAX4nAMKEp6gIAAlhYjFJZ25vcmUCBADChKeoCO4FBHRydWUoAMKEp6gIAA1hYjFCb3RWZXJzaW9uAX0XJwDChKeoCAAUYWIxR3JpZE1lbnVTb3J0T3JkZXICBADChKeoCPQFATEnAMKEp6gIABBhYjFHcmlkTWVudUNvbG9yAgQAwoSnqAj2BQcjNTVFNjc5JwEEYm90cyQ1ODQ5YWY1NS01ZThhLTQ4ZDYtOTEwNi0xOTk0OThlOWVjMDgBJwDChKeoCP4FBnN5c3RlbQIEAMKEp6gI/wUTYWItMS5hY3Rpb24uZGVzdHJveSgAwoSnqAj+BQxhYjFCb3RBY3Rpb24BficAwoSnqAj+BQlhYjFBY3Rpb24CBADChKeoCJQGBHRydWUnAMKEp6gI/gUEZm9ybQIEAMKEp6gImQYHbm90aGluZycAwoSnqAj+BRBhYjFCb3RNZW51QWN0aW9uAgQAwoSnqAihBoQBQGNvbnN0IHRhcmdldEJvdCA9IGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiMUJvdEZvY3VzOwoKZGVzdHJveSh0YXJnZXRCb3QpOwoKc2hvdXQoImFiMU1lbnVSZWZyZXNoIik7CgpsaW5rcy5tYW5pZmVzdGF0aW9uLmFiMUNsaWNrKCk7JwDChKeoCP4FD2FiMUJvdE1lbnVMYWJlbAIEAMKEp6gIpgcHZGVzdHJveScAwoSnqAj+BQ5hYjFCb3RNZW51SWNvbgIEAMKEp6gIrgcOZGVsZXRlX2ZvcmV2ZXInAMKEp6gI/gUPYWIxQm90TWVudUNvbG9yAgQAwoSnqAi9BwcjRDY2RDVFJwDChKeoCP4FE2FiMUJvdE1lbnVTb3J0T3JkZXICBADChKeoCMUHAzEwMCcAwoSnqAj+BQhyZW1lbWJlcgIEAMKEp6gIyQco8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycAwoSnqAj+BQ1tYW5pZmVzdGF0aW9uAgQAwoSnqAjwByjwn5SXZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkJwDChKeoCP4FCWFiMUlnbm9yZQIEAMKEp6gIlwgEdHJ1ZSgAwoSnqAj+BQ1hYjFCb3RWZXJzaW9uAX0XJwEEYm90cyRiMWU3MTU2NC04ZDM5LTRmZTItYjkxYi0wZjEwNWJlYzRmYjIBJwDChKeoCJ0IBnN5c3RlbQIEAMKEp6gInggQYWItMS5hY3Rpb24ubm90ZScAwoSnqAidCAlhYjFBY3Rpb24CBADChKeoCK8IBHRydWUoAMKEp6gInQgNYWIxQm90VmVyc2lvbgF9CCcAwoSnqAidCA9hYjFHcmlkTWVudUljb24CBADChKeoCLUIDXN0aWNreV9ub3RlXzInAMKEp6gInQgEZm9ybQIEAMKEp6gIwwgHbm90aGluZycAwoSnqAidCBBhYjFHcmlkTWVudUxhYmVsAgQAwoSnqAjLCARub3RlJwDChKeoCJ0ICWFiMUlnbm9yZQIEAMKEp6gI0AgEdHJ1ZScAwoSnqAidCA1tYW5pZmVzdGF0aW9uAgQAwoSnqAjVCCjwn5SXZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkJwDChKeoCJ0ICHJlbWVtYmVyAgQAwoSnqAj8CCjwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwDChKeoCJ0IEWFiMUdyaWRNZW51QWN0aW9uAgQAwoSnqAijCbAEQGNvbnN0IGdyaWRJbmZvcm1hdGlvbiA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxR3JpZEZvY3VzOwpjb25zdCBuZXdCb3QgPSB7fTsKCm5ld0JvdC5jcmVhdG9yID0gbnVsbDsKbmV3Qm90W2dyaWRJbmZvcm1hdGlvbi5kaW1lbnNpb25dID0gdHJ1ZTsKbmV3Qm90W2dyaWRJbmZvcm1hdGlvbi5kaW1lbnNpb24gKyAiWCJdID0gZ3JpZEluZm9ybWF0aW9uLnBvc2l0aW9uLng7Cm5ld0JvdFtncmlkSW5mb3JtYXRpb24uZGltZW5zaW9uICsgIlkiXSA9IGdyaWRJbmZvcm1hdGlvbi5wb3NpdGlvbi55OwoKbGV0IGNyZWF0ZWRCb3QgPSBjcmVhdGUodGFncy5ub3RlTW9kLCBuZXdCb3QpOwoKc2hvdXQoImFiMU1lbnVSZWZyZXNoIik7CgpsaW5rcy5tYW5pZmVzdGF0aW9uLmFiMUNsaWNrKCk7CgpsaW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiMUJvdC5tYXNrcy5saW5lVG8gPSBjcmVhdGVkQm90LmlkOwoKbGlua3MucmVtZW1iZXIubWFza3MuYWIxQm90Rm9jdXMgPSAi8J+UlyIgKyBjcmVhdGVkQm90LmlkOwoKbGlua3MubWFuaWZlc3RhdGlvbi5hYjFDbGljayh7bWVudTogImJvdCJ9KTsnAMKEp6gInQgUYWIxR3JpZE1lbnVTb3J0T3JkZXICBADChKeoCNINATInAMKEp6gInQgHbm90ZU1vZAIEAMKEp6gI1A2WF/Cfp6x7CiAgICAiYWIxTm90ZSI6IHRydWUsCiAgICAic2NhbGVYIjogMSwKICAgICJzY2FsZVkiOiAxLAogICAgInNjYWxlIjogMSwKICAgICJvcmllbnRhdGlvbk1vZGUiOiAiYmlsbGJvYXJkIiwKICAgICJjb2xvciI6ICIjRkNDNDAwIiwKICAgICJtYXhMT0RUaHJlc2hvbGQiOiAwLjEsCiAgICAib25DcmVhdGUiOiAiQCBzZXRUaW1lb3V0KCgpID0+IHdoaXNwZXIodGhpc0JvdCwgJ2FiMU5vdGVSZWZyZXNoJyksIDI1KTsiLAogICAgIm9uTWF4TE9ERW50ZXIiOiAiQHNldFRhZ01hc2sodGhpc0JvdCwgXCJMT0RTdGF0ZVwiLCBcIkRldGFpbHNcIiwgXCJ0ZW1wTG9jYWxcIik7XG53aGlzcGVyKHRoaXNCb3QsIFwiYWIxTm90ZVJlZnJlc2hcIik7IiwKICAgICJvbk1heExPREV4aXQiOiAiQFxuc2V0VGFnTWFzayh0aGlzQm90LCBcIkxPRFN0YXRlXCIsIFwiTm90ZVwiLCBcInRlbXBMb2NhbFwiKTtcbndoaXNwZXIodGhpc0JvdCwgXCJhYjFOb3RlUmVmcmVzaFwiKTtcbiIsCiAgICAib25Cb3RDaGFuZ2VkIjogIkBcbmxldCBjaGFuZ2UgPSB0aGF0LnRhZ3NbMF07XG5cbmlmIChjaGFuZ2UgPT0gXCJOb3RlXCIgfHwgY2hhbmdlID09IFwiRGV0YWlsc1wiKSBcbntcbiAgICB3aGlzcGVyKHRoaXNCb3QsIFwiYWIxTm90ZVJlZnJlc2hcIik7XG59IiwKICAgICJsYWJlbFdvcmRXcmFwTW9kZSI6ICJicmVha1dvcmRzIiwKICAgICJvbkNsaWNrIjogIkBjb25zdCBzdGF0ZSA9IG9zLmdldElucHV0U3RhdGUoXCJrZXlib2FyZFwiLCBcIlNoaWZ0XCIpO1xuXG5pZiAoc3RhdGUpXG57XG4gICAgcmV0dXJuO1xufVxuZWxzZVxue1xuICAgIGlmICh0YWdzLkxPRFN0YXRlID09IG51bGwgfHwgdGFncy5MT0RTdGF0ZSA9PSBcIk5vdGVcIikgXG4gICAge1xuICAgICAgICB2YXIgY3VycmVudExPRCA9IFwiTm90ZVwiO1xuICAgICAgICB2YXIgdGV4dExPRCA9IFwibm90ZVwiO1xuICAgIH1cbiAgICBlbHNlIFxuICAgIHtcbiAgICAgICAgdmFyIGN1cnJlbnRMT0QgPSBcIkRldGFpbHNcIjtcbiAgICAgICAgdmFyIHRleHRMT0QgPSBcImRldGFpbHNcIjtcbiAgICB9XG5cbiAgICBjb25zdCBuZXdMYWJlbCA9IGF3YWl0IG9zLnNob3dJbnB1dCh0YWdzW2N1cnJlbnRMT0RdLCBcbiAgICB7XG4gICAgICAgIHRpdGxlOiBgZWRpdCAke3RleHRMT0R9IHRleHRgXG4gICAgfSk7XG5cbiAgICBpZiAoY3VycmVudExPRCA9PSBcIk5vdGVcIiAmJiB0YWdzLkRldGFpbHMpXG4gICAge1xuICAgICAgICBzZXRUYWdNYXNrKHRoaXNCb3QsIFwibGFiZWxcIiwgXCIrXCIgKyBuZXdMYWJlbCwgXCJ0ZW1wTG9jYWxcIik7XG4gICAgfVxuICAgIGVsc2UgaWYgKGN1cnJlbnRMT0QgPT0gXCJOb3RlXCIpXG4gICAge1xuICAgICAgICBzZXRUYWdNYXNrKHRoaXNCb3QsIFwibGFiZWxcIiwgbmV3TGFiZWwsIFwidGVtcExvY2FsXCIpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjdXJyZW50TE9EID09IFwiRGV0YWlsc1wiKVxuICAgIHtcbiAgICAgICAgc2V0VGFnTWFzayh0aGlzQm90LCBcImxhYmVsXCIsIFwiKlwiICsgbmV3TGFiZWwsIFwidGVtcExvY2FsXCIpO1xuICAgIH1cbiAgICBlbHNlXG4gICAge1xuICAgICAgICBzZXRUYWdNYXNrKHRoaXNCb3QsIFwibGFiZWxcIiwgbmV3TGFiZWwsIFwidGVtcExvY2FsXCIpO1xuICAgIH1cblxuICAgIHRhZ3NbY3VycmVudExPRF0gPSBuZXdMYWJlbDtcbn0iLAogICAgImFiMU5vdGVSZWZyZXNoIjogIkBmdW5jdGlvbiBtYXAoaW5wdXQsIG1pbjEsIG1heDEsIG1pbjIsIG1heDIpIHtcbiAgICByZXR1cm4gKGlucHV0IC0gbWluMSkgKiAobWF4MiAtIG1pbjIpIC8gKG1heDEgLSBtaW4xKSArIG1pbjI7XG59XG5cbmlmICh0YWdzLkxPRFN0YXRlID09IFwiTm90ZVwiIHx8IHRhZ3MuTE9EU3RhdGUgPT0gbnVsbCkgXG57XG4gICAgaWYgKHRhZ3MuRGV0YWlscyAmJiB0YWdzLk5vdGUpIFxuICAgIHtcbiAgICAgICAgdmFyIG5ld0xhYmVsID0gXCIrXCIgKyB0YWdzLk5vdGU7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRhZ3MuTm90ZSkgXG4gICAge1xuICAgICAgICB2YXIgbmV3TGFiZWwgPSB0YWdzLk5vdGU7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRhZ3MuRGV0YWlscykgXG4gICAge1xuICAgICAgICB2YXIgbmV3TGFiZWwgPSBcIitcIjtcbiAgICB9XG4gICAgZWxzZSBcbiAgICB7XG4gICAgICAgIHZhciBuZXdMYWJlbCA9IFwiIFwiO1xuICAgIH1cbn1cbmVsc2UgaWYgKHRhZ3MuTE9EU3RhdGUgPT0gXCJEZXRhaWxzXCIpIFxue1xuICAgIGlmICh0YWdzLkRldGFpbHMpIFxuICAgIHtcbiAgICAgICAgdmFyIG5ld0xhYmVsID0gXCIqXCIgKyB0YWdzLkRldGFpbHM7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRhZ3MuTm90ZSlcbiAgICB7XG4gICAgICAgIHZhciBuZXdMYWJlbCA9IFwiKlwiICsgdGFncy5Ob3RlO1xuICAgIH1cbiAgICBlbHNlXG4gICAge1xuICAgICAgICB2YXIgbmV3TGFiZWwgPSBcIipcIjtcbiAgICB9XG59XG5cbmlmIChuZXdMYWJlbClcbntcbiAgICBzZXRUYWdNYXNrKHRoaXNCb3QsIFwibGFiZWxcIiwgbmV3TGFiZWwpO1xuXG4gICAgbGV0IGxlbmd0aFRlc3QgPSBuZXdMYWJlbC5sZW5ndGg7XG5cbiAgICBpZighbmV3TGFiZWwuaW5jbHVkZXMoXCIgXCIpKSB0YWdzLmxhYmVsRm9udFNpemUgPSBtYXAobGVuZ3RoVGVzdCwgMSwgMjUsIC43LCAuMikgKiB0YWdzLnNjYWxlO1xuICAgIGVsc2UgaWYobGVuZ3RoVGVzdCA8IDQwKSB0YWdzLmxhYmVsRm9udFNpemUgPSBtYXAobGVuZ3RoVGVzdCwgMSwgMzAsIC44LCAuMykgKiB0YWdzLnNjYWxlO1xuICAgIGVsc2UgdGFncy5sYWJlbEZvbnRTaXplID0gbnVsbDtcbiAgICBpZih0YWdzLmxhYmVsRm9udFNpemUgPD0gMCkgdGFncy5sYWJlbEZvbnRTaXplID0gLjE7XG4gICAgXG59IiwKICAgICJvbkRlc3Ryb3kiOiAiQCBkZXN0cm95KGdldEJvdHMoJ3RyYW5zZm9ybWVyJywgdGhpc0JvdC5pZCkpOyIsCiAgICAibGFiZWxGb250U2l6ZSI6IDAuOAp9JwDChKeoCJ0IEGFiMUdyaWRNZW51Q29sb3ICBADChKeoCOkkByM1NUU2NzknAQRib3RzJGIzMzljMTE4LTQ4OWEtNDY2Yi1iYTlmLWIwN2E1ZjliNjY0ZgEnAMKEp6gI8SQGc3lzdGVtAgQAwoSnqAjyJBFhYi0xLmFjdGlvbi5wYXN0ZSgAwoSnqAjxJAlhYjFBY3Rpb24BeCcAwoSnqAjxJARmb3JtAgQAwoSnqAiFJQdub3RoaW5nJwDChKeoCPEkC2Rlc2NyaXB0aW9uAgQAwoSnqAiNJS1hYi0xIHNraWxsIHVzZWQgZm9yIGNvcHlpbmcgYW5kIHBhc3RpbmcgYm90cy4nAMKEp6gI8SQHb25QYXN0ZQIEAMKEp6gIuyW+B0BpZiAoIWJ1aWxkZXJWZXJzaW9uKQp7CiAgICByZXR1cm47Cn0KCmNvbnN0IE1BQ1JPUyA9IFsKICAgIHsKICAgICAgICB0ZXN0OiAvKD86W+KAnOKAnV0pL2csCiAgICAgICAgcmVwbGFjZW1lbnQ6ICh2YWwpID0+ICciJywKICAgIH0sCiAgICB7CiAgICAgICAgdGVzdDogLyg/OlvigJjigJldKS9nLAogICAgICAgIHJlcGxhY2VtZW50OiAodmFsKSA9PiAiJyIsCiAgICB9LApdOwoKbGV0IGZvcm1hdHRlZENvcHkgPSByZXBsYWNlTWFjcm9zKHRoYXQudGV4dCk7CmxldCBjb3B5Qm90ID0gSlNPTi5wYXJzZShmb3JtYXR0ZWRDb3B5KTsKbGV0IHBhc3RlZERhdGEgPSAhY29weUJvdC5zdGF0ZSA/IHtbY29weUJvdC5pZF06IGNvcHlCb3R9IDogY29weUJvdC5zdGF0ZTsKbGV0IGRpbU1vZCA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxRm9jdXNEYXRhOwoKaWYgKE9iamVjdC5rZXlzKHBhc3RlZERhdGEpLmxlbmd0aCA9PSAxICYmIGRpbU1vZCkKewogICAgcGFzdGVkRGF0YVtkaW1Nb2QuZGltZW5zaW9uXSA9IHRydWU7CiAgICBwYXN0ZWREYXRhW2RpbU1vZC5kaW1lbnNpb24rIlgiXSA9IGRpbU1vZC54OwogICAgcGFzdGVkRGF0YVtkaW1Nb2QuZGltZW5zaW9uKyJZIl0gPSBkaW1Nb2QueTsKCiAgICBvcy50b2FzdCgiYm90IGFkZGVkIHRvIGluc3QiKTsKfQplbHNlCnsKICAgIG9zLnRvYXN0KCJib3RzIGFkZGVkIHRvIGluc3QiKTsKfQoKYWIxLmxvZygiYWItMSBwYXN0ZSIpOwoKbGlua3MuY3JlYXRlLmFiMUNyZWF0ZUJvdHMoe2JvdHM6IHBhc3RlZERhdGF9KTsKCmZ1bmN0aW9uIHJlcGxhY2VNYWNyb3ModGV4dCkgewogICAgaWYgKCF0ZXh0KSB7CiAgICAgICAgcmV0dXJuIHRleHQ7CiAgICB9CgogICAgZm9yIChsZXQgbSBvZiBNQUNST1MpIHsKICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKG0udGVzdCwgbS5yZXBsYWNlbWVudCk7CiAgICB9CgogICAgcmV0dXJuIHRleHQ7Cn0nAMKEp6gI8SQIcmVtZW1iZXICBADChKeoCPIsKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAMKEp6gI8SQGY3JlYXRlAgQAwoSnqAiZLSjwn5SXMzRjM2MyMTAtNWJmMS00OWNmLWIxNTEtZWUyZDA3ZjBlNjczJwDChKeoCPEkCWFiMUlnbm9yZQIEAMKEp6gIwC0EdHJ1ZSgAwoSnqAjxJA1hYjFCb3RWZXJzaW9uAX0XJwDChKeoCPEkCW9uS2V5RG93bgIEAMKEp6gIxi3yCEBpZiAoIWJ1aWxkZXJWZXJzaW9uIHx8ICghbGlua3MucmVtZW1iZXIubGlua3MuYWIxQm90Rm9jdXMgJiYgIWxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiMU11bHRpcGxlQm90Rm9jdXMpKQp7CiAgICByZXR1cm47Cn0KCmlmICh0aGF0LmtleXMgPT0gImMiKQp7CiAgICBsZXQgbWV0YUlucHV0ID0gb3MuZ2V0SW5wdXRTdGF0ZSgia2V5Ym9hcmQiLCAiTWV0YSIpOwoKICAgIGlmICghbWV0YUlucHV0KQogICAgewogICAgICAgIG1ldGFJbnB1dCA9IG9zLmdldElucHV0U3RhdGUoImtleWJvYXJkIiwgIkNvbnRyb2wiKTsKICAgIH0KICAgIAogICAgaWYgKCFtZXRhSW5wdXQpCiAgICB7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIGxldCBmb3JtYXR0ZWRGaWxlOwogICAgbGV0IHN0YXRlID0ge307CgogICAgaWYgKGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiMUJvdEZvY3VzKQogICAgewogICAgICAgIGxldCBzZWxlY3RlZEJvdCA9IGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiMUJvdEZvY3VzOwoKICAgICAgICBzdGF0ZVtzZWxlY3RlZEJvdC5pZF0gPSBzZWxlY3RlZEJvdDsKCiAgICAgICAgYWIxLmxvZygiYWItMSBjb3BpZWQgYSBib3QgdG8gY2xpcGJvYXJkIik7CiAgICB9CiAgICBlbHNlIGlmIChsaW5rcy5yZW1lbWJlci5saW5rcy5hYjFNdWx0aXBsZUJvdEZvY3VzKQogICAgewogICAgICAgIGxldCBzZWxlY3RlZEJvdHMgPSBsaW5rcy5yZW1lbWJlci5saW5rcy5hYjFNdWx0aXBsZUJvdEZvY3VzOwoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdGVkQm90cy5sZW5ndGg7IGkrKykKICAgICAgICB7CiAgICAgICAgICAgIHN0YXRlW3NlbGVjdGVkQm90c1tpXS5pZF0gPSBzZWxlY3RlZEJvdHNbaV07CiAgICAgICAgfQoKICAgICAgICBhYjEubG9nKCJhYi0xIGNvcGllZCBtdWx0aXBsZSBib3RzIHRvIGNsaXBib2FyZCIpOwogICAgfQoKICAgIGxldCBuZXdGaWxlID0ge307CiAgICBuZXdGaWxlLnZlcnNpb24gPSAxOwogICAgbmV3RmlsZS5zdGF0ZSA9IHN0YXRlOwoKICAgIGZvcm1hdHRlZEZpbGUgPSBKU09OLnN0cmluZ2lmeShuZXdGaWxlKTsKCiAgICBvcy5zZXRDbGlwYm9hcmQoZm9ybWF0dGVkRmlsZSk7CgogICAgb3MudG9hc3QoImJvdCBjb3BpZWQgdG8gY2xpcGJvYXJkIik7Cn0nAMKEp6gI8SQKZm9ybWF0VGV4dAIEAMKEp6gIuTYBQCcBBGJvdHMkYzY4YzViODItYzBhNy00YTVhLTkxMDQtNWRkOGUzMmFlNGUyAScAwoSnqAi7NgZzeXN0ZW0CBADChKeoCLw2FmFiLTEuYWN0aW9uLm9wZW5fc2hlZXQnAMKEp6gIuzYLZGVzY3JpcHRpb24CBADChKeoCNM2FFNraWxsIHRvIG9wZW4gc2hlZXQuJwDChKeoCLs2CWFiMUFjdGlvbgIEAMKEp6gI6DYEdHJ1ZScAwoSnqAi7NgRmb3JtAgQAwoSnqAjtNgdub3RoaW5nJwDChKeoCLs2EWFiMUNvcmVNZW51QWN0aW9uAgQAwoSnqAj1NsoCQGNvbnN0IGN1cnJlbnRJbnN0ID0gb3MuZ2V0Q3VycmVudEluc3QoKTsKY29uc3QgY3VycmVudERpbSA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxQWN0aXZlRGltZW5zaW9uOwpjb25zdCBzdGF0ZSA9IG9zLmdldElucHV0U3RhdGUoImtleWJvYXJkIiwgIlNoaWZ0Iik7CgppZiAoc3RhdGUpIAp7CiAgICBvcy5vcGVuVVJMKGAvP2luc3Q9JHtjdXJyZW50SW5zdH0mc2hlZXRQb3J0YWw9JHtjdXJyZW50RGltfWApOwp9CmVsc2UKewogICAgY29uZmlnQm90LnRhZ3Muc2hlZXRQb3J0YWwgPSBjdXJyZW50RGltOwp9CgphYjEubG9nKCJhYi0xIG9wZW4gZGltZW5zaW9uIHNoZWV0Iik7JwDChKeoCLs2CHJlbWVtYmVyAgQAwoSnqAjAOSjwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwDChKeoCLs2EGFiMUNvcmVNZW51TGFiZWwCBADChKeoCOc5Cm9wZW4gc2hlZXQnAMKEp6gIuzYQYWIxQm90TWVudUFjdGlvbgIEAMKEp6gI8jnKAkBjb25zdCBjdXJyZW50SW5zdCA9IG9zLmdldEN1cnJlbnRJbnN0KCk7CmNvbnN0IGN1cnJlbnREaW0gPSBsaW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiMUJvdC50YWdzLmxpbmVUbzsKY29uc3Qgc3RhdGUgPSBvcy5nZXRJbnB1dFN0YXRlKCJrZXlib2FyZCIsICJTaGlmdCIpOwoKaWYgKHN0YXRlKSAKewogICAgb3Mub3BlblVSTChgLz9pbnN0PSR7Y3VycmVudEluc3R9JnNoZWV0UG9ydGFsPSR7Y3VycmVudERpbX1gKTsKfQplbHNlCnsKICAgIGNvbmZpZ0JvdC50YWdzLnNoZWV0UG9ydGFsID0gY3VycmVudERpbTsKfQoKYWIxLmxvZygiYWItMSBvcGVuIGJvdCBzaGVldCIpOycAwoSnqAi7Ng9hYjFCb3RNZW51TGFiZWwCBADChKeoCL08Dm9wZW4gYm90IHNoZWV0JwDChKeoCLs2DW1hbmlmZXN0YXRpb24CBADChKeoCMw8KPCflJdkY2E1ZDk4Ny1jNGQ4LTQ2ZTQtYjYwYy1kYWE3YjJmNGRkYWQnAMKEp6gIuzYOYWIxQm90TWVudUljb24CBADChKeoCPM8CnRhYmxlX3ZpZXcnAMKEp6gIuzYPYWIxQ29yZU1lbnVJY29uAgQAwoSnqAj+PAp0YWJsZV92aWV3JwDChKeoCLs2E2FiMUJvdE1lbnVTb3J0T3JkZXICBADChKeoCIk9ATEnAMKEp6gIuzYJYWIxSWdub3JlAgQAwoSnqAiLPQR0cnVlKADChKeoCLs2DWFiMUJvdFZlcnNpb24BfRcnAMKEp6gIuzYPYWIxQm90TWVudUNvbG9yAgQAwoSnqAiRPQcjNTVFNjc5JwDChKeoCLs2EGFiMUNvcmVNZW51Q29sb3ICBADChKeoCJk9ByM1NUU2NzknAMKEp6gIuzYYYWIxTXVsdGlwbGVCb3RNZW51QWN0aW9uAgQAwoSnqAihPfYDQGNvbnN0IGN1cnJlbnRJbnN0ID0gb3MuZ2V0Q3VycmVudEluc3QoKTsKY29uc3QgY3VycmVudERpbSA9ICJhYjFNdWx0aXBsZVNlbGVjdCI7Cgpjb25maWdCb3QudGFncy5zaGVldFBvcnRhbCA9IGN1cnJlbnREaW07CgpzZXRUYWdNYXNrKGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiMU11bHRpcGxlQm90Rm9jdXMsIGN1cnJlbnREaW0sIHRydWUsICJ0ZW1wTG9jYWwiKTsKCm1hc2tzLmN1cnJlbnRTaGVldEJvdHMgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiMU11bHRpcGxlQm90Rm9jdXM7Cm1hc2tzLm9uUG9ydGFsQ2hhbmdlZCA9IGBAIGlmICh0aGF0LmRpbWVuc2lvbiAhPSAiYWIxTXVsdGlwbGVTZWxlY3QiICYmIHRoYXQucG9ydGFsID09ICJzaGVldFBvcnRhbCIpCnsKICAgIGNsZWFyVGFnTWFza3MobGlua3MuY3VycmVudFNoZWV0Qm90cyk7CgogICAgY2xlYXJUYWdNYXNrcyh0aGlzQm90KTsKfSBgOwoKYWIxLmxvZygiYWItMSBvcGVuIG11bHRpcGxlIHNlbGVjdCBzaGVldCIpOycAwoSnqAi7NhdhYjFNdWx0aXBsZUJvdE1lbnVMYWJlbAIEAMKEp6gImEEab3BlbiBtdWx0aXBsZSBzZWxlY3Qgc2hlZXQnAMKEp6gIuzYXYWIxTXVsdGlwbGVCb3RNZW51Q29sb3ICBADChKeoCLNBByM1NUU2NzknAMKEp6gIuzYWYWIxTXVsdGlwbGVCb3RNZW51SWNvbgIEAMKEp6gIu0EKdGFibGVfdmlldygAwoSnqAi7NhlhYjFDb3JlTWVudUFsdGVybmF0ZUxhYmVsAX4nAMKEp6gIuzYVYWIxQ29yZU1lbnVPbkdlbmVyYXRlAgQAwoSnqAjHQYECQGxldCBjdXJyZW50RGltID0gbGlua3MucmVtZW1iZXIudGFncy5hYjFBY3RpdmVEaW1lbnNpb247Cgp0YWdzLmxhYmVsID0gInNoZWV0UG9ydGFsPSIgKyBjdXJyZW50RGltOwoKdGFncy5vbktleURvd24gPSBgQCBpZih0aGF0LmtleXMgPT0gIlNoaWZ0Iil7bWFza3MubGFiZWwgPSB0YWdzLmxhYmVsICsgIiBpbiBuZXcgdGFiIjt9YDsKdGFncy5vbktleVVwID0gYEAgaWYodGhhdC5rZXlzID09ICJTaGlmdCIpe21hc2tzLmxhYmVsID0gbnVsbDt9YDsnAMKEp6gIuzYUYWIxQm90TWVudU9uR2VuZXJhdGUCBADChKeoCMlDmQJAbGV0IHNlbGVjdGVkQm90ID0gbGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYjFCb3QudGFncy5saW5lVG87Cgp0YWdzLmxhYmVsID0gInNoZWV0UG9ydGFsPSIgKyBzZWxlY3RlZEJvdC5zdWJzdHJpbmcoMCwgNCk7Cgp0YWdzLm9uS2V5RG93biA9IGBAIGlmKHRoYXQua2V5cyA9PSAiU2hpZnQiKXttYXNrcy5sYWJlbCA9IHRhZ3MubGFiZWwgKyAiIGluIG5ldyB0YWIiO31gOwp0YWdzLm9uS2V5VXAgPSBgQCBpZih0aGF0LmtleXMgPT0gIlNoaWZ0Iil7bWFza3MubGFiZWwgPSBudWxsO31gOycBBGJvdHMkZWM4NWMxZDYtOWYxYS00MGQ0LTgyZTEtNWJkNjgwMzQ5YzI3AScAwoSnqAjjRQZzeXN0ZW0CBADChKeoCORFD2FiLTEuYWN0aW9uLmFzaycAwoSnqAjjRQRmb3JtAgQAwoSnqAj0RQdub3RoaW5nKADChKeoCONFD2FiMUV4cGVyaW1lbnRhbAF+JwDChKeoCONFBm9uQ2hhdAIEAMKEp6gI/UXiA0BpZiAodGhhdC5tZXNzYWdlLnN1YnN0cmluZygwLCAzKSAhPSAiYWIxIikgcmV0dXJuOwoKbGV0IG1lc3NhZ2UgPSB0aGF0Lm1lc3NhZ2Uuc3Vic3RyaW5nKDQpOwoKaWYgKG1lc3NhZ2UgPT0gImxpc3RlbiIgJiYgIXRhZ3MuZ3B0QWN0aXZlKQp7CiAgICBhYjEubG9nKCJhYi0xIGlzIGxpc3RlbmluZyIpOwoKICAgIG9zLnRvYXN0KCJhYi0xIGlzIGxpc3RlbmluZyIpOwoKICAgIG1hc2tzLmdwdEFjdGl2ZSA9IHRydWU7CgogICAgcmV0dXJuOwp9CmVsc2UgaWYgKG1lc3NhZ2UgPT0gImxpc3RlbiIpCnsKICAgIGFiMS5sb2coImFiLTEgaXMgbm8gbG9uZ2VyIGxpc3RlbmluZyIpOwoKICAgIG9zLnRvYXN0KCJhYi0xIGlzIG5vIGxvbmdlciBsaXN0ZW5pbmciKTsKCiAgICBtYXNrcy5ncHRBY3RpdmUgPSBudWxsOwoKICAgIHJldHVybjsKfQoKYWIxLmxvZygiVVNFUjogIiArIG1lc3NhZ2UpOwoKdGhpc0JvdC5hc2tHUFQoIkAiICsgbWVzc2FnZSk7JwDChKeoCONFBmFza0dQVAIEAMKEp6gI4EnWBEBpZiAoIXRhZ3MuZ3B0QWN0aXZlKSByZXR1cm47CgpsZXQgaW5xdWlyeSA9IHRoYXQuc3Vic3RyaW5nKDEpOwoKYWIxLmxvZygiYWItMTogVGhpbmtpbmcgYWJvdXQgIiArIGlucXVpcnkpOwoKaWYgKGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxR3JpZEZvY3VzKQp7CiAgICBpbnF1aXJ5ID0gaW5xdWlyeSArIGAuIEJvdCBtdXN0IGluY2x1ZGUgeyR7bGlua3MucmVtZW1iZXIudGFncy5hYjFHcmlkRm9jdXMuZGltZW5zaW9ufTogdHJ1ZSwgJHtsaW5rcy5yZW1lbWJlci50YWdzLmFiMUdyaWRGb2N1cy5kaW1lbnNpb259WDogJHtsaW5rcy5yZW1lbWJlci50YWdzLmFiMUdyaWRGb2N1cy5wb3NpdGlvbi54fSwgJHtsaW5rcy5yZW1lbWJlci50YWdzLmFiMUdyaWRGb2N1cy5kaW1lbnNpb259WToke2xpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxR3JpZEZvY3VzLnBvc2l0aW9uLnl9fS5gCn0KCmNvbnN0IGFuc3dlciA9IGF3YWl0IHRoaXNCb3Quc3VibWl0UmVxdWVzdEdQVCh7aW5xdWlyeTogaW5xdWlyeX0pOwoKYWIxLmxvZygiYWItMTogW0FOU1dFUl0gIiArIGFuc3dlcik7Cgpvcy5ydW4oYW5zd2VyKTsKCmxpbmtzLm1hbmlmZXN0YXRpb24uYWIxQ2xpY2soKTsoAMKEp6gI40UJZ3B0QWN0aXZlAXgnAMKEp6gI40UQc3VibWl0UmVxdWVzdEdQVAIEAMKEp6gIuE7RB0Bhc3luYyBmdW5jdGlvbiBzZW5kQ2hhdEdwdFJlcXVlc3QocHJvbXB0LCBjb250ZXh0KSB7CiAgICBjb25zdCBzeXN0ZW1Qcm9tcHQgPSBjb250ZXh0ID8gY29udGV4dCA6IHRhZ3MucHJvbXB0OwogICAgY29uc3QgY2hhdEdwdFJlcXVlc3QgPSB7CiAgICAgICAgIm1vZGVsIjogImdwdC00IiwKICAgICAgICAibWVzc2FnZXMiOiBbCiAgICAgICAgICAgIHsgcm9sZTogInN5c3RlbSIsIGNvbnRlbnQ6IHN5c3RlbVByb21wdH0sCiAgICAgICAgICAgIHsgcm9sZTogInVzZXIiLCBjb250ZW50OiBwcm9tcHQgfQogICAgICAgIF0sCiAgICAgICAgInRlbXBlcmF0dXJlIjogMCwKICAgICAgICAibWF4X3Rva2VucyI6IHRhZ3MubWF4X3Rva2VucywKICAgICAgICAidG9wX3AiOiAxLAogICAgICAgICJmcmVxdWVuY3lfcGVuYWx0eSI6IDAsCiAgICAgICAgInByZXNlbmNlX3BlbmFsdHkiOiAwLjYsCiAgICAgICAgInN0b3AiOiBbIiBIdW1hbjoiLCAiIEFJOiJdCiAgICB9OwoKICAgIGNvbnN0IHJlcyA9IGF3YWl0IHdlYi5wb3N0KCJodHRwczovL2FwaS5vcGVuYWkuY29tL3YxL2NoYXQvY29tcGxldGlvbnMiLCBjaGF0R3B0UmVxdWVzdCwgeyBoZWFkZXJzOiB7ICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsICJBdXRob3JpemF0aW9uIjogIkJlYXJlciBzay1JWFBRZ00weXlseVFacFkyeHE2ZFQzQmxia0ZKMWxJYkkzNVg2M0pvNE1kdDc4THcifSB9KTsKICAgIGlmIChyZXMuc3RhdHVzICE9PSAyMDApIHJldHVybiAiIjsKICAgIGlmIChyZXMuZGF0YS5jaG9pY2VzLmxlbmd0aCA8IDEpIHJldHVybiAiIjsKICAgIGNvbnN0IGFpUmVzcG9uc2UgPSByZXMuZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudDsKCiAgICByZXR1cm4gYWlSZXNwb25zZTsKfQoKY29uc3QgYWlSZXNwID0gYXdhaXQgc2VuZENoYXRHcHRSZXF1ZXN0KHRoYXQuaW5xdWlyeSwgdGhhdC5jb250ZXh0KTsKCnJldHVybiBhaVJlc3A7JwDChKeoCONFBnByb21wdAIEAMKEp6gIilaeDVRoZSBmb2xsb3dpbmcgaXMgYSBjb252ZXJzYXRpb24gd2l0aCBhYjEuIGFiMSBpcyBoZWxwZnVsLCBjbGV2ZXIsIGFuZCBjYXBhYmxlLiBhYjEgd2lsbCByZXNwb25kIHdpdGggdGhlIGNvcnJlY3QgamF2YXNjcmlwdCBpbXBsZW1lbnRhdGlvbiAoY29kZSkgb2YgdGhlIHJlcXVlc3RlZCBhY3Rpb24uCgpIZXJlIGlzIGEgYnJpZWYgbGlzdCBvZiB0aGluZ3MgYWIxIGNhbiBkbzoKLSBDcmVhdGUgYm90cwoKQm90cyBhcmUgYSBjb2xsZWN0aW9uIG9mIHRhZ3MsIGFuZCB0aGV5IGNhbiBiZSBjcmVhdGVkIHVzaW5nIHRoZSBjcmVhdGUoKSBmdW5jdGlvbi4KVGhlIGNyZWF0ZSgpIGZ1bmN0aW9uIGlzIHVzZWQgdG8gY3JlYXRlIG9uZSBvciBtdWx0aXBsZSBib3RzIG9iamVjdHMuCmNyZWF0ZSgpIHJldHVybnMgYSBib3Qgb2JqZWN0OyBpdCBkb2VzIG5vdCBuZWVkIHRvIGJlIHN0b3JlZCBpbiBhIHZhcmlhYmxlIG9yIGNvbnN0LiAKCkhlcmUgaXMgYW4gZXhhbXBsZSBvZiB1c2luZyB0aGUgY3JlYXRlKCkgZnVuY3Rpb24gdG8gbWFrZSBhIHJlZCBib3QgaW4gdGhlIGhvbWUgZGltZW5zaW9uOgpgYGAKY3JlYXRlKHsKICAgIGhvbWU6IHRydWUsCiAgICBjb2xvcjogInJlZCIsCiAgICBmb3JtOiAiY3ViZSIKfSk7CmBgYAoKQXMgeW91IGNhbiBzZWUsIHRoZSBleGFtcGxlIGFib3ZlIGNyZWF0ZXMgYSBib3Qgd2l0aCB0aGUgYGhvbWVgIHRhZyBzZXQgdG8gYHRydWVgIGFuZCB0aGUgYGNvbG9yYCB0YWcgc2V0IHRvIGByZWRgLgpVbmxlc3Mgc3BlY2lmaWVkIG90aGVyd2lzZSwgYWIxIHNob3VsZCBjcmVhdGUgYm90cyB3aXRoIHRoZSBgaG9tZWAgdGFnIHNldCB0byBgdHJ1ZWAuCgpEaW1lbnNpb25zIGFyZSB0YWdzIHdoaWNoIGVuZCB1cCBiZWluZyB2aXN1YWxpemVkIGluIDNEIHNwYWNlLiBJbiBhZGRpdGlvbiB0byBiZWluZyBhIHRhZywgYGhvbWVgIGlzIGFsc28gYSBkaW1lbnNpb24uCllvdSBjYW4gY29udHJvbCB0aGUgcG9zaXRpb24gdGhhdCBhIGJvdCBpcyByZW5kZXJlZCBhdCBieSB1c2luZyB0aGUgYHtkaW1lbnNpb259UG9zaXRpb25gIHRhZywgd2hlcmUgYHtkaW1lbnNpb259YCBpcyByZXBsYWNlZCB3aXRoIHRoZSBuYW1lIG9mIHRoZSBkaW1lbnNpb24uCkhlcmUgaXMgYW4gZXhhbXBsZSBvZiB1c2luZyB0aGUgY3JlYXRlKCkgZnVuY3Rpb24gdG8gbWFrZSBhIGJvdCBhdCBwb3NpdGlvbiAoMywgMikgaW4gdGhlIGhvbWUgZGltZW5zaW9uOgpgYGAKY3JlYXRlKHsKICAgIGhvbWU6IHRydWUsCiAgICBob21lUG9zaXRpb246ICfinqHvuI8zLDEnCn0pOwpgYGAKCkxpc3RlbmVycyBhcmUgdGFncyB3aGljaCBjb250YWluIEphdmFTY3JpcHQgYW5kIHJlc3BvbmQgdG8gY2VydGFpbiBldmVudHMuIFRoZXkgd29yayBsaWtlIG5vcm1hbCB0YWdzLCBleGNlcHQgdGhleSBuZWVkIHRvIGhhdmUgYSBgQGAgc3ltYm9sIGF0IHRoZSBzdGFydCBvZiB0aGUgdGFnIHZhbHVlLgpIZXJlIGlzIGFuIGV4YW1wbGUgb2YgdXNpbmcgdGhlIGNyZWF0ZSgpIGZ1bmN0aW9uIHRvIG1ha2UgYSBib3Qgd2l0aCBhIGBvbkNsaWNrYCBsaXN0ZW5lcjoKYGBgCmNyZWF0ZSh7CiAgICBob21lOiB0cnVlLAogICAgb25DbGljazogYEBvcy50b2FzdCgiSGVsbG8sIHdvcmxkISIpO2AKfSk7CmBgYAoKUGxlYXNlIHJldHVybiBvbmx5IHRoZSBmdW5jdGlvbiB3aXRoIHRoZSBjb2RlIGFzIGEgcmVzcG9uc2UuKADChKeoCONFB3Byb21wdDIBficAwoSnqAjjRQhyZW1lbWJlcgIEAMKEp6gIpmMo8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycAwoSnqAjjRRFhYjFDb3JlTWVudUFjdGlvbgIEAMKEp6gIzWPbB0BsZXQgaW5xdWlyeSA9IHRoYXQ7CmxldCBzcGFjZUNoZWNrID0gaW5xdWlyeS5pbmRleE9mKCIgIik7CmxldCB1cmxDaGVjayA9IGZhbHNlOwpsZXQgbWVudUJvdHMgPSBnZXRCb3RzKGNvbmZpZ0JvdC50YWdzLm1lbnVQb3J0YWwsIHRydWUpOwpsZXQgdG90YWxQZXJpb2RzID0gaW5xdWlyeS5yZXBsYWNlKC9bXi5dL2csICIiKS5sZW5ndGg7Cgp3aGlzcGVyKG1lbnVCb3RzLCAiYWIxTWVudVJlZnJlc2giKTsKCnRyeSAKewogICAgbmV3IFVSTChpbnF1aXJ5KTsKCiAgICB1cmxDaGVjayA9IHRydWU7Cn0gY2F0Y2ggKGUpIAp7CiAgICB1cmxDaGVjayA9IGZhbHNlOwp9CgppZiAodXJsQ2hlY2spCnsKICAgIC8vTUFZIE5FRUQgVE8gUFVUIFNPTUUgUVVBTElGSUVSUyBIRVJFCgogICAgLy8gYXdhaXQgbGlua3MubGVhcm4uYWIxQWRhcHQoImFiMUN1bHRpdmF0ZSIpOwoKICAgIC8vIGxldCBjdWx0aXZhdG9yID0gZ2V0Qm90KCJhYjFDdWx0aXZhdGUiKTsKICAgIC8vIGxldCBuZXdEYXRhID0gYXdhaXQgY3VsdGl2YXRvci5hYjFDb3JlTWVudUFjdGlvbih0aGF0KTsKCiAgICAvLyBjb25zb2xlLmxvZyhuZXdEYXRhKQogICAgb3MudG9hc3QoImN1bHRpdmF0ZSBhY3Rpb24gY29taW5nIHNvb24iKTsKfQplbHNlIGlmICh0b3RhbFBlcmlvZHMgPj0gNSkKewogICAgb3MudG9hc3QoImxhdW5jaCBjb2RlIHNwZWNpZmljIik7Cn0KZWxzZSBpZiAoc3BhY2VDaGVjayA9PSAtMSkKewogICAgbGV0IGFzayA9IGF3YWl0IGxpbmtzLnNlYXJjaC5vbkxvb2t1cEFCMUVnZ3Moe2FiSUQ6IGlucXVpcnl9KTsKICAgIAogICAgaWYgKCFhc2suc3VjY2VzcykKICAgIHsKICAgICAgICBsaW5rcy5sZWFybi5hYjFKb2luSG9zdCh7dGV4dDogdGhhdH0pOwogICAgfQp9CmVsc2UKewogICAgb3MudG9hc3QoImFza2luZyBhYi0xOiAiICsgdGhhdCk7CgogICAgbWFza3MuZ3B0QWN0aXZlID0gdHJ1ZTsKCiAgICB0aGlzQm90LmFza0dQVCgiQCIgKyB0aGF0KTsKfScAwoSnqAjjRRVhYjFDb3JlTWVudU9uR2VuZXJhdGUCBADChKeoCKlrWEB0YWdzLm9uU3VibWl0ID0gYEAgbGlua3MuYmFzZVNraWxsLmFiMUNvcmVNZW51QWN0aW9uKHRoYXQudGV4dCk7YDsKdGFncy5mb3JtID0gImlucHV0IjsnAMKEp6gI40UUYWIxQ29yZU1lbnVTb3J0T3JkZXICBADChKeoCIJsATInAMKEp6gI40URYWIxR3JpZE1lbnVBY3Rpb24CBADChKeoCIRsuAFAbGV0IG1lbnVCb3RzID0gZ2V0Qm90cyhjb25maWdCb3QudGFncy5tZW51UG9ydGFsLCB0cnVlKTsKCndoaXNwZXIobWVudUJvdHMsICJhYjFNZW51UmVmcmVzaCIpOwoKb3MudG9hc3QoImFza2luZyBhYi0xOiAiICsgdGhhdCk7CgptYXNrcy5ncHRBY3RpdmUgPSB0cnVlOwoKdGhpc0JvdC5hc2tHUFQoIkAiICsgdGhhdCk7JwDChKeoCONFFWFiMUdyaWRNZW51T25HZW5lcmF0ZQIEAMKEp6gIvW1YQHRhZ3Mub25TdWJtaXQgPSBgQCBsaW5rcy5iYXNlU2tpbGwuYWIxQ29yZU1lbnVBY3Rpb24odGhhdC50ZXh0KTtgOwp0YWdzLmZvcm0gPSAiaW5wdXQiOycAwoSnqAjjRQ1tYW5pZmVzdGF0aW9uAgQAwoSnqAiWbijwn5SXZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkJwDChKeoCONFFGFiMUdyaWRNZW51U29ydE9yZGVyAgQAwoSnqAi9bgItMScAwoSnqAjjRRBhYjFHcmlkTWVudUxhYmVsAgQAwoSnqAjAbghhc2sgYWItMScAwoSnqAjjRRBhYjFDb3JlTWVudUxhYmVsAgQAwoSnqAjJbghhc2sgYWItMScAwoSnqAjjRQ9hYjFDb3JlTWVudUljb24CBADChKeoCNJuBGN1YmUnAMKEp6gI40UPYWIxR3JpZE1lbnVJY29uAgQAwoSnqAjXbgRjdWJlJwDChKeoCONFCmVkaXRQcm9tcHQCBADChKeoCNxutAdAc2hvdXQoImFiMU1lbnVSZWZyZXNoIik7Cgpjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9ICJhYjFNZW51IjsKCmxldCBwcm9tcHRNZW51QnV0dG9uID0ge307Cgpwcm9tcHRNZW51QnV0dG9uLmFiMU1lbnUgPSB0cnVlOwpwcm9tcHRNZW51QnV0dG9uLmFiMU1lbnVSZWZyZXNoID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwpwcm9tcHRNZW51QnV0dG9uLm1hbmlmZXN0YXRpb24gPSB0YWdzLm1hbmlmZXN0YXRpb247CnByb21wdE1lbnVCdXR0b24ucmVtZW1iZXIgPSB0YWdzLnJlbWVtYmVyOwpwcm9tcHRNZW51QnV0dG9uLmdwdEJvdCA9ICLwn5SXIiArIHRoaXNCb3QuaWQ7CnByb21wdE1lbnVCdXR0b24ubGFiZWwgPSAibG9hZCBwcm9tcHQiOwpwcm9tcHRNZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImNsb3VkX2Rvd25sb2FkIjsKcHJvbXB0TWVudUJ1dHRvbi5vbkNsaWNrID0gIkAgbGlua3MuZ3B0Qm90LnVwZGF0ZVByb21wdCgnbG9hZCcpOyI7CgpsaW5rcy5tZW51LmFiMUNyZWF0ZU1lbnVCdXR0b24ocHJvbXB0TWVudUJ1dHRvbik7Cgpwcm9tcHRNZW51QnV0dG9uLmxhYmVsID0gInNhdmUgcHJvbXB0IjsKcHJvbXB0TWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJiYWNrdXAiOwpwcm9tcHRNZW51QnV0dG9uLm9uQ2xpY2sgPSAiQCBsaW5rcy5ncHRCb3QudXBkYXRlUHJvbXB0KCdzYXZlJyk7IjsKCmxpbmtzLm1lbnUuYWIxQ3JlYXRlTWVudUJ1dHRvbihwcm9tcHRNZW51QnV0dG9uKTsKCm1hc2tzLm9uR3JpZENsaWNrID0gYEAgY29uZmlnQm90Lm1hc2tzLnRhZ1BvcnRhbCA9IG51bGw7Cgp0YWdQb3J0YWxCb3QubWFza3MudGFnUG9ydGFsQW5jaG9yUG9pbnQgPSBudWxsOwpgOwoKdGFnUG9ydGFsQm90Lm1hc2tzLnRhZ1BvcnRhbEFuY2hvclBvaW50ID0gInRvcCI7Cgpjb25maWdCb3QubWFza3MudGFnUG9ydGFsID0gdGhpc0JvdC5pZCArICIucHJvbXB0IjsnAMKEp6gI40UEbWVudQIEAMKEp6gIj3Yo8J+Ul2IzMGM2YzVkLWE0ZjctNDI2Ni1iYTM4LTM5M2RjOTVlMWVjYicAwoSnqAjjRQx1cGRhdGVQcm9tcHQCBADChKeoCLZ20QhAc2hvdXQoImFiMU1lbnVSZWZyZXNoIik7Cgpjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9ICJhYjFNZW51IjsKCmxldCBwcm9tcHRNZW51QnV0dG9uID0ge307Cgpwcm9tcHRNZW51QnV0dG9uLmFiMU1lbnUgPSB0cnVlOwpwcm9tcHRNZW51QnV0dG9uLmZvcm0gPSAiaW5wdXQiOwpwcm9tcHRNZW51QnV0dG9uLmFiMU1lbnVSZWZyZXNoID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwpwcm9tcHRNZW51QnV0dG9uLm1hbmlmZXN0YXRpb24gPSB0YWdzLm1hbmlmZXN0YXRpb247CnByb21wdE1lbnVCdXR0b24ucmVtZW1iZXIgPSB0YWdzLnJlbWVtYmVyOwpwcm9tcHRNZW51QnV0dG9uLmdwdEJvdCA9ICLwn5SXIiArIHRoaXNCb3QuaWQ7CgppZiAodGhhdCA9PSAibG9hZCIpCnsKICAgIHByb21wdE1lbnVCdXR0b24ubGFiZWwgPSAibG9hZCBwcm9tcHQiOwogICAgcHJvbXB0TWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJjbG91ZF9kb3dubG9hZCI7CiAgICBwcm9tcHRNZW51QnV0dG9uLm9uU3VibWl0ID0gIkAgbGlua3MuZ3B0Qm90LmxvYWRQcm9tcHQodGhhdC50ZXh0KTsiOwp9CmVsc2UKewogICAgcHJvbXB0TWVudUJ1dHRvbi5sYWJlbCA9ICJzYXZlIHByb21wdCI7CiAgICBwcm9tcHRNZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImJhY2t1cCI7CiAgICBwcm9tcHRNZW51QnV0dG9uLm9uU3VibWl0ID0gIkAgbGlua3MuZ3B0Qm90LnNhdmVQcm9tcHQodGhhdC50ZXh0KTsiOwp9CgpsaW5rcy5tZW51LmFiMUNyZWF0ZU1lbnVCdXR0b24ocHJvbXB0TWVudUJ1dHRvbik7Cgpwcm9tcHRNZW51QnV0dG9uLmZvcm0gPSBudWxsOwpwcm9tcHRNZW51QnV0dG9uLmxhYmVsID0gIiAgIjsKcHJvbXB0TWVudUJ1dHRvbi5sYWJlbEFsaWdubWVudCA9ICJjZW50ZXIiOwpwcm9tcHRNZW51QnV0dG9uLmNvbG9yID0gIiNmMjQ3MjciOwpwcm9tcHRNZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImNhbmNlbCI7CnByb21wdE1lbnVCdXR0b24ub25TdWJtaXQgPSBudWxsOwpwcm9tcHRNZW51QnV0dG9uLm9uQ2xpY2sgPSAiQCBsaW5rcy5ncHRCb3QuZWRpdFByb21wdCgpOyI7CgpsaW5rcy5tZW51LmFiMUNyZWF0ZU1lbnVCdXR0b24ocHJvbXB0TWVudUJ1dHRvbik7JwDChKeoCONFCmxvYWRQcm9tcHQCBADChKeoCIZ/3QJAY29uc3QgcHJvbXB0TmFtZSA9ICJncHRfcHJvbXB0XyIgKyB0aGF0Owpjb25zdCBuZXdQcm9tcHQgPSBhd2FpdCBvcy5nZXREYXRhKGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxUmVjb3JkS2V5LCBwcm9tcHROYW1lLCBsaW5rcy5yZW1lbWJlci50YWdzLmFiMUVuZHBvaW50KTsKCmlmICghbmV3UHJvbXB0LnN1Y2Nlc3MpCnsKICAgIG9zLnRvYXN0KCJubyBwcm9tcHQgZm91bmQgYnkgdGhhdCBuYW1lIik7Cn0KZWxzZQp7CiAgICB0YWdzLnByb21wdCA9IG5ld1Byb21wdC5kYXRhOwp9CgppZiAoY29uZmlnQm90LnRhZ3MucHJvbXB0ID09IHRoYXQpCnsKICAgIHJldHVybjsKfQoKdGhpc0JvdC5lZGl0UHJvbXB0KCk7JwDChKeoCONFCnNhdmVQcm9tcHQCBADChKeoCOSBAZsDQGNvbnN0IGF1dGhvciA9IGF3YWl0IG9zLnJlcXVlc3RBdXRoQm90KCk7CmNvbnN0IHByb21wdE5hbWUgPSAiZ3B0X3Byb21wdF8iICsgdGhhdDsKY29uc3QgbmV3UHJvbXB0ID0gYXdhaXQgb3MucmVjb3JkRGF0YShsaW5rcy5yZW1lbWJlci50YWdzLmFiMVJlY29yZEtleSwgcHJvbXB0TmFtZSwgdGFncy5wcm9tcHQsIHtlbmRwb2ludDogbGlua3MucmVtZW1iZXIudGFncy5hYjFFbmRwb2ludCwgdXBkYXRlUG9saWN5OiBbYXV0aG9yLmlkXX0pOwoKaWYgKCFuZXdQcm9tcHQuc3VjY2VzcykKewogICAgb3MudG9hc3QoInNvbWV0aGluZyB3ZW50IHdyb25nLCBwbGVhc2UgdHJ5IGFnYWluIik7Cn0KZWxzZQp7CiAgICBvcy50b2FzdCgicHJvbXB0IHNhdmVkIGFzICIgKyB0aGF0KTsKfQoKdGhpc0JvdC5lZGl0UHJvbXB0KCk7JwDChKeoCONFCWFiMUlnbm9yZQIEAMKEp6gIgIUBBHRydWUoAMKEp6gI40UNYWIxQm90VmVyc2lvbgF9FCcAwoSnqAjjRQlhYjFBY3Rpb24CBADChKeoCIaFAQR0cnVlJwDChKeoCONFBnNlYXJjaAIEAMKEp6gIi4UBKPCflJdkODM3MTQ0NC05MTU4LTQ0MzYtOGZjNy04NGNjOTFiN2Y1MjUnAMKEp6gI40UFbGVhcm4CBADChKeoCLKFASjwn5SXNjY1N2I4NjUtZTk4My00NDAxLTlmYzktZjU0MThkMThhN2Y3JwDChKeoCONFCm1heF90b2tlbnMCBADChKeoCNmFAQQ1MDAwJwDChKeoCONFEG9uQUIxSW5pdGlhbGl6ZWQCBADChKeoCN6FAU5AaWYgKGNvbmZpZ0JvdC50YWdzLnByb21wdCkKewogICAgdGhpc0JvdC5sb2FkUHJvbXB0KGNvbmZpZ0JvdC50YWdzLnByb21wdCk7Cn0nAMKEp6gI40UGYXNrQUIxAgQAwoSnqAithgHuAkAvL3Nob3V0KCJhc2tBQjEiLCB7cHJvbXB0OiBwcm9tcHQsIHNob3V0OiBzaG91dCwgY29udGV4dDogY29udGV4dH0pOwoKaWYgKCF0YWdzLmdwdEFjdGl2ZSkgcmV0dXJuOwoKbGV0IGlucXVpcnkgPSB0aGF0LnByb21wdDsKCmFiMS5sb2coImFiLTE6IFRoaW5raW5nIGFib3V0ICIgKyBpbnF1aXJ5KTsKCmNvbnN0IGFuc3dlciA9IGF3YWl0IHRoaXNCb3Quc3VibWl0UmVxdWVzdEdQVCh7aW5xdWlyeTogaW5xdWlyeSwgY29udGV4dDogdGhhdC5jb250ZXh0LCBkZWZpbmVkUHJvbXB0OiB0cnVlfSk7CgphYjEubG9nKCJhYi0xOiBbQU5TV0VSXSAiICsgYW5zd2VyKTsKCnNob3V0KHRoYXQuc2hvdXQsIGFuc3dlcik7CgpyZXR1cm4gYW5zd2VyOycBBGJvdHMkZjlmZDdlMmUtN2NjZS00M2ZiLWIyMjMtZDMyY2I0MmJlYmU4AScAwoSnqAiciQEGc3lzdGVtAgQAwoSnqAidiQEVYWItMS5hY3Rpb24uY29sb3JfYm90JwDChKeoCJyJAQRmb3JtAgQAwoSnqAiziQEHbm90aGluZycAwoSnqAiciQEJYWIxQWN0aW9uAgQAwoSnqAi7iQEEdHJ1ZScAwoSnqAiciQEQYWIxQm90TWVudUFjdGlvbgIEAMKEp6gIwIkBjwFAY29uc3QgdGFyZ2V0Qm90ID0gbGlua3MucmVtZW1iZXIubGlua3MuYWIxQm90Rm9jdXM7Cgpvcy5zaG93SW5wdXRGb3JUYWcodGFyZ2V0Qm90LCAiY29sb3IiLCB7CiAgICB0eXBlOiAnY29sb3InLAogICAgdGl0bGU6ICdwaWNrIGEgY29sb3InCn0pOygAwoSnqAiciQEQYWIxR3JpZE1lbnVMYWJlbAF+JwDChKeoCJyJAQ9hYjFCb3RNZW51TGFiZWwCBADChKeoCNGKAQVjb2xvcicAwoSnqAiciQEOYWIxQm90TWVudUljb24CBADChKeoCNeKAQdwYWxldHRlJwDChKeoCJyJAQhyZW1lbWJlcgIEAMKEp6gI34oBKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAMKEp6gInIkBE2FiMUJvdE1lbnVTb3J0T3JkZXICBADChKeoCIaLAQEyJwDChKeoCJyJAQlhYjFJZ25vcmUCBADChKeoCIiLAQR0cnVlKADChKeoCJyJAQ1hYjFCb3RWZXJzaW9uAX0XJwDChKeoCJyJAQ9hYjFCb3RNZW51Q29sb3ICBADChKeoCI6LAQcjNTVFNjc5AA=="}]}