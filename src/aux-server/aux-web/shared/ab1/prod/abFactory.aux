{"version":2,"updates":[{"id":0,"timestamp":1719364516495,"update":"AbkCycqkxwwAJwEEYm90cyQxMDE0MjU0Ni04YzM0LTRiZDYtYWQzNi0wYTE0NjE3OTNkMDkBJwDJyqTHDAAEYWJJRAIEAMnKpMcMARRhYnJ3X3Rlc3RfZXhwZXJpZW5jZScAycqkxwwAEGVnZ0Zvcm1hdFZlcnNpb24CBADJyqTHDBYkMDE3MGQ4YmEtMTdjMC00MmM2LTgwZTktMmIxNWQzY2Q3NWM3KADJyqTHDAANdGFyZ2V0VmVyc2lvbgF9AScAycqkxwwAB21hbmFnZXICBADJyqTHDDwo8J+Ul2Q4MzcxNDQ0LTkxNTgtNDQzNi04ZmM3LTg0Y2M5MWI3ZjUyNScAycqkxwwAB29uQ2xpY2sCBADJyqTHDGMlQCBsaW5rcy5tYW5hZ2VyLmludGVyYWN0T3ZvKHRoaXNCb3QpOycAycqkxwwACG9uQ3JlYXRlAgQAycqkxwyJAZYEQGNvbnN0IHRhcmdldEFCID0gYXdhaXQgb3Muc2hvd0lucHV0KCdhYicsIHsKICAgIHRpdGxlOiAnYWIgbmFtZScKfSk7CgppZiAoIXRhcmdldEFCIHx8IHRhcmdldEFCID09ICJhYiIpCnsKICAgIG9zLnRvYXN0KCJubyB2YWxpZCBhYiBnaXZlbiIpOwoKICAgIGRlc3Ryb3kodGhpc0JvdCk7CgogICAgcmV0dXJuOwp9CgppZiAoIWF1dGhCb3QudGFncy5wcml2YWN5RmVhdHVyZXMucHVibGlzaERhdGEpCnsKICAgIG9zLnRvYXN0KCJub3QgYXV0aG9yaXplZCIpOwoKICAgIHJldHVybjsKfQoKY29uc3QgZ2V0UmVjb3JkID0gYXdhaXQgb3MuZ2V0RGF0YShsaW5rcy5yZW1lbWJlci50YWdzLmFiUmVjb3JkS2V5LCB0YXJnZXRBQiwgbGlua3MucmVtZW1iZXIudGFncy5hYkVuZHBvaW50KTsKCmlmICghZ2V0UmVjb3JkLnN1Y2Nlc3MpCnsKICAgIG9zLnRvYXN0KCJubyBhYiBmb3VuZCB3aXRoIHRoYXQgbmFtZSIpOwoKICAgIGRlc3Ryb3kodGhpc0JvdCk7CgogICAgcmV0dXJuOwp9CgphcHBseU1vZCh0aGlzQm90LCBnZXRSZWNvcmQuZGF0YSk7JwDJyqTHDAAEZm9ybQIEAMnKpMcMoAUDZWdnJwDJyqTHDAAQcHJvZ3Jlc3NCYXJDb2xvcgIEAMnKpMcMpAUHI0JGNUU2NicAycqkxwwAGnByb2dyZXNzQmFyQmFja2dyb3VuZENvbG9yAgQAycqkxwysBQcjNTkyOTg5KADJyqTHDAAJbGFiZWxTaXplAXw/AAAAJwDJyqTHDAAKbGFiZWxDb2xvcgIEAMnKpMcMtQUHIzQwNDA0MCcAycqkxwwADm9uUG9pbnRlckVudGVyAgQAycqkxwy9BS9Ab3MudG9hc3QodGFncy5hYklEICsgJyB2Jyt0YWdzLnRhcmdldFZlcnNpb24pOycAycqkxwwADWxhYmVsUG9zaXRpb24CBADJyqTHDO0FBWZyb250JwDJyqTHDAAPb3JpZW50YXRpb25Nb2RlAgQAycqkxwzzBQ5iaWxsYm9hcmRGcm9udCcAycqkxwwACW9uRGVzdHJveQIEAMnKpMcMggYjQGxpbmtzLm1hbmFnZXIubWFza3Mub3ZvQm90ID0gbnVsbDsnAMnKpMcMAAlkaW1lbnNpb24CBADJyqTHDKYGBGhvbWUnAMnKpMcMAAZzeXN0ZW0CBADJyqTHDKsGDmFiLmZhY3RvcnkuZWdnJwDJyqTHDAAJbGlzdGVuaW5nAgQAycqkxwy6BgVmYWxzZScAycqkxwwACWFiRmFjdG9yeQIEAMnKpMcMwAYEdHJ1ZScAycqkxwwACGFiSWdub3JlAgQAycqkxwzFBgR0cnVlJwDJyqTHDAAIcmVtZW1iZXICBADJyqTHDMoGKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAMnKpMcMAAtmYWN0b3J5SWNvbgIEAMnKpMcM8QYDZWdnJwDJyqTHDAAFY29sb3ICBADJyqTHDPUGByNGRkZGRkYoAMnKpMcMAAxhYkJvdFZlcnNpb24BfRQnAMnKpMcMAA9hYk1lbnVTb3J0T3JkZXICBADJyqTHDP4GATMnAQRib3RzJDE0ZTFmZGFjLWNmZDctNGU3ZS1iZGQxLTk2N2E0MDg1YTc1NQEnAMnKpMcMgAcGc3lzdGVtAgQAycqkxwyBBxJhYi5mYWN0b3J5Lm1hbmFnZXInAMnKpMcMgAcEZm9ybQIEAMnKpMcMlAcHbm90aGluZycAycqkxwyABwhhYklnbm9yZQIEAMnKpMcMnAcEdHJ1ZScAycqkxwyABw5hYkFkZFRvRmFjdG9yeQIEAMnKpMcMoQeQBkAvL3Nob3V0KCJhYkFkZFRvRmFjdG9yeSIsIHtkaW1lbnNpb246IGRpbWVuc2lvbiwgYm90OiBib3QsIGZhY3RvcnlJRDogZmFjdG9yeUlEfSk7CmxldCBmYWN0b3J5SUQ7CgppZiAodGhhdC5mYWN0b3J5SUQpCnsKICAgIGZhY3RvcnlJRCA9IHRoYXQuZmFjdG9yeUlEOwp9CmVsc2UKewogICAgZmFjdG9yeUlEID0gYXdhaXQgb3Muc2hvd0lucHV0KG51bGwsIHsKICAgICAgICB0aXRsZTogJ0FkZCBmYWN0b3J5IGlkJwogICAgfSk7Cn0KCmlmIChmYWN0b3J5SUQpCnsKICAgIGxldCBwcmV2aW91c0ZhY3RvcnlCb3QgPSBnZXRCb3QoInN5c3RlbSIsICJhYi5mYWN0b3J5LiIgKyBmYWN0b3J5SUQpOwogICAgCiAgICBpZihwcmV2aW91c0ZhY3RvcnlCb3QpCiAgICB7CiAgICAgICAgZGVzdHJveShwcmV2aW91c0ZhY3RvcnlCb3QpOwogICAgfQoKICAgIGxldCB0ZW1wbGF0ZUJvdCA9IHRoYXQuYm90OwogICAgbGV0IGZhY3RvcnlNb2QgPSB7fTsKCiAgICBmYWN0b3J5TW9kW3RoYXQuZGltZW5zaW9uXSA9IG51bGw7CiAgICBmYWN0b3J5TW9kLnN5c3RlbSA9ICJhYi5mYWN0b3J5LiIgKyBmYWN0b3J5SUQ7CiAgICBmYWN0b3J5TW9kLmxpc3RlbmluZyA9IGZhbHNlOwogICAgZmFjdG9yeU1vZC5hYkZhY3RvcnkgPSB0cnVlOwoKICAgIGNyZWF0ZSh0ZW1wbGF0ZUJvdCwgZmFjdG9yeU1vZCk7CgogICAgYWIubG9nKCJhYjogIiArIGZhY3RvcnlJRCArICIgYWRkZWQgdG8gZmFjdG9yeSIpOwoKICAgIG9zLnRvYXN0KCJhZGRlZCAiICsgZmFjdG9yeUlEICsgIiB0byBmYWN0b3J5Iik7Cn0nAMnKpMcMgAcJYWJGYWN0b3J5AgQAycqkxwyyDQR0cnVlJwDJyqTHDIAHD2FiQm90TWVudUFjdGlvbgIEAMnKpMcMtw24AUBjb25zdCBjdXJyZW50RGltID0gbGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbjsKY29uc3QgdGFyZ2V0Qm90ID0gbGlua3MucmVtZW1iZXIubGlua3MuYWJCb3RGb2N1czsKCnRoaXNCb3QuYWJBZGRUb0ZhY3Rvcnkoe2RpbWVuc2lvbjogY3VycmVudERpbSwgYm90OiB0YXJnZXRCb3R9KTsnAMnKpMcMgAcTYWJDcmVhdGVGcm9tRmFjdG9yeQIEAMnKpMcM8A7IBkAvL3Nob3V0KCJhYkNyZWF0ZUZyb21GYWN0b3J5Iiwge2ZhY3RvcnlJRDogImZhY3RvcnlJRCIsIHBvc2l0aW9uOiB7ZGltZW5zaW9uOiAiZGltZW5zaW9uIiwgeDogIngiLCB5OiAieSJ9fSk7CmxldCBmdWxsTmFtZSA9ICJhYi5mYWN0b3J5LiIgKyB0aGF0LmZhY3RvcnlJRDsKbGV0IGZhY3RvcnlUZW1wbGF0ZSA9IGdldE1vZChnZXRCb3QoJ3N5c3RlbScsIGZ1bGxOYW1lKSk7CmxldCBwb3NpdGlvbkluZm8gPSB0aGF0LnBvc2l0aW9uOwoKaWYoIWZhY3RvcnlUZW1wbGF0ZSkKewogICAgY29uc29sZS5sb2coIm5vdCBmYWN0b3J5IGJvdCBmb3VuZCIpOwoKICAgIGFiLmxvZygiYWI6ICIgKyBmdWxsTmFtZSArICIgY291bGQgbm90IGJlIGZvdW5kIikKCiAgICByZXR1cm47Cn0KCmFiLmxvZygiYWI6ICIgKyBmdWxsTmFtZSArICIgY3JlYXRlZCBmcm9tIGZhY3RvcnkiKTsKCmxldCBuZXdCb3QgPSB7fQoKbmV3Qm90LmNyZWF0b3IgPSBudWxsOwpuZXdCb3RbcG9zaXRpb25JbmZvLmRpbWVuc2lvbl0gPSB0cnVlOwpuZXdCb3RbcG9zaXRpb25JbmZvLmRpbWVuc2lvbiArICJYIl0gPSBwb3NpdGlvbkluZm8ucG9zaXRpb24ueDsKbmV3Qm90W3Bvc2l0aW9uSW5mby5kaW1lbnNpb24gKyAiWSJdID0gcG9zaXRpb25JbmZvLnBvc2l0aW9uLnk7Cm5ld0JvdC5saXN0ZW5pbmcgPSBudWxsOwpuZXdCb3QuYWJJZ25vcmUgPSBudWxsOwpuZXdCb3Quc3lzdGVtID0gbnVsbDsKbmV3Qm90LmFiRmFjdG9yeSA9IG51bGw7Cm5ld0JvdC5hYk1lbnVTb3J0T3JkZXIgPSBudWxsOwoKY3JlYXRlKGZhY3RvcnlUZW1wbGF0ZSwgbmV3Qm90KTsKCmxpbmtzLm1hbmlmZXN0YXRpb24uYWJDbGljaygpOycAycqkxwyABxBhYkdyaWRNZW51QWN0aW9uAgQAycqkxwy5FdcIQHNob3V0KCJhYk1lbnVSZWZyZXNoIik7Cgpjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9ICJhYk1lbnUiOwoKbGlua3MubWVudS5tYXNrcy5vbkdyaWRDbGljayA9ICJAIHNob3V0KCdhYk1lbnVSZWZyZXNoJyk7IGxpbmtzLm1hbmlmZXN0YXRpb24uYWJDbGljaygpOyI7Cgpjb25zdCBmYWN0b3J5Qm90cyA9IGdldEJvdHMoImFiRmFjdG9yeSIpOwpjb25zdCBtZW51QnV0dG9uID0ge307CgptZW51QnV0dG9uLmFiTWVudSA9IHRydWU7Cm1lbnVCdXR0b24uYWJNZW51UmVmcmVzaCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKbWVudUJ1dHRvbi5ncmlkSW5mb3JtYXRpb24gPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiR3JpZEZvY3VzOwptZW51QnV0dG9uLm1hbmFnZXIgPSAi8J+UlyIgKyB0aGlzQm90LmlkOwptZW51QnV0dG9uLm9uQ2xpY2sgPSBgQCBsaW5rcy5tYW5hZ2VyLmFiQ3JlYXRlRnJvbUZhY3Rvcnkoe2ZhY3RvcnlJRDogdGFncy5sYWJlbCwgcG9zaXRpb246IHRhZ3MuZ3JpZEluZm9ybWF0aW9ufSk7IHNob3V0KCdhYk1lbnVSZWZyZXNoJyk7YDsKCmlmIChmYWN0b3J5Qm90cy5sZW5ndGggPCAyKQp7CiAgICByZXR1cm47IAp9Cgpmb3IgKGxldCBqID0gMDsgaiA8IGZhY3RvcnlCb3RzLmxlbmd0aDsgaisrKSAKewogICAgbGV0IGN1cnJlbnRGYWN0b3J5Qm90ID0gZmFjdG9yeUJvdHNbal07CiAgICBsZXQgY3VycmVudFN5c3RlbVRhZyA9IGN1cnJlbnRGYWN0b3J5Qm90LnRhZ3Muc3lzdGVtOwoKICAgIGlmIChjdXJyZW50U3lzdGVtVGFnID09IHRhZ3Muc3lzdGVtKQogICAgewogICAgICAgIGNvbnRpbnVlOwogICAgfQoKICAgIG1lbnVCdXR0b24uYWJNZW51U29ydE9yZGVyID0gY3VycmVudEZhY3RvcnlCb3QudGFncy5hYk1lbnVTb3J0T3JkZXI7CiAgICBtZW51QnV0dG9uLmxhYmVsID0gY3VycmVudFN5c3RlbVRhZy5zdWJzdHJpbmcoMTEpOwogICAgbWVudUJ1dHRvbi5jb2xvciA9IGN1cnJlbnRGYWN0b3J5Qm90LnRhZ3MuY29sb3I7CiAgICBtZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gY3VycmVudEZhY3RvcnlCb3QudGFncy5mYWN0b3J5SWNvbjsKCiAgICBsaW5rcy5tZW51LmFiQ3JlYXRlTWVudUJ1dHRvbihtZW51QnV0dG9uKTsKfScAycqkxwyABw1tYW5pZmVzdGF0aW9uAgQAycqkxwyPHijwn5SXZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkJwDJyqTHDIAHCHJlbWVtYmVyAgQAycqkxwy2Hijwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwDJyqTHDIAHBG1lbnUCBADJyqTHDN0eKPCflJdiMzBjNmM1ZC1hNGY3LTQyNjYtYmEzOC0zOTNkYzk1ZTFlY2InAMnKpMcMgAcPYWJHcmlkTWVudUxhYmVsAgQAycqkxwyEHwd0b29sYm94JwDJyqTHDIAHDmFiR3JpZE1lbnVJY29uAgQAycqkxwyMHwxjb25zdHJ1Y3Rpb24nAMnKpMcMgAcTYWJHcmlkTWVudVNvcnRPcmRlcgIEAMnKpMcMmR8BMycAycqkxwyABw1hYkJvdE1lbnVJY29uAgQAycqkxwybHwxjb25zdHJ1Y3Rpb24nAMnKpMcMgAcOYWJCb3RNZW51TGFiZWwCBADJyqTHDKgfDmFkZCB0byB0b29sYm94JwDJyqTHDIAHEmFiQm90TWVudVNvcnRPcmRlcgIEAMnKpMcMtx8BMycAycqkxwyABw5hYkJvdE1lbnVDb2xvcgIEAMnKpMcMuR8HIzU1RTY3OScAycqkxwyABw9hYkdyaWRNZW51Q29sb3ICBADJyqTHDMEfByM1NUU2NzkoAMnKpMcMgAcMYWJCb3RWZXJzaW9uAX0aJwEEYm90cyQxZGQ1OTZlMS04ODI2LTQyNTctYjVkNi1kYzJhOWE1NzFkZjUBJwDJyqTHDMofBWNvbG9yAgQAycqkxwzLHwcjN0I2NEZGJwDJyqTHDMofBGZvcm0CBADJyqTHDNMfA2hleCgAycqkxwzKHwVzY2FsZQF8P8AAACgAycqkxwzKHwZzY2FsZVoBez+EeuFHrhR7JwDJyqTHDMofB29uQ2xpY2sCBADJyqTHDNkfiQlAc2hvdXQoInBhZE1lbnVSZXNldCIpOwoKY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSAicGFkTWVudSI7CgptYXNrcy5vbkdyaWRDbGljayA9IGBAIHNob3V0KCJwYWRNZW51UmVzZXQiKTtgOwptYXNrcy5wYWRNZW51UmVzZXQgPSBgQCBjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9IG51bGw7CgpjbGVhclRhZ01hc2tzKHRoaXNCb3QpO2A7Cgpjb25zdCBwYWRMb2NhdGlvbnMgPSB0YWdzLnBhZExvY2F0aW9uczsKY29uc3QgbWVudUJ1dHRvbiA9IHt9OwoKbWVudUJ1dHRvbi5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwptZW51QnV0dG9uLnBhZE1lbnUgPSB0cnVlOwptZW51QnV0dG9uLnBhZE1lbnVSZXNldCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKbWVudUJ1dHRvbi5tZW51SXRlbVN0eWxlID0geyJib3JkZXItcmFkaXVzIjoiOHB4IiwgIm1hcmdpbi10b3AiOiIzcHgifTsKbWVudUJ1dHRvbi5sYWJlbEFsaWdubWVudCA9ICJsZWZ0IjsKbWVudUJ1dHRvbi5jb2xvciA9IHRhZ3MuY29sb3I7Cm1lbnVCdXR0b24ubWFuYWdlciA9IGdldExpbmsodGhpc0JvdCk7CgppZiAocGFkTG9jYXRpb25zLmxlbmd0aCA+IDApCnsKICAgIG1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAibWVldGluZ19yb29tIjsKICAgIG1lbnVCdXR0b24ub25DbGljayA9IGBAIGxpbmtzLm1hbmFnZXIucGFkR29Ub0xvY2F0aW9uKHRhZ3MubGFiZWwpO2A7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWRMb2NhdGlvbnMubGVuZ3RoOyBpKyspCiAgICB7CiAgICAgICAgbWVudUJ1dHRvbi5sYWJlbCA9IHBhZExvY2F0aW9uc1tpXTsKCiAgICAgICAgY3JlYXRlKG1lbnVCdXR0b24pOwogICAgfQp9CgptZW51QnV0dG9uLmxhYmVsQWxpZ25tZW50ID0gImNlbnRlciI7Cm1lbnVCdXR0b24ubGFiZWwgPSAiICAgICI7Cm1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiaW9zX3NoYXJlIjsKbWVudUJ1dHRvbi5vbkNsaWNrID0gYEAgbGlua3MubWFuYWdlci5wYWRTaGFyZSgpO2A7CgpjcmVhdGUobWVudUJ1dHRvbik7CgppZiAoYnVpbGRlclZlcnNpb24pCnsKICAgIG1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiZWRpdCI7CiAgICBtZW51QnV0dG9uLm9uQ2xpY2sgPSBgQCBsaW5rcy5tYW5hZ2VyLnBhZEVkaXRNZW51KCk7YDsKCiAgICBjcmVhdGUobWVudUJ1dHRvbik7Cn0nAMnKpMcMyh8Ob25Qb2ludGVyRW50ZXICBADJyqTHDOMoIUAgbWFza3Muc2NhbGUgPSB0YWdzLnNjYWxlICsgMC4xOycAycqkxwzKHw1vblBvaW50ZXJFeGl0AgQAycqkxwyFKRlAIGNsZWFyVGFnTWFza3ModGhpc0JvdCk7JwDJyqTHDMofBnN5c3RlbQIEAMnKpMcMnykOYWIuZmFjdG9yeS5wYWQnAMnKpMcMyh8PcGFkR29Ub0xvY2F0aW9uAgQAycqkxwyuKaIFQGxldCB0YXJnZXRMb2NhdGlvbiA9IHRoYXQ7CmxldCB1cmxDaGVjayA9IGZhbHNlOwoKdHJ5IAp7CiAgICB0YXJnZXRMb2NhdGlvbiA9IG5ldyBVUkwodGhhdCk7CgogICAgdXJsQ2hlY2sgPSAhdXJsQ2hlY2s7Cn0KY2F0Y2ggKGUpIAp7CgogICAgb3MudG9hc3QoInRyYXZlbGxpbmcgbm93Iik7CgogICAgb3MuZ29Ub1VSTCgiLz9hYj0iICsgdGFyZ2V0TG9jYXRpb24pOwp9CgpsZXQgaW5zdENoZWNrID0gdGFyZ2V0TG9jYXRpb24uc2VhcmNoUGFyYW1zLmhhcygiaW5zdCIpOwpsZXQgYWJDaGVjayA9IHRhcmdldExvY2F0aW9uLnNlYXJjaFBhcmFtcy5oYXMoImFiIik7CgppZiAoaW5zdENoZWNrKQp7CiAgICBpZiAoYWJDaGVjaykKICAgIHsKICAgICAgICBvcy5nb1RvVVJMKCIvP2dyaWRQb3J0YWw9aG9tZSZpbnN0PSIgKyB0YXJnZXRMb2NhdGlvbi5zZWFyY2hQYXJhbXMuZ2V0KCJpbnN0IikgKyAiJmFiPSIgKyB0YXJnZXRMb2NhdGlvbi5zZWFyY2hQYXJhbXMuZ2V0KCJhYiIpKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBvcy5nb1RvVVJMKCIvP2dyaWRQb3J0YWw9aG9tZSZpbnN0PSIgKyB0YXJnZXRMb2NhdGlvbi5zZWFyY2hQYXJhbXMuZ2V0KCJpbnN0IikpOwogICAgfQogICAgCn0KZWxzZSAKewogICAgb3MudG9hc3QoIm5vdCBhIHJlY29nbml6ZWQgdXJsIik7Cn0nAMnKpMcMyh8LcGFkRWRpdE1lbnUCBADJyqTHDNEugQ9Ac2hvdXQoInBhZE1lbnVSZXNldCIpOwoKY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSAicGFkTWVudSI7CgptYXNrcy5vbkdyaWRDbGljayA9IGBAIHNob3V0KCJwYWRNZW51UmVzZXQiKTtgOwptYXNrcy5wYWRNZW51UmVzZXQgPSBgQCBjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9IG51bGw7CgpjbGVhclRhZ01hc2tzKHRoaXNCb3QpO2A7Cgpjb25zdCBwYWRMb2NhdGlvbnMgPSB0YWdzLnBhZExvY2F0aW9uczsKY29uc3QgbWVudUJ1dHRvbiA9IHt9OwoKbWVudUJ1dHRvbi5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwptZW51QnV0dG9uLnBhZE1lbnVTb3J0T3JkZXIgPSAxMDA7Cm1lbnVCdXR0b24ucGFkTWVudVJlc2V0ID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwptZW51QnV0dG9uLm1lbnVJdGVtU3R5bGUgPSB7ICJib3JkZXItcmFkaXVzIjogIjhweCIsICJtYXJnaW4tdG9wIjogIjNweCIgfTsKbWVudUJ1dHRvbi5sYWJlbEFsaWdubWVudCA9ICJjZW50ZXIiOwptZW51QnV0dG9uLmNvbG9yID0gIiNENjZENUUiOwptZW51QnV0dG9uLm1hbmFnZXIgPSBnZXRMaW5rKHRoaXNCb3QpOwptZW51QnV0dG9uLmxhYmVsID0gIiAgICAiOwptZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImRlbGV0ZV9mb3JldmVyIjsKbWVudUJ1dHRvbi5vbkNsaWNrID0gYEAgbGlua3MubWFuYWdlci5wYWRSZW1vdmVMb2NhdGlvbnMoKTtgOwptZW51QnV0dG9uLm9wdGlvbkNsaWNrID0gYEAgaWYgKGdldEJvdChieU1vZCh7cGFkTG9jYXRpb25PcHRpb246IHRydWUsIGZvcm1BZGRyZXNzOiAiY2hlY2tfYm94In0pKSkKewogICAgdGFncy5wYWRNZW51ID0gdHJ1ZTsKfQplbHNlCnsKICAgIHRhZ3MucGFkTWVudSA9IGZhbHNlOwp9YDsKCmxldCBkZWxldGVCdXR0b24gPSBjcmVhdGUobWVudUJ1dHRvbik7CgptZW51QnV0dG9uLnBhZE1lbnUgPSB0cnVlOwptZW51QnV0dG9uLmxhYmVsQWxpZ25tZW50ID0gImxlZnQiOwptZW51QnV0dG9uLmNvbG9yID0gdGFncy5jb2xvcjsKbWVudUJ1dHRvbi5kZWxldGVCdXR0b24gPSBnZXRMaW5rKGRlbGV0ZUJ1dHRvbik7CgppZiAocGFkTG9jYXRpb25zLmxlbmd0aCA+IDApIAp7CiAgICBtZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImNoZWNrX2JveF9vdXRsaW5lX2JsYW5rIjsKICAgIG1lbnVCdXR0b24ucGFkTG9jYXRpb25PcHRpb24gPSB0cnVlOwogICAgbWVudUJ1dHRvbi5vbkNsaWNrID0gYEAgaWYgKHRhZ3MuZm9ybUFkZHJlc3MgPT0gImNoZWNrX2JveF9vdXRsaW5lX2JsYW5rIikKICAgIHsKICAgICAgICB0YWdzLmZvcm1BZGRyZXNzID0gImNoZWNrX2JveCI7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgdGFncy5mb3JtQWRkcmVzcyA9ICJjaGVja19ib3hfb3V0bGluZV9ibGFuayI7CiAgICB9CiAgICAKICAgIGxpbmtzLmRlbGV0ZUJ1dHRvbi5vcHRpb25DbGljayh0aGlzQm90KTtgOwoKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFkTG9jYXRpb25zLmxlbmd0aDsgaSsrKSAKICAgIHsKICAgICAgICBtZW51QnV0dG9uLnBhZE1lbnVTb3J0T3JkZXIgPSBpOwogICAgICAgIG1lbnVCdXR0b24ubGFiZWwgPSBwYWRMb2NhdGlvbnNbaV07CgogICAgICAgIGNyZWF0ZShtZW51QnV0dG9uKTsKICAgIH0KfQoKbWVudUJ1dHRvbi5vbkNsaWNrID0gbnVsbDsKbWVudUJ1dHRvbi5wYWRMb2NhdGlvbk9wdGlvbiA9IG51bGw7Cm1lbnVCdXR0b24ucGFkTWVudVNvcnRPcmRlciA9IC0xOwptZW51QnV0dG9uLmxhYmVsID0gIisiOwptZW51QnV0dG9uLmZvcm0gPSAiaW5wdXQiOwptZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gIm1lZXRpbmdfcm9vbSI7Cm1lbnVCdXR0b24ub25TdWJtaXQgPSBgQCBpZiAoIXRoYXQpCnsKICAgIHJldHVybjsKfQoKbGlua3MubWFuYWdlci5wYWRBZGRMb2NhdGlvbih0aGF0LnRleHQpO2A7CgpjcmVhdGUobWVudUJ1dHRvbik7JwDJyqTHDMofCHBhZFNoYXJlAgQAycqkxwzTPWNAc2hvdXQoInBhZE1lbnVSZXNldCIpOwoKb3Muc2V0Q2xpcGJvYXJkKGNvbmZpZ0JvdC50YWdzLnVybCk7Cgpvcy50b2FzdCgidXJsIGNvcGllZCB0byBjbGlwYm9hcmQiKTsnAMnKpMcMyh8OcGFkQWRkTG9jYXRpb24CBADJyqTHDLc+hwFAc2hvdXQoInBhZE1lbnVSZXNldCIpOwoKbGV0IG5ld0FycmF5ID0gdGFncy5wYWRMb2NhdGlvbnM7CgpuZXdBcnJheS5wdXNoKHRoYXQpOwoKdGFncy5wYWRMb2NhdGlvbnMgPSBuZXdBcnJheTsKCnRoaXNCb3QucGFkRWRpdE1lbnUoKTsnAMnKpMcMyh8ScGFkUmVtb3ZlTG9jYXRpb25zAgQAycqkxwy/P+UDQGNvbnN0IHBhZE1lbnVPcHRpb25zID0gZ2V0Qm90cyhieU1vZCh7cGFkTG9jYXRpb25PcHRpb246IHRydWUsIGZvcm1BZGRyZXNzOiAiY2hlY2tfYm94IiwgcGFkTWVudTogdHJ1ZX0pKTsKY29uc3QgcmVtb3ZlVGFyZ2V0cyA9IFtdOwoKZm9yIChsZXQgaSA9IDA7IGkgPCBwYWRNZW51T3B0aW9ucy5sZW5ndGg7IGkrKykKewogICAgcmVtb3ZlVGFyZ2V0cy5wdXNoKHBhZE1lbnVPcHRpb25zW2ldLnRhZ3MubGFiZWwpOwp9CgpzaG91dCgicGFkTWVudVJlc2V0Iik7Cgpjb25zdCBwYWRMb2NhdGlvbnMgPSB0YWdzLnBhZExvY2F0aW9uczsKCmZvciAobGV0IGogPSAwOyBqIDwgcmVtb3ZlVGFyZ2V0cy5sZW5ndGg7IGorKykKewogICAgbGV0IHRhcmdldEluZGV4ID0gcGFkTG9jYXRpb25zLmluZGV4T2YocmVtb3ZlVGFyZ2V0c1tqXSk7CgogICAgcGFkTG9jYXRpb25zLnNwbGljZSh0YXJnZXRJbmRleCwgMSk7Cn0KCnRoaXNCb3QucGFkRWRpdE1lbnUoKTsoAMnKpMcMyh8MYWJCb3RWZXJzaW9uAX0KJwDJyqTHDMofCWFiRmFjdG9yeQIEAMnKpMcMpkMEdHJ1ZScAycqkxwzKHwhhYklnbm9yZQIEAMnKpMcMq0MEdHJ1ZScAycqkxwzKHwtmYWN0b3J5SWNvbgIEAMnKpMcMsEMMbWVldGluZ19yb29tJwDJyqTHDMofCWxpc3RlbmluZwIEAMnKpMcMvUMFZmFsc2UnAMnKpMcMyh8LdG9vbE1hbmFnZXICBADJyqTHDMNDKPCflJcxNGUxZmRhYy1jZmQ3LTRlN2UtYmRkMS05NjdhNDA4NWE3NTUnAMnKpMcMyh8Ib25DcmVhdGUCBADJyqTHDOpDUkBpZiAoIXRhZ3Muc3lzdGVtKQp7CiAgICBsZXQgYmFzZUFycmF5ID0gW107CgogICAgdGFncy5wYWRMb2NhdGlvbnMgPSBiYXNlQXJyYXk7Cn0nAMnKpMcMyh8PYWJNZW51U29ydE9yZGVyAgQAycqkxwy9RAExJwEEYm90cyRhNWUyZWVkZi1jZDE3LTRiZjgtYTk4Ni1kZDgyYWExZmQ4NTgBJwDJyqTHDL9EBWNvbG9yAgQAycqkxwzARAcjNjIyNzczJwDJyqTHDL9EBGZvcm0CBADJyqTHDMhEBWhlbGl4JwDJyqTHDL9EBG1vZHMCBADJyqTHDM5EGPCfp6x7ImNvbG9yIjogIiM2MjI3NzMifScAycqkxwy/RAZzeXN0ZW0CBADJyqTHDOVEDmFiLmZhY3RvcnkubW9kJwDJyqTHDL9ECWFiRmFjdG9yeQIEAMnKpMcM9EQEdHJ1ZScAycqkxwy/RAhhYklnbm9yZQIEAMnKpMcM+UQEdHJ1ZScAycqkxwy/RAlsaXN0ZW5pbmcCBADJyqTHDP5EBWZhbHNlJwDJyqTHDL9EC2ZhY3RvcnlJY29uAgQAycqkxwyERQVoZWxpeCcAycqkxwy/RAt0b29sTWFuYWdlcgIEAMnKpMcMikUo8J+UlzE0ZTFmZGFjLWNmZDctNGU3ZS1iZGQxLTk2N2E0MDg1YTc1NScAycqkxwy/RAdvbkNsaWNrAgQAycqkxwyxRZMGQHNob3V0KCJtb2RNZW51UmVzZXQiKTsKCmNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gIm1vZE1lbnUiOwoKbWFza3Mub25HcmlkQ2xpY2sgPSBgQCBzaG91dCgibW9kTWVudVJlc2V0Iik7YDsKbWFza3MubW9kTWVudVJlc2V0ID0gYEAgY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSBudWxsOwpjb25maWdCb3QubWFza3MudGFnUG9ydGFsID0gbnVsbDsKCnRhZ1BvcnRhbEJvdC5tYXNrcy50YWdQb3J0YWxBbmNob3IgPSBudWxsOwoKY2xlYXJUYWdNYXNrcyh0aGlzQm90KTtgOwoKbGV0IG1vZE1lbnVCb3QgPSB7fTsKCm1vZE1lbnVCb3Quc3BhY2UgPSAidGVtcExvY2FsIjsKbW9kTWVudUJvdC5tb2RNZW51ID0gdHJ1ZTsKbW9kTWVudUJvdC5sYWJlbCA9ICJlZGl0IG1vZCI7Cm1vZE1lbnVCb3QuZm9ybUFkZHJlc3MgPSAiZWRpdCI7Cm1vZE1lbnVCb3QuY29sb3IgPSB0YWdzLmNvbG9yOwptb2RNZW51Qm90Lm1vZERpbWVuc2lvbiA9IHRoaXNCb3QuaWQgKyAiLm1vZHMiOwptb2RNZW51Qm90Lm1vZE1lbnVSZXNldCA9IGBAIGRlc3Ryb3kodGhpc0JvdCk7YDsKbW9kTWVudUJvdC5tZW51SXRlbVN0eWxlID0geyJib3JkZXItcmFkaXVzIjoiOHB4IiwgIm1hcmdpbi10b3AiOiIzcHgifTsKbW9kTWVudUJvdC5vbkNsaWNrID0gYEAgZGVzdHJveSh0aGlzQm90KTsKCmNvbmZpZ0JvdC5tYXNrcy50YWdQb3J0YWwgPSB0YWdzLm1vZERpbWVuc2lvbjsKCnRhZ1BvcnRhbEJvdC5tYXNrcy50YWdQb3J0YWxBbmNob3JQb2ludCA9ICJ0b3AiOwpgOwoKY3JlYXRlKG1vZE1lbnVCb3QpOycAycqkxwy/RAZvbkRyb3ACBADJyqTHDMVL6QJAaWYgKHRoYXQuZHJhZ0JvdCAhPSB0aGlzQm90IHx8IHRoYXQudG8uYm90LnRhZ3MuYWJGYWN0b3J5KQp7CiAgICByZXR1cm47Cn0KCmFwcGx5TW9kKHRoYXQudG8uYm90LCB0YWdzLm1vZHMpOwoKbGV0IHByZXZpb2l1c0RpbWVuc2lvbiA9IHRoYXQuZnJvbS5kaW1lbnNpb247Cgp0YWdzW3RoYXQudG8uZGltZW5zaW9uXSA9IG51bGw7CnRhZ3NbcHJldmlvaXVzRGltZW5zaW9uXSA9IHRydWU7CnRhZ3NbcHJldmlvaXVzRGltZW5zaW9uICsgIlgiXSA9IHRoYXQuZnJvbS54Owp0YWdzW3ByZXZpb2l1c0RpbWVuc2lvbiArICJZIl0gPSB0aGF0LmZyb20ueTsKdGFnc1twcmV2aW9pdXNEaW1lbnNpb24gKyAiWiJdID0gdGhhdC5mcm9tLno7KADJyqTHDL9EDGFiQm90VmVyc2lvbgF9FCcAycqkxwy/RA9hYk1lbnVTb3J0T3JkZXICBADJyqTHDLBOATQnAQRib3RzJGM0NGViYzdmLTNkZjctNGU4ZS05NzgxLTE0ZTJjZThlMzRjOAEnAMnKpMcMsk4LZmFjdG9yeUljb24CBADJyqTHDLNOC2ludmVudG9yeV8yJwDJyqTHDLJOBWNvbG9yAgQAycqkxwy/TgcjOTA4QkZDKADJyqTHDLJODGFiQm90VmVyc2lvbgF9GScAycqkxwyyTgRmb3JtAgQAycqkxwzITgZjaXJjbGUoAMnKpMcMsk4Fc2NhbGUBfQInAMnKpMcMsk4LdG9vbE1hbmFnZXICBADJyqTHDNBOKPCflJcxNGUxZmRhYy1jZmQ3LTRlN2UtYmRkMS05NjdhNDA4NWE3NTUnAMnKpMcMsk4Gc2NhbGVaAgQAycqkxwz3TgMwLjEnAMnKpMcMsk4Gc3lzdGVtAgQAycqkxwz7ThNhYi5mYWN0b3J5LmJvdFN0b3JlJwDJyqTHDLJOBm9uRHJvcAIEAMnKpMcMj09/QGlmICh0aGF0LmRyYWdCb3QgPT0gdGhpc0JvdCB8fCB0aGF0LmRyYWdCb3QudGFncy5zcGFjZSAhPSAic2hhcmVkIikKewogICAgcmV0dXJuOwp9Cgp0aGlzQm90W3RhZ3Muc3RvcmVNb2RlICsgIk9uRHJvcCJdKHRoYXQpOycAycqkxwyyThFib3RTdG9yZVJlamVjdEJvdAIEAMnKpMcMj1CKAkB0aGF0LmRyYWdCb3QudGFnc1t0aGF0LnRvLmRpbWVuc2lvbl0gPSBudWxsOwp0aGF0LmRyYWdCb3QudGFnc1t0aGF0LmZyb20uZGltZW5zaW9uXSA9IHRydWU7CnRoYXQuZHJhZ0JvdC50YWdzW3RoYXQuZnJvbS5kaW1lbnNpb24rIlgiXSA9IHRoYXQuZnJvbS54Owp0aGF0LmRyYWdCb3QudGFnc1t0aGF0LmZyb20uZGltZW5zaW9uKyJZIl0gPSB0aGF0LmZyb20ueTsKdGhhdC5kcmFnQm90LnRhZ3NbdGhhdC5mcm9tLmRpbWVuc2lvbisiWiJdID0gdGhhdC5mcm9tLno7JwDJyqTHDLJOCXN0b3JlTW9kZQIEAMnKpMcMmlIJdW5saW1pdGVkJwDJyqTHDLJOD3VubGltaXRlZE9uRHJvcAIEAMnKpMcMpFJlQGlmICh0YWdzLnRlbXBsYXRlKQp7CiAgICB0aGlzQm90LmJvdFN0b3JlUmVqZWN0Qm90KHRoYXQpOwoKICAgIHJldHVybjsKfQoKdGhpc0JvdC5hZGRUZW1wbGF0ZSh0aGF0KTsnAMnKpMcMsk4NbGltaXRlZE9uRHJvcAIEAMnKpMcMilOJAkBpZiAoKHRhZ3MuYm90U3RvcmVJRCAmJiB0aGF0LmRyYWdCb3QudGFncy5ib3RTdG9yZUlEICE9IHRhZ3MuYm90U3RvcmVJRCkgfHwgdGFncy5tYXhDb3VudCA9PSB0YWdzLmxhYmVsKQp7CiAgICB0aGlzQm90LmJvdFN0b3JlUmVqZWN0Qm90KHRoYXQpOwoKICAgIHJldHVybjsKfQoKdGFncy5sYWJlbCsrOwoKaWYgKHRhZ3MudGVtcGxhdGUpCnsKICAgIGRlc3Ryb3kodGhhdC5kcmFnQm90KTsKfQplbHNlCnsKICAgIHRoaXNCb3QuYWRkVGVtcGxhdGUodGhhdCk7Cn0nAMnKpMcMsk4LYWRkVGVtcGxhdGUCBADJyqTHDJRV4wtAdGFncy50ZW1wbGF0ZSA9IGdldExpbmsodGhhdC5kcmFnQm90KTsKCnRoYXQuZHJhZ0JvdC50YWdzLmxpc3RlbmluZyA9IGZhbHNlOwp0aGF0LmRyYWdCb3QudGFncy5wb2ludGFibGUgPSBmYWxzZTsKdGhhdC5kcmFnQm90LnRhZ3MudHJhbnNmb3JtZXIgPSB0aGlzQm90LmlkOwp0aGF0LmRyYWdCb3QudGFncy5jcmVhdG9yID0gdGhpc0JvdC5pZDsKdGhhdC5kcmFnQm90LnRhZ3MudHJhbnNmb3JtZXIgPSB0aGlzQm90LmlkOwp0aGF0LmRyYWdCb3QudGFnc1t0aGF0LnRvLmRpbWVuc2lvbiArICJYIl0gPSAwOwp0aGF0LmRyYWdCb3QudGFnc1t0aGF0LnRvLmRpbWVuc2lvbiArICJZIl0gPSAwOwp0aGF0LmRyYWdCb3QudGFnc1t0aGF0LnRvLmRpbWVuc2lvbiArICJaIl0gPSA1Owp0aGF0LmRyYWdCb3QudGFncy5zY2FsZSA9IHRoYXQuZHJhZ0JvdC50YWdzLnNjYWxlID8gdGhhdC5kcmFnQm90LnRhZ3Muc2NhbGUgLyAyIDogMC41Owp0aGF0LmRyYWdCb3QudGFncy5zY2FsZVggPSB0aGF0LmRyYWdCb3QudGFncy5zY2FsZVggPyB0aGF0LmRyYWdCb3QudGFncy5zY2FsZVggLyAyIDogMTsKdGhhdC5kcmFnQm90LnRhZ3Muc2NhbGVZID0gdGhhdC5kcmFnQm90LnRhZ3Muc2NhbGVZID8gdGhhdC5kcmFnQm90LnRhZ3Muc2NhbGVZIC8gMiA6IDE7CnRoYXQuZHJhZ0JvdC50YWdzLnNjYWxlWiA9IHRoYXQuZHJhZ0JvdC50YWdzLnNjYWxlWiA/IHRoYXQuZHJhZ0JvdC50YWdzLnNjYWxlWiAqIDEwIDogMTA7CgppZiAodGFncy5zdG9yZU1vZGUgPT0gImxpbWl0ZWQiKQp7CiAgICBsZXQgbmV3U3RvcmVJRCA9IHV1aWQoKTsKCiAgICB0YWdzLmJvdFN0b3JlSUQgPSBuZXdTdG9yZUlEOwoKICAgIHRoYXQuZHJhZ0JvdC50YWdzLmJvdFN0b3JlSUQgPSBuZXdTdG9yZUlEOwp9CgpsZXQgaGl0Qm94ID0ge307CgpoaXRCb3gudHJhbnNmb3JtZXIgPSB0aGlzQm90LmlkOwpoaXRCb3guY29sb3IgPSAiY2xlYXIiOwpoaXRCb3guZHJhZ2dhYmxlID0gZmFsc2U7CmhpdEJveC5tYW5hZ2VyID0gZ2V0TGluayh0aGlzQm90KTsKaGl0Qm94Lm9uRHJhZyA9IGBAIGxpbmtzLm1hbmFnZXIudGVtcGxhdGVEcmFnKHRoYXQpO2A7CmhpdEJveC5zY2FsZSA9IGxpbmtzLnRlbXBsYXRlLnRhZ3Muc2NhbGU7CmhpdEJveC5zY2FsZVggPSBsaW5rcy50ZW1wbGF0ZS50YWdzLnNjYWxlWDsKaGl0Qm94LnNjYWxlWSA9IGxpbmtzLnRlbXBsYXRlLnRhZ3Muc2NhbGVZOwpoaXRCb3guc2NhbGVaID0gbGlua3MudGVtcGxhdGUudGFncy5zY2FsZVo7CmhpdEJveFt0aGF0LnRvLmRpbWVuc2lvbl0gPSB0cnVlOwpoaXRCb3hbdGhhdC50by5kaW1lbnNpb24gKyAiWCJdID0gMDsKaGl0Qm94W3RoYXQudG8uZGltZW5zaW9uICsgIlkiXSA9IDA7CmhpdEJveFt0aGF0LnRvLmRpbWVuc2lvbiArICJaIl0gPSA1OwoKbGV0IG5ld0hpdGJveCA9IGNyZWF0ZShoaXRCb3gpOwoKbGlua3MuaGl0Qm94ID0gZ2V0TGluayhuZXdIaXRib3gpOwoKdGhpc0JvdC5pbml0aWF0ZUJvdFN0b3JlQW5pbWF0aW9uKCk7JwDJyqTHDLJOB29uQ2xpY2sCBADJyqTHDPhg/ApAc2hvdXQoImJvdFN0b3JlTWVudVJlc2V0Iik7Cgpjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9ICJib3RTdG9yZU1lbnUiOwoKbWFza3Mub25HcmlkQ2xpY2sgPSBgQCBzaG91dCgiYm90U3RvcmVNZW51UmVzZXQiKTtgOwptYXNrcy5ib3RTdG9yZU1lbnVSZXNldCA9IGBAIGNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gbnVsbDsKCmNsZWFyVGFnTWFza3ModGhpc0JvdCk7YDsKCmxldCBtZW51QnV0dG9uID0ge307CgptZW51QnV0dG9uLnNwYWNlID0gInRlbXBMb2NhbCI7Cm1lbnVCdXR0b24uYm90U3RvcmVNZW51ID0gdHJ1ZTsKbWVudUJ1dHRvbi5ib3RTdG9yZU1lbnVSZXNldCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKbWVudUJ1dHRvbi5tZW51SXRlbVN0eWxlID0geyJib3JkZXItcmFkaXVzIjoiOHB4IiwgIm1hcmdpbi10b3AiOiIzcHgifTsKbWVudUJ1dHRvbi5sYWJlbEFsaWdubWVudCA9ICJsZWZ0IjsKbWVudUJ1dHRvbi5jb2xvciA9IHRhZ3MuY29sb3I7Cm1lbnVCdXR0b24ubWFuYWdlciA9IGdldExpbmsodGhpc0JvdCk7Cm1lbnVCdXR0b24ub25DbGljayA9IGBAIHNob3V0KCJib3RTdG9yZU1lbnVSZXNldCIpOwogICAgCmxpbmtzLm1hbmFnZXIuY2hhbmdlU3RvcmVTdGF0ZSgpO2A7CgppZiAodGFncy5zdG9yZU1vZGUgPT0gInVubGltaXRlZCIpCnsKICAgIG1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiaW52ZW50b3J5IjsKICAgIG1lbnVCdXR0b24ubGFiZWwgPSAiY2hhbmdlIHRvIGxpbWl0ZWQiOwoKICAgIGNyZWF0ZShtZW51QnV0dG9uKTsKfQplbHNlCnsKICAgIG1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiZmlsZV9jb3B5IjsKICAgIG1lbnVCdXR0b24ubGFiZWwgPSAiY2hhbmdlIHRvIHVubGltaXRlZCI7CgogICAgY3JlYXRlKG1lbnVCdXR0b24pOwoKICAgIG1lbnVCdXR0b24ubGFiZWwgPSAiICAgICI7CiAgICBtZW51QnV0dG9uLmxhYmVsQWxpZ25tZW50ID0gImNlbnRlciI7CiAgICBtZW51QnV0dG9uLm9uQ2xpY2sgPSBgQCBsaW5rcy5tYW5hZ2VyLnRhZ3MudGVtcGxhdGVMb2NrID0gIWxpbmtzLm1hbmFnZXIudGFncy50ZW1wbGF0ZUxvY2sKICAgIAogICAgaWYgKGxpbmtzLm1hbmFnZXIudGFncy50ZW1wbGF0ZUxvY2spCiAgICB7CiAgICAgICAgdGFncy5mb3JtQWRkcmVzcyA9ICJsb2NrIjsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICB0YWdzLmZvcm1BZGRyZXNzID0gImxvY2tfb3BlbiI7CiAgICB9YDsKCiAgICBpZiAodGFncy50ZW1wbGF0ZUxvY2spCiAgICB7CiAgICAgICAgbWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJsb2NrIjsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBtZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImxvY2tfb3BlbiI7CiAgICB9CgogICAgY3JlYXRlKG1lbnVCdXR0b24pOwp9CgonAMnKpMcMsk4MdGVtcGxhdGVEcmFnAgQAycqkxwz1a4EHQGlmICh0YWdzLnN0b3JlTW9kZSA9PSAibGltaXRlZCIpCnsKICAgIGlmICh0YWdzLmxhYmVsID09IDApCiAgICB7CiAgICAgICAgcmV0dXJuOwogICAgfQp9CgpsZXQgbmV3Qm90ID0gZ2V0TW9kKGxpbmtzLnRlbXBsYXRlKTsKCm5ld0JvdFt0aGF0LmZyb20uZGltZW5zaW9uXSA9IHRydWU7Cm5ld0JvdFt0aGF0LmZyb20uZGltZW5zaW9uICsgIlgiXSA9IHRhZ3NbdGhhdC5mcm9tLmRpbWVuc2lvbiArICJYIl07Cm5ld0JvdFt0aGF0LmZyb20uZGltZW5zaW9uICsgIlkiXSA9IHRhZ3NbdGhhdC5mcm9tLmRpbWVuc2lvbiArICJZIl07Cm5ld0JvdFt0aGF0LmZyb20uZGltZW5zaW9uICsgIloiXSA9IDA7Cm5ld0JvdC5saXN0ZW5pbmcgPSBudWxsOwpuZXdCb3QucG9pbnRhYmxlID0gbnVsbDsKbmV3Qm90LnRyYW5zZm9ybWVyID0gbnVsbDsKbmV3Qm90LmNyZWF0b3IgPSBudWxsOwpuZXdCb3QudHJhbnNmb3JtZXIgPSBudWxsOwpuZXdCb3Quc2NhbGUgPSBuZXdCb3Quc2NhbGUgPT0gMC41ID8gbnVsbCA6IG5ld0JvdC5zY2FsZSAqIDI7Cm5ld0JvdC5zY2FsZVggPSBuZXdCb3Quc2NhbGVYID09IDEgPyBudWxsIDogbmV3Qm90LnNjYWxlWCAqIDI7Cm5ld0JvdC5zY2FsZVkgPSBuZXdCb3Quc2NhbGVZID09IDEgPyBudWxsIDogbmV3Qm90LnNjYWxlWSAqIDI7Cm5ld0JvdC5zY2FsZVogPSBuZXdCb3Quc2NhbGVaID09IDEwID8gbnVsbCA6IG5ld0JvdC5zY2FsZVogLyAxMDsKbmV3Qm90LmJvdFN0b3JlSUQgPSB0YWdzLmJvdFN0b3JlSUQ7CgpsZXQgY3JlYXRlZEJvdCA9IGNyZWF0ZShuZXdCb3QpOwoKb3MucmVwbGFjZURyYWdCb3QoY3JlYXRlZEJvdCk7CgppZiAodGFncy5zdG9yZU1vZGUgPT0gImxpbWl0ZWQiKQp7CiAgICB0aGlzQm90LnJlZHVjZUxpbWl0ZWRDb3VudCgpOwp9JwDJyqTHDLJOEnJlZHVjZUxpbWl0ZWRDb3VudAIEAMnKpMcM93KNAkB0YWdzLmxhYmVsLS07CgppZiAodGFncy5sYWJlbCA9PSAwICYmICF0YWdzLnRlbXBsYXRlTG9jaykKewogICAgY2xlYXJJbnRlcnZhbCh0YWdzLnN0b3JlSW50ZXJ2YWwpOwoKICAgIGRlc3Ryb3kobGlua3MudGVtcGxhdGUpOwogICAgZGVzdHJveShsaW5rcy5oaXRCb3gpOwoKICAgIHRhZ3MudGVtcGxhdGUgPSBudWxsOwogICAgdGFncy5oaXRCb3ggPSBudWxsOwogICAgdGFncy5ib3RTdG9yZUlEID0gbnVsbDsKICAgIG1hc2tzLnN0b3JlSW50ZXJ2YWwgPSBudWxsOwp9JwDJyqTHDLJOCWFiRmFjdG9yeQIEAMnKpMcMhXUEdHJ1ZScAycqkxwyyTghhYklnbm9yZQIEAMnKpMcMinUEdHJ1ZScAycqkxwyyTglsaXN0ZW5pbmcCBADJyqTHDI91BWZhbHNlJwDJyqTHDLJOEGNoYW5nZVN0b3JlU3RhdGUCBADJyqTHDJV17QRAaWYgKHRhZ3Muc3RvcmVNb2RlID09ICJ1bmxpbWl0ZWQiKQp7CiAgICB0YWdzLnN0b3JlTW9kZSA9ICJsaW1pdGVkIjsKCiAgICBjb25zdCBtYXhDb3VudCA9IGF3YWl0IG9zLnNob3dJbnB1dCgxLCB7CiAgICAgICAgdGl0bGU6ICdjaG9vc2UgbWF4JwogICAgfSk7CgogICAgaWYgKCFtYXhDb3VudCkKICAgIHsKICAgICAgICBtYXhDb3VudCA9IDE7CiAgICB9CgogICAgdGFncy5tYXhDb3VudCA9IG1heENvdW50OwoKICAgIGlmICh0YWdzLnRlbXBsYXRlKQogICAgewogICAgICAgIGxldCBuZXdTdG9yZUlEID0gdXVpZCgpOwoKICAgICAgICB0YWdzLmJvdFN0b3JlSUQgPSBuZXdTdG9yZUlEOwoKICAgICAgICBsaW5rcy50ZW1wbGF0ZS50YWdzLmJvdFN0b3JlSUQgPSBuZXdTdG9yZUlEOwoKICAgICAgICB0YWdzLmxhYmVsID0gMTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICB0YWdzLmxhYmVsID0gMDsKICAgIH0KfQplbHNlCnsKICAgIHRhZ3Muc3RvcmVNb2RlID0gInVubGltaXRlZCI7CgogICAgdGFncy5sYWJlbCA9IG51bGw7CiAgICB0YWdzLm1heENvdW50ID0gbnVsbDsKICAgIHRhZ3MudGVtcGxhdGVMb2NrID0gbnVsbDsKICAgIHRhZ3MuYm90U3RvcmVJRCA9IG51bGw7Cn0nAMnKpMcMsk4ZaW5pdGlhdGVCb3RTdG9yZUFuaW1hdGlvbgIEAMnKpMcMg3qLAUBpZiAoIXRhZ3Muc3RvcmVJbnRlcnZhbCkKewogICAgdGhpc0JvdC5hbmltYXRlQm90U3RvcmUoKTsKCiAgICBtYXNrcy5zdG9yZUludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gdGhpc0JvdC5hbmltYXRlQm90U3RvcmUoKSwgMjAwMCk7Cn0nAMnKpMcMsk4PYW5pbWF0ZUJvdFN0b3JlAgQAycqkxwyPe5oCQGxldCByb3RaID0gY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbCArICJSb3RhdGlvbloiOwpsZXQgdGFyZ2V0Um90YXRpb24gPSAzNjAgKiBNYXRoLlBJLzE4MDsKCmF3YWl0IGFuaW1hdGVUYWcobGlua3MudGVtcGxhdGUsIHJvdFosIHsKICAgIGZyb21WYWx1ZTogMCwKICAgIHRvVmFsdWU6IHRhcmdldFJvdGF0aW9uLAogICAgZWFzaW5nOnsKICAgICAgICBtb2RlOiAiaW5vdXQiLAogICAgICAgIHR5cGU6ICJsaW5lYXIiCiAgICB9LAogICAgZHVyYXRpb246IDIKfSkuY2F0Y2goZSA9PiB7fSk7JwDJyqTHDLJOD29uSW5zdFN0cmVhbWluZwIEAMnKpMcMqn1AQGlmICh0YWdzLnRlbXBsYXRlKQp7CiAgICB0aGlzQm90LmluaXRpYXRlQm90U3RvcmVBbmltYXRpb24oKTsKfScAycqkxwyyTglvbkRlc3Ryb3kCBADJyqTHDOt9I0BjbGVhckludGVydmFsKHRhZ3Muc3RvcmVJbnRlcnZhbCk7JwDJyqTHDLJOD2FiTWVudVNvcnRPcmRlcgIEAMnKpMcMj34BNScBBGJvdHMkZDE0MDIwNGMtNTVjNy00ZWMzLTkzNTQtOTNhZTc2MjZhODM2ASgAycqkxwyRfgZzY2FsZVoBez+EeuFHrhR7KADJyqTHDJF+BXNjYWxlAXs/44UeuFHrhScAycqkxwyRfgVjb2xvcgIEAMnKpMcMlH4EZ3JheScAycqkxwyRfgtzdHJva2VDb2xvcgIEAMnKpMcMmX4HIzVFNTg4MCcAycqkxwyRfglsaW5lQ29sb3ICBADJyqTHDKF+ByM1RTU4ODAoAMnKpMcMkX4IZHVyYXRpb24BfQEnAMnKpMcMkX4KZWFzaW5nVHlwZQIEAMnKpMcMqn4GbGluZWFyJwDJyqTHDJF+CmVhc2luZ01vZGUCBADJyqTHDLF+BWlub3V0JwDJyqTHDJF+CWxpbmVTdHlsZQIEAMnKpMcMt34EbGluZScAycqkxwyRfgZzeXN0ZW0CBADJyqTHDLx+EGFiLmZhY3RvcnkudHJhY2snAMnKpMcMkX4JYWJGYWN0b3J5AgQAycqkxwzNfgR0cnVlJwDJyqTHDJF+CGFiSWdub3JlAgQAycqkxwzSfgR0cnVlJwDJyqTHDJF+C3Rvb2xNYW5hZ2VyAgQAycqkxwzXfijwn5SXMTRlMWZkYWMtY2ZkNy00ZTdlLWJkZDEtOTY3YTQwODVhNzU1JwDJyqTHDJF+C2ZhY3RvcnlJY29uAgQAycqkxwz+fgh0aW1lbGluZSgAycqkxwyRfgxhYkJvdFZlcnNpb24BfRQnAMnKpMcMkX4Ib25DcmVhdGUCBADJyqTHDIh/b0B0YWdzLmNvbG9yID0gImNsZWFyIjsKCmlmICghdGFncy5saW5lVG8pCnsKICAgIHRoaXNCb3QuYWRkVHJhY2tOb2RlKHtkaW1lbnNpb246IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWx9KTsKfScAycqkxwyRfgxhZGRUcmFja05vZGUCBADJyqTHDPh/rwZAY29uc3QgbW9kaWZ5VmFsdWUgPSBjb25maWdCb3QudGFncy5tYXBQb3J0YWwgPyAwLjAwMSA6IDMKCmxldCBib3RNb2QgPSBnZXRNb2QodGhpc0JvdCk7Cgpib3RNb2RbdGhhdC5kaW1lbnNpb24gKyAiWSJdID0gYm90TW9kW3RoYXQuZGltZW5zaW9uICsgIlkiXSAtIG1vZGlmeVZhbHVlOwoKYm90TW9kLmxpbmVUbyA9IHRoaXNCb3QuaWQ7CmJvdE1vZC5jcmVhdG9yID0gdGhpc0JvdC5pZDsKCmxldCBub2RlMiA9IGNyZWF0ZShib3RNb2QpOwoKdGFncy5saW5lVG8gPSBub2RlMi5pZDsKdGFncy5jcmVhdG9yID0gbm9kZTIuaWQ7CgpsZXQgbm9kZTMgPSBjcmVhdGUoYm90TW9kKTsKCmJvdE1vZFt0aGF0LmRpbWVuc2lvbiArICJYIl0gPSBib3RNb2RbdGhhdC5kaW1lbnNpb24gKyAiWCJdICsgbW9kaWZ5VmFsdWU7CgpsZXQgbm9kZTQgPSBjcmVhdGUoYm90TW9kKTsKCm5vZGUzLnRhZ3MubGluZVRvID0gbm9kZTQuaWQ7Cm5vZGUzLnRhZ3MuY3JlYXRvciA9IG5vZGU0LmlkOwpub2RlNC50YWdzLmxpbmVUbyA9IG5vZGUzLmlkOwpub2RlNC50YWdzLmNyZWF0b3IgPSBub2RlMy5pZDsKCmxldCBub2RlNSA9IGNyZWF0ZShib3RNb2QpOwoKYm90TW9kW3RoYXQuZGltZW5zaW9uICsgIlkiXSA9IGJvdE1vZFt0aGF0LmRpbWVuc2lvbiArICJZIl0gLSBtb2RpZnlWYWx1ZTsKCmxldCBub2RlNiA9IGNyZWF0ZShib3RNb2QpOwoKbm9kZTUudGFncy5saW5lVG8gPSBub2RlNi5pZDsKbm9kZTUudGFncy5jcmVhdG9yID0gbm9kZTYuaWQ7Cm5vZGU2LnRhZ3MubGluZVRvID0gbm9kZTUuaWQ7Cm5vZGU2LnRhZ3MuY3JlYXRvciA9IG5vZGU1LmlkOycAycqkxwyRfgthYlRyYWNrTm9kZQIEAMnKpMcMqIYBBHRydWUnAMnKpMcMkX4JbGlzdGVuaW5nAgQAycqkxwythgEFZmFsc2UnAMnKpMcMkX4Gb25Ecm9wAgQAycqkxwyzhgGWBUBpZiAodGhhdC5kcmFnQm90LnRhZ3MuYWJUcmFja05vZGUpCnsKICAgIHRhZ3NbY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbCArICJYIl0gPSBNYXRoLnJvdW5kKHRhZ3NbY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbCArICJYIl0pOwogICAgdGFnc1tjb25maWdCb3QudGFncy5ncmlkUG9ydGFsICsgIlkiXSA9IE1hdGgucm91bmQodGFnc1tjb25maWdCb3QudGFncy5ncmlkUG9ydGFsICsgIlkiXSk7CgogICAgcmV0dXJuOwp9CmVsc2UgaWYgKHRoYXQuZHJhZ0JvdC50YWdzLmZhY3RvcnlJY29uID09ICJoZWxpeCIpCnsKICAgIHRoaXNCb3QuYXBwbHlNb2RUb1RyYWNrTm9kZSh0aGF0KTsKCiAgICB0aGF0LmRyYWdCb3QudGFnc1t0aGF0LmZyb20uZGltZW5zaW9uICsgIlgiXSA9IHRoYXQuZnJvbS54OwogICAgdGhhdC5kcmFnQm90LnRhZ3NbdGhhdC5mcm9tLmRpbWVuc2lvbiArICJZIl0gPSB0aGF0LmZyb20ueTsKCiAgICByZXR1cm47Cn0KCnRoYXQuZHJhZ0JvdC5tYXNrcy5vbkRyYWcgPSAiQCBjbGVhclRpbWVvdXQodGFncy50cmFja1RpbWVvdXQpOyBjbGVhckFuaW1hdGlvbnModGhpc0JvdCk7IjsKCnRoaXNCb3QuYW5pbWF0ZVRyYWNrKHthbmltYXRlZEJvdDogdGhhdC5kcmFnQm90LCB0YXJnZXROb2RlOiBnZXRCb3QoImlkIiwgdGFncy5saW5lVG8pfSk7JwDJyqTHDJF+DGFuaW1hdGVUcmFjawIEAMnKpMcMyosBjw1AbGV0IGN1cnJlbnREaW0gPSBjb25maWdCb3QudGFncy5tYXBQb3J0YWwgPyBjb25maWdCb3QudGFncy5tYXBQb3J0YWwgOiBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwpsZXQgYW5pbWF0ZWRCb3QgPSB0aGF0LmFuaW1hdGVkQm90OwpsZXQgbmV4dE5vZGUgPSB0aGF0LnRhcmdldE5vZGU7CmxldCBvcmlnaW5Ob2RlID0gdGhpc0JvdDsKCmlmIChuZXh0Tm9kZS5pZCA9PSB0aGlzQm90LmlkKQp7CiAgICBsZXQgbm9kZVN0YWNrID0gZ2V0Qm90cyhieU1vZCh7YWJUcmFja05vZGU6IHRydWUsIFtjdXJyZW50RGltXTogdHJ1ZSwgW2N1cnJlbnREaW0gKyAiWCJdOiB0YWdzW2N1cnJlbnREaW0gKyAiWCJdLCBbY3VycmVudERpbSArICJZIl06IHRhZ3NbY3VycmVudERpbSArICJZIl19KSk7CgogICAgaWYgKG5vZGVTdGFjay5sZW5ndGggPj0gMykKICAgIHsKICAgICAgICBvcmlnaW5Ob2RlID0gbm9kZVN0YWNrW21hdGgucmFuZG9tSW50KDAsIG5vZGVTdGFjay5sZW5ndGgpXTsKCiAgICAgICAgbmV4dE5vZGUgPSBnZXRCb3QoImlkIiwgb3JpZ2luTm9kZS50YWdzLmxpbmVUbyk7CiAgICB9CiAgICBlbHNlIGlmIChub2RlU3RhY2subGVuZ3RoID4gMSkKICAgIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVTdGFjay5sZW5ndGg7IGkrKykKICAgICAgICB7CiAgICAgICAgICAgIGlmIChub2RlU3RhY2tbaV0uaWQgIT0gdGhpc0JvdC5pZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgb3JpZ2luTm9kZSA9IG5vZGVTdGFja1tpXTsKCiAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IGdldEJvdCgiaWQiLCBvcmlnaW5Ob2RlLnRhZ3MubGluZVRvKTsKCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBuZXh0Tm9kZSA9IGdldEJvdCgiaWQiLCB0YWdzLmxpbmVUbyk7CiAgICB9Cn0KCmFuaW1hdGVkQm90Lm1hc2tzLnRyYWNrVGltZW91dCA9IHNldFRpbWVvdXQoKCk9PiB3aGlzcGVyKG5leHROb2RlLCAiYW5pbWF0ZVRyYWNrIiwge2FuaW1hdGVkQm90OiBhbmltYXRlZEJvdCwgdGFyZ2V0Tm9kZTogbmV4dE5vZGV9KSwgdGFncy5kdXJhdGlvbiAqIDEwMDApOwoKaWYgKG9yaWdpbk5vZGUudGFncy5tb2RzKQp7CiAgICBhcHBseU1vZChhbmltYXRlZEJvdCwgb3JpZ2luTm9kZS50YWdzLm1vZHMpOwp9Cgphd2FpdCBhbmltYXRlVGFnKGFuaW1hdGVkQm90LCB7CiAgICBmcm9tVmFsdWU6IHsKICAgICAgICBbY3VycmVudERpbSArICJYIl06IG9yaWdpbk5vZGUudGFnc1tjdXJyZW50RGltICsgIlgiXSwKICAgICAgICBbY3VycmVudERpbSArICJZIl06IG9yaWdpbk5vZGUudGFnc1tjdXJyZW50RGltICsgIlkiXQogICAgfSwKICAgIHRvVmFsdWU6IHsKICAgICAgICBbY3VycmVudERpbSArICJYIl06IG5leHROb2RlLnRhZ3NbY3VycmVudERpbSArICJYIl0sCiAgICAgICAgW2N1cnJlbnREaW0gKyAiWSJdOiBuZXh0Tm9kZS50YWdzW2N1cnJlbnREaW0gKyAiWSJdCiAgICB9LAogICAgZHVyYXRpb246IHRhZ3MuZHVyYXRpb24sCiAgICBlYXNpbmc6ewogICAgICAgIHR5cGU6IHRhZ3MuZWFzaW5nVHlwZSwKICAgICAgICBtb2RlOiB0YWdzLmVhc2luZ01vZGUKICAgIH0sCiAgICB0YWdNYXNrU3BhY2U6ICJ0ZW1wTG9jYWwiCn0pLmNhdGNoKGUgPT4ge30pOycAycqkxwyRfgdvbkNsaWNrAgQAycqkxwzamAHNCEBzaG91dCgiYWJUcmFja01lbnVSZXNldCIpOwoKY29uc3QgbWVudVR5cGUgPSB0aGF0Lm1lbnVUeXBlID8gdGhhdC5tZW51VHlwZSA6ICJiYXNlIjsKY29uc3QgbWVudVRhZyA9IHRhZ3NbbWVudVR5cGUgKyAiQUJUcmFja01lbnUiXTsKCmNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gImFiVHJhY2tNZW51IjsKCm1hc2tzLm9uR3JpZENsaWNrID0gYEAgc2hvdXQoImFiVHJhY2tNZW51UmVzZXQiKTtgOwptYXNrcy5hYlRyYWNrTWVudVJlc2V0ID0gYEAgY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSBudWxsOwoKY2xlYXJUYWdNYXNrcyh0aGlzQm90KTtgOwoKbGV0IG1lbnVCdXR0b24gPSB7fTsKCm1lbnVCdXR0b24uc3BhY2UgPSAidGVtcExvY2FsIjsKbWVudUJ1dHRvbi5hYlRyYWNrTWVudSA9IHRydWU7Cm1lbnVCdXR0b24uYWJUcmFja01lbnVSZXNldCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKbWVudUJ1dHRvbi5tZW51SXRlbVN0eWxlID0geyJib3JkZXItcmFkaXVzIjoiOHB4IiwgIm1hcmdpbi10b3AiOiIzcHgifTsKbWVudUJ1dHRvbi5sYWJlbEFsaWdubWVudCA9ICJsZWZ0IjsKbWVudUJ1dHRvbi5sYWJlbENvbG9yID0gIiNmZmZmZmYiOwptZW51QnV0dG9uLmNvbG9yID0gdGFncy5zdHJva2VDb2xvcjsKbWVudUJ1dHRvbi5tYW5hZ2VyID0gZ2V0TGluayh0aGlzQm90KTsKCmZvciAobGV0IGkgPSAwOyBpIDwgdGFnc1ttZW51VHlwZSArICJBQlRyYWNrTWVudSJdLmxlbmd0aDsgaSsrKQp7CiAgICBjcmVhdGUobWVudUJ1dHRvbiwgdGFnc1ttZW51VHlwZSArICJBQlRyYWNrTWVudSJdW2ldKTsKfQoKaWYgKHRhZ3MubW9kcykKewogICAgbWVudUJ1dHRvbi5sYWJlbCA9ICJyZW1vdmUgbW9kIjsKICAgIG1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiaGVsaXgiOwogICAgbWVudUJ1dHRvbi5vbkNsaWNrID0gYEAgbGlua3MubWFuYWdlci50YWdzLm1vZHMgPSBudWxsOwogICAgbGlua3MubWFuYWdlci50YWdzLmNvbG9yID0gImNsZWFyIjsKICAgIGxpbmtzLm1hbmFnZXIudGFncy5mb3JtID0gbnVsbDsKICAgIAogICAgc2hvdXQoJ2FiVHJhY2tNZW51UmVzZXQnKTtgOwoKICAgIGNyZWF0ZShtZW51QnV0dG9uKTsKfScAycqkxwyRfg9iYXNlQUJUcmFja01lbnUCBADJyqTHDKihAdUC8J+nrFt7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnVwZGF0ZVRyYWNrRHVyYXRpb24oKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXZfdGltZXIiLCAibGFiZWwiOiAiZHVyYXRpb24ifSwKeyJvbkNsaWNrIjogIkAgbGlua3MubWFuYWdlci5vbkNsaWNrKHttZW51VHlwZTogJ2Vhc2luZyd9KTsiLCAiZm9ybUFkZHJlc3MiOiAidHJlbmRpbmdfZmxhdCIsICJsYWJlbCI6ICJlYXNpbmcgdHlwZSJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLm9uQ2xpY2soe21lbnVUeXBlOiAnbW9kZSd9KTsiLCAiZm9ybUFkZHJlc3MiOiAidHJlbmRpbmdfdXAiLCAibGFiZWwiOiAiZWFzaW5nIG1vZGUifV0nAMnKpMcMkX4TdXBkYXRlVHJhY2tEdXJhdGlvbgIEAMnKpMcM/KMBogFAc2hvdXQoImFiVHJhY2tNZW51UmVzZXQiKTsKCmxldCBpbnB1dCA9IGF3YWl0IG9zLnNob3dJbnB1dCh0YWdzLmR1cmF0aW9uLCB7CiAgICB0aXRsZTogImR1cmF0aW9uIgp9KTsKCmlmIChpbnB1dCAmJiAhaXNOYU4oaW5wdXQpKQp7CiAgICB0YWdzLmR1cmF0aW9uID0gaW5wdXQ7Cn0nAMnKpMcMkX4RZWFzaW5nQUJUcmFja01lbnUCBADJyqTHDJ+lAe4J8J+nrFt7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnRhZ3MuZWFzaW5nVHlwZSA9IHRhZ3MubGFiZWw7IHNob3V0KCdhYlRyYWNrTWVudVJlc2V0Jyk7IiwgImZvcm1BZGRyZXNzIjogImFycm93X3JpZ2h0IiwgImxhYmVsIjogImxpbmVhciJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnRhZ3MuZWFzaW5nVHlwZSA9IHRhZ3MubGFiZWw7IHNob3V0KCdhYlRyYWNrTWVudVJlc2V0Jyk7IiwgImZvcm1BZGRyZXNzIjogImFycm93X3JpZ2h0IiwgImxhYmVsIjogInF1YWRyYXRpYyJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnRhZ3MuZWFzaW5nVHlwZSA9IHRhZ3MubGFiZWw7IHNob3V0KCdhYlRyYWNrTWVudVJlc2V0Jyk7IiwgImZvcm1BZGRyZXNzIjogImFycm93X3JpZ2h0IiwgImxhYmVsIjogImN1YmljIn0sCnsib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIudGFncy5lYXNpbmdUeXBlID0gdGFncy5sYWJlbDsgc2hvdXQoJ2FiVHJhY2tNZW51UmVzZXQnKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXJyb3dfcmlnaHQiLCAibGFiZWwiOiAicXVhcnRpYyJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnRhZ3MuZWFzaW5nVHlwZSA9IHRhZ3MubGFiZWw7IHNob3V0KCdhYlRyYWNrTWVudVJlc2V0Jyk7IiwgImZvcm1BZGRyZXNzIjogImFycm93X3JpZ2h0IiwgImxhYmVsIjogInF1aW50aWMifSwKeyJvbkNsaWNrIjogIkAgbGlua3MubWFuYWdlci50YWdzLmVhc2luZ1R5cGUgPSB0YWdzLmxhYmVsOyBzaG91dCgnYWJUcmFja01lbnVSZXNldCcpOyIsICJmb3JtQWRkcmVzcyI6ICJhcnJvd19yaWdodCIsICJsYWJlbCI6ICJzaW51c29pZGFsIn0sCnsib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIudGFncy5lYXNpbmdUeXBlID0gdGFncy5sYWJlbDsgc2hvdXQoJ2FiVHJhY2tNZW51UmVzZXQnKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXJyb3dfcmlnaHQiLCAibGFiZWwiOiAiZXhwb25lbnRpYWwifSwKeyJvbkNsaWNrIjogIkAgbGlua3MubWFuYWdlci50YWdzLmVhc2luZ1R5cGUgPSB0YWdzLmxhYmVsOyBzaG91dCgnYWJUcmFja01lbnVSZXNldCcpOyIsICJmb3JtQWRkcmVzcyI6ICJhcnJvd19yaWdodCIsICJsYWJlbCI6ICJjaXJjdWxhciJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnRhZ3MuZWFzaW5nVHlwZSA9IHRhZ3MubGFiZWw7IHNob3V0KCdhYlRyYWNrTWVudVJlc2V0Jyk7IiwgImZvcm1BZGRyZXNzIjogImFycm93X3JpZ2h0IiwgImxhYmVsIjogImVsYXN0aWMifV0nAMnKpMcMkX4PbW9kZUFCVHJhY2tNZW51AgQAycqkxwyMrwGaA/Cfp6xbeyJvbkNsaWNrIjogIkAgbGlua3MubWFuYWdlci50YWdzLmVhc2luZ01vZGUgPSB0YWdzLmxhYmVsOyBzaG91dCgnYWJUcmFja01lbnVSZXNldCcpOyIsICJmb3JtQWRkcmVzcyI6ICJhcnJvd19yaWdodCIsICJsYWJlbCI6ICJpbiJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnRhZ3MuZWFzaW5nTW9kZSA9IHRhZ3MubGFiZWw7IHNob3V0KCdhYlRyYWNrTWVudVJlc2V0Jyk7IiwgImZvcm1BZGRyZXNzIjogImFycm93X3JpZ2h0IiwgImxhYmVsIjogIm91dCJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnRhZ3MuZWFzaW5nTW9kZSA9IHRhZ3MubGFiZWw7IHNob3V0KCdhYlRyYWNrTWVudVJlc2V0Jyk7IiwgImZvcm1BZGRyZXNzIjogImFycm93X3JpZ2h0IiwgImxhYmVsIjogImlub3V0In1dJwDJyqTHDJF+E2FwcGx5TW9kVG9UcmFja05vZGUCBADJyqTHDKWyAfUBQGxldCBib3RNb2QgPSB0aGF0LmRyYWdCb3QudGFncy5tb2RzOwoKdGFncy5tb2RzID0gYm90TW9kOwp0YWdzLmNvbG9yID0gdGFncy5zdHJva2VDb2xvcjsKdGFncy5mb3JtID0gInNwcml0ZSI7CnRhZ3MuZm9ybUFkZHJlc3MgPSAiaHR0cHM6Ly9idWlsZGVyLWx0bS1maWxlcy5zMy5hbWF6b25hd3MuY29tL2I2MzUyZWRiODg1OThhMTk2OWE2NDhmN2RkNmQ0MTgyMzNlZjExNTliZDc4YjczN2NmMjBhM2RhNTQwNWQxYzQucG5nIjsnAMnKpMcMkX4PYWJNZW51U29ydE9yZGVyAgQAycqkxwybtAEBMicBBGJvdHMkZWI3NWY1NWEtMmJiOS00MzcyLWJmOGMtY2NiYWM4NjM5MGZmAScAycqkxwydtAEFY29sb3ICBADJyqTHDJ60AQcjN0I2NEZGJwDJyqTHDJ20AQlkaW1lbnNpb24CBADJyqTHDKa0AQRob21lJwDJyqTHDJ20AQRmb3JtAgQAycqkxwyrtAEDaGV4KADJyqTHDJ20AQVzY2FsZQF9AicAycqkxwydtAEGc2NhbGVaAgQAycqkxwywtAEEMC43NScAycqkxwydtAEHb25DbGljawIEAMnKpMcMtbQBGkB0aGlzQm90Lm9wZW5Qb3J0YWwodGhhdCk7JwDJyqTHDJ20AQ5vblBvaW50ZXJFbnRlcgIEAMnKpMcM0LQBE0BtYXNrcy5zY2FsZSA9IDIuMTsnAMnKpMcMnbQBC29uRHJvcEVudGVyAgQAycqkxwzktAFoQGlmICh0aGF0LmRyYWdCb3QuaWQgIT0gdGhpc0JvdC5pZCkgLy9NQVlCRSBNQUtFIEEgV0FZIEZPUiBBQiBUTyBOT1QgSU5URVJBQ1QKewogICAgdGhpc0JvdC5vbkNsaWNrKCk7Cn0nAMnKpMcMnbQBBnN5c3RlbQIEAMnKpMcMzbUBEWFiLmZhY3RvcnkucG9ydGFsJwDJyqTHDJ20AQ1vblBvaW50ZXJFeGl0AgQAycqkxwzftQEUQG1hc2tzLnNjYWxlID0gbnVsbDsoAMnKpMcMnbQBDGFiQm90VmVyc2lvbgF9DycAycqkxwydtAEJYWJGYWN0b3J5AgQAycqkxwz1tQEEdHJ1ZScAycqkxwydtAEIYWJJZ25vcmUCBADJyqTHDPq1AQR0cnVlJwDJyqTHDJ20AQt0b29sTWFuYWdlcgIEAMnKpMcM/7UBKPCflJcxNGUxZmRhYy1jZmQ3LTRlN2UtYmRkMS05NjdhNDA4NWE3NTUnAMnKpMcMnbQBCWxpc3RlbmluZwIEAMnKpMcMprYBBWZhbHNlJwDJyqTHDJ20AQtmYWN0b3J5SWNvbgIEAMnKpMcMrLYBBXRvcGljJwDJyqTHDJ20AQpvcGVuUG9ydGFsAgQAycqkxwyytgGlMEBjb25zdCBjdXJyZW50RGltID0gY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsID8gY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsIDogY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbDsKY29uc3QgYSA9IE1hdGguUEkgLyA2Owpjb25zdCBoZXhTY2FsZSA9IDU7CmNvbnN0IHBvcnRhbERpbWVuc2lvbiA9IHRhZ3MucG9ydGFsQWRkcmVzczsKCmxldCBoZXggPSB7fTsKbGV0IGhleE51bSA9IDE7CgpoZXguc3BhY2UgPSAidGVtcExvY2FsIjsKaGV4LnBvcnRhbFJlc2V0ID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwpoZXguZm9ybSA9ICJoZXgiOwpoZXguY29sb3IgPSB0YWdzLmNvbG9yOwpoZXgub3JpZ2luID0gdGhpc0JvdC5pZDsKaGV4LnBvcnRhbEhleCA9IHRydWU7CmhleFtjdXJyZW50RGltKyJaIl0gPSAtMTsKaGV4LmFuY2hvclBvaW50ID0gInRvcCI7CmhleC5zY2FsZSA9IDQuNTsKaGV4W2N1cnJlbnREaW1dID0gdHJ1ZTsKaGV4LnBvaW50YWJsZSA9IGZhbHNlOwpoZXguc2NhbGVaID0gMC4wMTsKaGV4LmFuaW1hdGUgPSBgQCBhbmltYXRlVGFnKHRoaXNCb3QsICJzY2FsZSIsIHsKICAgIGZyb21WYWx1ZTogdGFncy5zY2FsZSwKICAgIHRvVmFsdWU6IFt0aGF0XSwKICAgIGVhc2luZzogewogICAgICAgIHR5cGU6ICJxdWFkcmF0aWMiLAogICAgICAgIG1vZGU6ICJvdXQiCiAgICB9LAogICAgZHVyYXRpb246IDAuMwp9KS5jYXRjaChlID0+IHsgfSk7YDsKCmxldCBkaW1lbnNpb25Cb3RzID0gZ2V0Qm90cyhwb3J0YWxEaW1lbnNpb24sIHRydWUpOwpsZXQgcmluZ051bTsKCmlmIChkaW1lbnNpb25Cb3RzLmxlbmd0aCA+IDApCnsKICAgIGxldCB4UGFyYW1ldGVyID0gZGltZW5zaW9uQm90cy5zb3J0KChhLCBiKT0+IE1hdGguYWJzKGIudGFnc1twb3J0YWxEaW1lbnNpb24rIlgiXSkgLSBNYXRoLmFicyhhLnRhZ3NbcG9ydGFsRGltZW5zaW9uKyJYIl0pKVswXS50YWdzW3BvcnRhbERpbWVuc2lvbisiWCJdOwogICAgbGV0IHlQYXJhbWV0ZXIgPSBkaW1lbnNpb25Cb3RzLnNvcnQoKGEsIGIpPT4gTWF0aC5hYnMoYi50YWdzW3BvcnRhbERpbWVuc2lvbisiWSJdKSAtIE1hdGguYWJzKGEudGFnc1twb3J0YWxEaW1lbnNpb24rIlkiXSkpWzBdLnRhZ3NbcG9ydGFsRGltZW5zaW9uKyJZIl07CgoKICAgIGxldCBkaXN0YW5jZSA9IE1hdGguZmxvb3IoTWF0aC5zcXJ0KE1hdGgucG93KE1hdGguZmxvb3IoTWF0aC5hYnMoeFBhcmFtZXRlciAtIDApKSwgMikgKyBNYXRoLnBvdyhNYXRoLmZsb29yKE1hdGguYWJzKHlQYXJhbWV0ZXIgLSAwKSksIDIpKSAvIGhleFNjYWxlKSArIDE7CiAgICByaW5nTnVtID0gNiAqIChkaXN0YW5jZSkqKGRpc3RhbmNlKzEpLzIgKyAxOwoKICAgIGlmIChyaW5nTnVtID4gMzk3KQogICAgewogICAgICAgIHJpbmdOdW0gPSAzOTc7CiAgICB9Cn0KZWxzZQp7CiAgICByaW5nTnVtID0gNzsKfQoKbWFza3Muc2NhbGUgPSAwLjE7Cm1hc2tzLnBvaW50YWJsZSA9IGZhbHNlOwoKbGV0IHByZXZpb3VzSGV4OwoKZm9yIChsZXQgaSA9IDA7IGkgPCByaW5nTnVtOyBpKyspCnsKICAgIGlmIChpICE9IDApCiAgICB7CiAgICAgICAgbGV0IGVtcHR5UG9zID0gYXdhaXQgY2hlY2tIZXhQb3MocHJldmlvdXNIZXgsIGN1cnJlbnREaW0pOwoKICAgICAgICBpZiAoZW1wdHlQb3MgPT0gMCB8fCBlbXB0eVBvcyA9PSAzKQogICAgICAgIHsKICAgICAgICAgICAgdmFyIHggPSBwcmV2aW91c0hleC50YWdzW2N1cnJlbnREaW0rIlgiXTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBmbGlwWCA9IDE7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoZW1wdHlQb3MgPT0gMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGZsaXBZID0gMDsKICAgICAgICAgICAgICAgIHZhciB5ID0gcHJldmlvdXNIZXgudGFnc1tjdXJyZW50RGltKyJZIl0gKyBoZXhTY2FsZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBmbGlwWSA9IC0xOwogICAgICAgICAgICAgICAgdmFyIHkgPSBwcmV2aW91c0hleC50YWdzW2N1cnJlbnREaW0rIlkiXSAtIGhleFNjYWxlLzI7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgdmFyIHggPSBwcmV2aW91c0hleC50YWdzW2N1cnJlbnREaW0rIlgiXSArIChoZXhTY2FsZSAqIDAuODUpOwogICAgICAgICAgICB2YXIgeSA9IHByZXZpb3VzSGV4LnRhZ3NbY3VycmVudERpbSsiWSJdOwoKICAgICAgICAgICAgaWYgKGVtcHR5UG9zID09IDEpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBmbGlwWCA9IDE7CiAgICAgICAgICAgICAgICB2YXIgZmxpcFkgPSAxOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGVtcHR5UG9zID09IDIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBmbGlwWCA9IDE7CiAgICAgICAgICAgICAgICB2YXIgZmxpcFkgPSAtMTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChlbXB0eVBvcyA9PSA0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB4ID0gcHJldmlvdXNIZXgudGFnc1tjdXJyZW50RGltKyJYIl0gLSAoaGV4U2NhbGUgKiAwLjg1KTsKCiAgICAgICAgICAgICAgICB2YXIgZmxpcFggPSAxOwogICAgICAgICAgICAgICAgdmFyIGZsaXBZID0gLTE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoZW1wdHlQb3MgPT0gNSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgeCA9IHByZXZpb3VzSGV4LnRhZ3NbY3VycmVudERpbSsiWCJdIC0gKGhleFNjYWxlICogMC44NSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBmbGlwWCA9IDE7CiAgICAgICAgICAgICAgICB2YXIgZmxpcFkgPSAxOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBoZXhbY3VycmVudERpbSsiWCJdID0geCAqIGZsaXBYOwogICAgICAgIGhleFtjdXJyZW50RGltKyJZIl0gPSB5ICsgZmxpcFkgKiBoZXhTY2FsZS8yOwogICAgfQogICAgZWxzZQogICAgewogICAgICAgIGhleFtjdXJyZW50RGltKyJYIl0gPSB0YWdzW2N1cnJlbnREaW0rIlgiXTsKICAgICAgICBoZXhbY3VycmVudERpbSsiWSJdID0gdGFnc1tjdXJyZW50RGltKyJZIl07CiAgICB9CgogICAgaGV4LmhleE51bSA9IGhleE51bTsKCiAgICBsZXQgbmVhcmJ5UG9ydGFsQm90ID0gZ2V0Qm90KGJ5TW9kKHsvL2JlaW5nIG1pcnJvcmVkIHJpZ2h0IG5vdwogICAgICAgIFtwb3J0YWxEaW1lbnNpb25dOiB0cnVlLAogICAgICAgIFtwb3J0YWxEaW1lbnNpb24rIlgiXTogeCA9PiB4ID4gKGhleFtjdXJyZW50RGltKyJYIl0gLSB0YWdzW2N1cnJlbnREaW0rIlgiXSkgLSBoZXhTY2FsZSAmJiB4IDwgKGhleFtjdXJyZW50RGltKyJYIl0gLSB0YWdzW2N1cnJlbnREaW0rIlgiXSkgKyBoZXhTY2FsZSwKICAgICAgICBbcG9ydGFsRGltZW5zaW9uKyJZIl06IHkgPT4geSA+IChoZXhbY3VycmVudERpbSsiWSJdIC0gdGFnc1tjdXJyZW50RGltKyJZIl0pIC0gaGV4U2NhbGUgJiYgeSA8IChoZXhbY3VycmVudERpbSsiWSJdIC0gdGFnc1tjdXJyZW50RGltKyJZIl0pICsgaGV4U2NhbGUKICAgIH0pKTsKCiAgICBpZiAobmVhcmJ5UG9ydGFsQm90IHx8IGkgPCA3KQogICAgewogICAgICAgIGhleC5vblBvcnRhbENvbXBsZXRlID0gZmFsc2U7CiAgICAgICAgaGV4LmNvbG9yID0gdGFncy5jb2xvcjsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBoZXgub25Qb3J0YWxDb21wbGV0ZSA9IHRydWU7CiAgICAgICAgaGV4LmNvbG9yID0gImNsZWFyIjsKICAgIH0KCiAgICBoZXhOdW0rKzsKCiAgICBwcmV2aW91c0hleCA9IGF3YWl0IGNyZWF0ZShoZXgpOwp9CgpsZXQgbm9uUG9ydGFsSGV4ZXMgPSBnZXRCb3RzKCJvblBvcnRhbENvbXBsZXRlIiwgdHJ1ZSk7CmxldCBwb3J0YWxIZXhlcyA9IGdldEJvdHMoIm9uUG9ydGFsQ29tcGxldGUiLCBmYWxzZSk7Cgpmb3IgKGxldCBuID0gMDsgbiA8IG5vblBvcnRhbEhleGVzLmxlbmd0aDsgbisrKQp7CiAgICBkZXN0cm95KG5vblBvcnRhbEhleGVzW25dKTsKfQoKd2hpc3Blcihwb3J0YWxIZXhlcywgImFuaW1hdGUiLCBoZXhTY2FsZSk7CgptYXNrcy5mb3JtID0gInBvcnRhbCI7Cm1hc2tzLmZvcm1BZGRyZXNzID0gdGFncy5wb3J0YWxBZGRyZXNzOwptYXNrcy5wb3J0YWxIZXhCb3RzID0gZ2V0TGluayhwb3J0YWxIZXhlcyk7Cgp0aGlzQm90LnBvcnRhbE1lbnUoKTsKCmZ1bmN0aW9uIGNoZWNrSGV4UG9zKGhleCwgZGltZW5zaW9uKQp7CiAgICBsZXQgc2NhbGVWYXIgPSBoZXhTY2FsZS8yOwogICAgbGV0IHhQb3MgPSBoZXgudGFnc1tkaW1lbnNpb24rIlgiXTsKICAgIGxldCB5UG9zID0gaGV4LnRhZ3NbZGltZW5zaW9uKyJZIl07CiAgICBsZXQgaGV4TWF0aFZhciA9IE1hdGguUEkgLyA2OwogICAgbGV0IHhTcGFjaW5nUGx1cyA9IHhQb3MgKyBzY2FsZVZhciArICgxICsgTWF0aC5jb3MoaGV4TWF0aFZhcikpOwogICAgbGV0IHhTcGFjaW5nTWludXMgPSB4UG9zIC0gKHNjYWxlVmFyICsgKDEgKyBNYXRoLmNvcyhoZXhNYXRoVmFyKSkpOwogICAgbGV0IHlTcGFjaW5nVG9wID0gTWF0aC5mbG9vcihoZXgudGFncy5zY2FsZSkgKyB5UG9zOwogICAgbGV0IHlTcGFjaW5nVXAgPSB5UG9zICsgc2NhbGVWYXIgKiBNYXRoLnNpbihoZXhNYXRoVmFyKTsKICAgIGxldCB5U3BhY2luZ0Rvd24gPSB5UG9zIC0gc2NhbGVWYXIgKiBNYXRoLnNpbihoZXhNYXRoVmFyKTsKICAgIGxldCB5U3BhY2luZ0JvdHRvbSA9IHlQb3MgLSBNYXRoLmZsb29yKGhleC50YWdzLnNjYWxlKTsKICAgIGxldCB4Q2hlY2sgPSBbeFBvcywgeFNwYWNpbmdQbHVzLCB4U3BhY2luZ1BsdXMsIHhQb3MsIHhTcGFjaW5nTWludXMsIHhTcGFjaW5nTWludXNdOwogICAgbGV0IHlDaGVjayA9IFt5U3BhY2luZ1RvcCwgeVNwYWNpbmdVcCwgeVNwYWNpbmdEb3duLCB5U3BhY2luZ0JvdHRvbSwgeVNwYWNpbmdEb3duLCB5U3BhY2luZ1VwXTsKICAgIGxldCB0b3RhbE5laWdoYm9ycyA9IDA7CiAgICBsZXQgbmVpZ2hib3JBcnJheSA9IFtdCgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspCiAgICB7CiAgICAgICAgbGV0IGhleE5laWdoYm9yID0gZ2V0Qm90KGJ5TW9kKHsKICAgICAgICAgICAgW2RpbWVuc2lvbl06IHRydWUsIAogICAgICAgICAgICBbZGltZW5zaW9uKyJYIl06IHggPT4geCA+IHhDaGVja1tpXSAtIHNjYWxlVmFyICYmIHggPCB4Q2hlY2tbaV0gKyBzY2FsZVZhciwgCiAgICAgICAgICAgIFtkaW1lbnNpb24rIlkiXTogeSA9PiB5ID4geUNoZWNrW2ldIC0gc2NhbGVWYXIgJiYgeSA8IHlDaGVja1tpXSArIHNjYWxlVmFyLAogICAgICAgICAgICBvcmlnaW46IGhleC50YWdzLm9yaWdpbiwKICAgICAgICAgICAgcG9ydGFsSGV4OiB0cnVlCiAgICAgICAgfSkpOwoKICAgICAgICBpZiAoIWhleE5laWdoYm9yKQogICAgICAgIHsKICAgICAgICAgICAgbmVpZ2hib3JBcnJheS5wdXNoKCJlbXB0eSIpOwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBuZWlnaGJvckFycmF5LnB1c2goaGV4TmVpZ2hib3IpOwogICAgICAgICAgICB0b3RhbE5laWdoYm9ycysrOwogICAgICAgIH0KICAgIH0KCiAgICBpZiAodG90YWxOZWlnaGJvcnMgPT0gMCkKICAgIHsKICAgICAgICB2YXIgdGFyZ2V0ID0gMDsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICB2YXIgZW1wdHkgPSBmYWxzZTsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA2OyBqKyspCiAgICAgICAgewogICAgICAgICAgICBsZXQgbmV4dEVtcHR5ID0gbmVpZ2hib3JBcnJheVtqXTsKCiAgICAgICAgICAgIGlmIChuZXh0RW1wdHkgPT0gImVtcHR5IikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZW1wdHkgPSB0cnVlOwoKICAgICAgICAgICAgICAgIGlmIChqID09IDUpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IDU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYobmV4dEVtcHR5ICE9ICJlbXB0eSIgJiYgZW1wdHkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBqLTE7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIHJldHVybiB0YXJnZXQ7Cn0nAMnKpMcMnbQBCXBvaW50YWJsZQIEAMnKpMcM2OYBBHRydWUnAMnKpMcMnbQBC29uR3JpZENsaWNrAgQAycqkxwzd5gGTAUBpZiAodGFncy5mb3JtICE9ICJwb3J0YWwiKQp7CiAgICByZXR1cm47Cn0KCmxldCBwb3J0YWxDbGljayA9IHRoaXNCb3QucG9ydGFsUG9zaXRpb25DaGVjayh0aGF0KTsKCmlmICghcG9ydGFsQ2xpY2spCnsKICAgIHRoaXNCb3QuY2xvc2VQb3J0YWwoKTsKfScAycqkxwydtAELY2xvc2VQb3J0YWwCBADJyqTHDPHnAWpAd2hpc3BlcihsaW5rcy5wb3J0YWxIZXhCb3RzLCAicG9ydGFsUmVzZXQiKTsKCmNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gbnVsbDsKCmNsZWFyVGFnTWFza3ModGhpc0JvdCk7JwDJyqTHDJ20AQpwb3J0YWxNZW51AgQAycqkxwzc6AHiB0BzaG91dCgiYWJQb3J0YWxNZW51UmVzZXQiKTsKCmNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gImFiUG9ydGFsTWVudSI7CgpsZXQgbWVudUJ1dHRvbiA9IHt9OwoKbWVudUJ1dHRvbi5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwptZW51QnV0dG9uLmFiUG9ydGFsTWVudSA9IHRydWU7Cm1lbnVCdXR0b24uYWJQb3J0YWxNZW51UmVzZXQgPSAiQCBkZXN0cm95KHRoaXNCb3QpOyI7Cm1lbnVCdXR0b24uY29sb3IgPSB0YWdzLmNvbG9yOwptZW51QnV0dG9uLm1hbmFnZXIgPSBnZXRMaW5rKHRoaXNCb3QpOwptZW51QnV0dG9uLm1lbnVJdGVtU3R5bGUgPSBg8J+nrCB7ImJvcmRlci1yYWRpdXMiOiAiOXB4IDlweCA5cHggOXB4IiwgIm1hcmdpbi10b3AiOiAiNnB4In1gOwptZW51QnV0dG9uLmxhYmVsQWxpZ25tZW50ID0gImNlbnRlciI7Cm1lbnVCdXR0b24ubGFiZWwgPSB0YWdzLnBvcnRhbEFkZHJlc3M7CgpjcmVhdGUobWVudUJ1dHRvbik7CgptZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImVkaXQiOwptZW51QnV0dG9uLmxhYmVsQWxpZ25tZW50ID0gImxlZnQiOwptZW51QnV0dG9uLmxhYmVsID0gImVkaXQgZGltZW5zaW9uIjsKbWVudUJ1dHRvbi50YXJnZXQgPSB0aGlzQm90LmlkOwptZW51QnV0dG9uLm9uQ2xpY2sgPSBgQCBsaW5rcy5tYW5hZ2VyLnBvcnRhbENoYW5nZURpbWVuc2lvbigpO2A7CgpjcmVhdGUobWVudUJ1dHRvbik7CgptZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImFycm93X2ZvcndhcmQiOwptZW51QnV0dG9uLmxhYmVsQWxpZ25tZW50ID0gImxlZnQiOwptZW51QnV0dG9uLmxhYmVsID0gImdvIHRvIGRpbWVuc2lvbiI7Cm1lbnVCdXR0b24udGFyZ2V0ID0gdGFncy5mb3JtQWRkcmVzczsKbWVudUJ1dHRvbi5vbkNsaWNrID0gYEAgc2hvdXQoImFiUG9ydGFsTWVudVJlc2V0Iik7Cgpjb25maWdCb3QudGFncy5ncmlkUG9ydGFsID0gbGlua3MubWFuYWdlci50YWdzLnBvcnRhbEFkZHJlc3M7YDsKCmNyZWF0ZShtZW51QnV0dG9uKTsnAMnKpMcMnbQBCG9uQ3JlYXRlAgQAycqkxwy98AE+QGlmICghdGFncy5wb3J0YWxBZGRyZXNzKQp7CiAgICB0YWdzLnBvcnRhbEFkZHJlc3MgPSB1dWlkKCk7Cn0nAMnKpMcMnbQBE3BvcnRhbFBvc2l0aW9uQ2hlY2sCBADJyqTHDPzwAaQWQGxldCBjdXJyZW50RGltID0gdGhhdC5kaW1lbnNpb24gPyB0aGF0LmRpbWVuc2lvbiA6IHRoYXQudG8uZGltZW5zaW9uOwpsZXQgcG9zWSA9IHRoYXQucG9zaXRpb24gPyB0aGF0LnBvc2l0aW9uLnkgOiB0aGF0LnRvLnk7CmxldCBwb3NYID0gdGhhdC5wb3NpdGlvbiA/IHRoYXQucG9zaXRpb24ueCA6IHRoYXQudG8ueDsKbGV0IHBvcnRhbEhleEJvdHMgPSBsaW5rcy5wb3J0YWxIZXhCb3RzOwpsZXQgcG9ydGFsRW50cnkgPSBmYWxzZTsKCmZvciAobGV0IGkgPSAwOyBpIDwgcG9ydGFsSGV4Qm90cy5sZW5ndGg7IGkrKykgCnsKICAgIGxldCBjdXJyZW50SGV4ID0gcG9ydGFsSGV4Qm90c1tpXTsKICAgIGxldCBtYXhZID0gY3VycmVudEhleC50YWdzW2N1cnJlbnREaW0gKyAiWSJdICsgY3VycmVudEhleC50YWdzLnNjYWxlIC8gMjsKICAgIGxldCBtaW5ZID0gY3VycmVudEhleC50YWdzW2N1cnJlbnREaW0gKyAiWSJdIC0gY3VycmVudEhleC50YWdzLnNjYWxlIC8gMjsKCiAgICBpZiAocG9zWSA8PSBtYXhZICYmIHBvc1kgPj0gbWluWSkgewoKICAgICAgICAvL1NFVFVQIEEgQ0hFQ0sgRk9SIFdIRU4gWCA9IERFQ0sgWAogICAgICAgIGxldCBtYXhYID0gY3VycmVudEhleC50YWdzW2N1cnJlbnREaW0gKyAiWCJdICsgY3VycmVudEhleC50YWdzLnNjYWxlIC8gMiArIDAuNTsKICAgICAgICBsZXQgbWluWCA9IGN1cnJlbnRIZXgudGFnc1tjdXJyZW50RGltICsgIlgiXSAtIGN1cnJlbnRIZXgudGFncy5zY2FsZSAvIDIgLSAwLjU7CgogICAgICAgIGlmIChwb3NYIDw9IG1heFggJiYgcG9zWCA+PSBtaW5YKSB7CiAgICAgICAgICAgIGlmIChwb3NYIDw9IGN1cnJlbnRIZXgudGFnc1tjdXJyZW50RGltICsgIlgiXSArIDAuMyAmJiBwb3NYID49IGN1cnJlbnRIZXgudGFnc1tjdXJyZW50RGltICsgIlgiXSAtIDAuMykvL25vdCBwZXJmZWN0IHBhcnQgb2YgYWxnCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmIChwb3NZID49IGN1cnJlbnRIZXgudGFnc1tjdXJyZW50RGltICsgIlkiXSAtIGN1cnJlbnRIZXgudGFncy5zY2FsZSAvIDIgJiYgcG9zWSA8PSBjdXJyZW50SGV4LnRhZ3NbY3VycmVudERpbSArICJZIl0gKyBjdXJyZW50SGV4LnRhZ3Muc2NhbGUgLyAyKSAKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBwb3J0YWxFbnRyeSA9IHRydWU7CgogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgbWlkWCA9IGN1cnJlbnRIZXgudGFnc1tjdXJyZW50RGltICsgIlgiXTsKICAgICAgICAgICAgbGV0IG1pZFkgPSBjdXJyZW50SGV4LnRhZ3NbY3VycmVudERpbSArICJZIl07CiAgICAgICAgICAgIGNvbnN0IGEgPSBNYXRoLnBvdyhjdXJyZW50SGV4LnRhZ3Muc2NhbGUgLyAyLCAyKTsKICAgICAgICAgICAgY29uc3QgYiA9IE1hdGgucG93KGEgLyAyLCAyKTsKICAgICAgICAgICAgY29uc3QgbWF4RGlzdGFuY2UgPSBNYXRoLnNxcnQoTWF0aC5hYnMoYSAtIGIpKTsKICAgICAgICAgICAgbGV0IHNsb3BlOwoKICAgICAgICAgICAgaWYgKChwb3NYID4gbWlkWCAmJiBwb3NZID4gbWlkWSkgfHwgKHBvc1ggPCBtaWRYICYmIHBvc1kgPCBtaWRZKSkgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHNsb3BlID0gKG1heFkgLSBtaW5ZKSAvIChtYXhYIC0gbWluWCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAocG9zWCA+IG1pZFgpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgc2xvcGUgPSAobWF4WCAtIG1pblgpIC8gKG1heFkgLSBtaW5ZKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgc2xvcGUgPSAxIC8gKG1heFggLSBtaW5YKSAvIChtYXhZIC0gbWluWSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCBjMSA9IG1heFkgLSAobWF4WCAqIHNsb3BlKTsKICAgICAgICAgICAgbGV0IGMyID0gcG9zWSAtIChwb3NYICogc2xvcGUpOwogICAgICAgICAgICBsZXQgYWN0dWFsRGlzdGFuY2UgPSBNYXRoLmFicyhjMiAtIGMxKSAvIE1hdGguc3FydChNYXRoLnBvdyhzbG9wZSwgMikgKyAxKTsKCiAgICAgICAgICAgIGlmIChhY3R1YWxEaXN0YW5jZSA8PSBtYXhEaXN0YW5jZSkgCiAgICAgICAgICAgIHsgICAKICAgICAgICAgICAgICAgIHBvcnRhbEVudHJ5ID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvL05PVCBTVVJFIE9GIFRISVMgQ09ERVMgTkVFRD8KICAgIC8vIGlmICh0aGF0LnBvcnRhbElEKSAKICAgIC8vIHsKICAgIC8vICAgICBpZiAodGhhdC5wb3J0YWxJRCA9PSBjdXJyZW50SGV4LnRhZ3Mub3JpZ2luKSAKICAgIC8vICAgICB7CiAgICAvLyAgICAgICAgIHBvcnRhbEVudHJ5ID0gdHJ1ZTsKCiAgICAvLyAgICAgICAgIGJyZWFrOwogICAgLy8gICAgIH0KICAgIC8vIH0KfQoKLy8gbGV0IHBvcnRhbEJvdHMgPSBnZXRCb3RzKCJwb3J0YWxIZXhCb3RzIik7Ly9DSEVDSyBUTyBTRUUgSUYgVEhFUkUgQVJFIE9USEVSIE9QRU4gUE9SVEFMIChub3Qgc3VyZSBJIG5lZWQgdGhpcykKCi8vIGZvciAobGV0IGkgPSAwOyBpIDwgcG9ydGFsQm90cy5sZW5ndGg7IGkrKykgCi8vIHsKLy8gICAgIGlmIChwb3J0YWxCb3RzW2ldLmlkICE9IHRoaXNCb3QuaWQpIAovLyAgICAgewovLyAgICAgICAgIHdoaXNwZXIocG9ydGFsQm90c1tpXSwgImNsb3NlUG9ydGFsIik7Ci8vICAgICB9Ci8vIH0KCnJldHVybiBwb3J0YWxFbnRyeTsnAMnKpMcMnbQBDG9uQW55Qm90RHJvcAIEAMnKpMcMoYcC1QRAaWYgKHRoYXQuZHJhZ0JvdC5pZCA9PSB0aGlzQm90LmlkKQp7CiAgICBjbGVhckludGVydmFsKHRhZ3MuaW50ZXJ2YWwpOwoKICAgIG1hc2tzLmludGVydmFsID0gbnVsbDsKCiAgICByZXR1cm47Cn0KCmlmICh0YWdzLmZvcm0gIT0gInBvcnRhbCIpCnsKICAgIHJldHVybjsKfQoKY29uc3QgY3VycmVudERpbSA9IHRoYXQudG8uZGltZW5zaW9uOwpjb25zdCBwb3J0YWxEcm9wID0gYXdhaXQgdGhpc0JvdC5wb3J0YWxQb3NpdGlvbkNoZWNrKHRoYXQpOwoKaWYgKHBvcnRhbERyb3ApIAp7CiAgICBsZXQgbmV3RGltID0gdGFncy5wb3J0YWxBZGRyZXNzOwoKICAgIHRoYXQuZHJhZ0JvdC50YWdzW25ld0RpbV0gPSB0cnVlOwogICAgdGhhdC5kcmFnQm90LnRhZ3NbbmV3RGltICsgIlgiXSA9IHRoYXQuZHJhZ0JvdC50YWdzW2N1cnJlbnREaW0gKyAiWCJdIC0gdGFnc1tjdXJyZW50RGltICsgIlgiXTsKICAgIHRoYXQuZHJhZ0JvdC50YWdzW25ld0RpbSArICJZIl0gPSB0aGF0LmRyYWdCb3QudGFnc1tjdXJyZW50RGltICsgIlkiXSAtIHRhZ3NbY3VycmVudERpbSArICJZIl07CiAgICB0aGF0LmRyYWdCb3QudGFnc1tjdXJyZW50RGltXSA9IG51bGw7Cn0nAMnKpMcMnbQBBm9uRHJhZwIEAMnKpMcM94sCXkBpZiAoIXRhZ3MuaW50ZXJ2YWwpCnsKICAgIG1hc2tzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gdGhpc0JvdC5wb3NpdGlvbkNoZWNrKCksIDEwMCk7Cn0nAMnKpMcMnbQBFXBvcnRhbENoYW5nZURpbWVuc2lvbgIEAMnKpMcM1owCvgFAY29uc3QgbmV3RGltZW5zaW9uID0gYXdhaXQgb3Muc2hvd0lucHV0KHRhZ3MucG9ydGFsQWRkcmVzcywgewogICAgdGl0bGU6ICJlZGl0IGRpbWVuc2lvbiIKfSk7CgppZiAoIW5ld0RpbWVuc2lvbikKewogICAgcmV0dXJuOwp9OwoKdGFncy5wb3J0YWxBZGRyZXNzID0gbmV3RGltZW5zaW9uOwoKdGhpc0JvdC5wb3J0YWxNZW51KCk7JwDJyqTHDJ20AQ1wb3NpdGlvbkNoZWNrAgQAycqkxwyVjgKoDEBsZXQgaGVpZ2h0ID0gZ3JpZFBvcnRhbEJvdC50YWdzLnBpeGVsSGVpZ2h0OwpsZXQgYm90VGhpcmQgPSBoZWlnaHQgLSAoaGVpZ2h0IC8gOCk7CmxldCBwb2ludGVyWSA9IGdyaWRQb3J0YWxCb3QudGFncy5wb2ludGVyUGl4ZWxZOwoKaWYgKHBvaW50ZXJZID4gYm90VGhpcmQpCnsKICAgIGlmIChjb25maWdCb3QudGFncy5taW5pR3JpZFBvcnRhbCAhPSB0YWdzLnBvcnRhbEFkZHJlc3MpCiAgICB7CiAgICAgICAgY29uZmlnQm90LnRhZ3MubWluaUdyaWRQb3J0YWwgPSB0YWdzLnBvcnRhbEFkZHJlc3M7CgogICAgICAgIG1pbmlHcmlkUG9ydGFsQm90LnRhZ3MubWluaVBvcnRhbFdpZHRoID0gMTsKCiAgICAgICAgbWluaUdyaWRQb3J0YWxCb3QudGFncy5wb3J0YWxDb2xvciA9IHRhZ3MuY29sb3I7CiAgICB9Cn0KZWxzZQp7CiAgICBpZiAoY29uZmlnQm90LnRhZ3MubWluaUdyaWRQb3J0YWwgPT0gdGFncy5wb3J0YWxBZGRyZXNzKQogICAgewogICAgICAgIGNvbmZpZ0JvdC50YWdzLm1pbmlHcmlkUG9ydGFsID0gbnVsbDsKICAgICAgICBtaW5pR3JpZFBvcnRhbEJvdC50YWdzLnBvcnRhbENvbG9yID0gbnVsbDsKICAgICAgICBtaW5pR3JpZFBvcnRhbEJvdC50YWdzLm1pbmlQb3J0YWxXaWR0aCA9IG51bGw7CiAgICB9Cn0KCgoKCi8vIGlmICh0aGF0LmJvdC50YWdzLnByaW1pdGl2ZUlEKQovLyB7Ci8vICAgICBpZiAodGhhdC5ib3QudGFncy5wcmltaXRpdmVJRCA9PSAicG9ydGFsIikKLy8gICAgIHsKLy8gICAgICAgICBsZXQgcG9ydGFsQm90ID0gdGhhdC5ib3Q7CgovLyAgICAgICAgIGNsZWFySW50ZXJ2YWwocG9ydGFsQm90Lm1hc2tzLmludGVydmFsKTsKLy8gICAgICAgICBjbGVhclRhZ01hc2tzKHBvcnRhbEJvdCk7CgovLyAgICAgICAgIGlmICh0aGF0LnRvLmRpbWVuc2lvbiAhPSB0aGF0LmZyb20uZGltZW5zaW9uKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgaWYgKHRoYXQudG8uZGltZW5zaW9uID09IHBvcnRhbEJvdC50YWdzLnBvcnRhbEFkZHJlc3MpCi8vICAgICAgICAgICAgIHsKLy8gICAgICAgICAgICAgICAgIGNvbmZpZ0JvdC50YWdzLm1pbmlHcmlkUG9ydGFsID0gcG9ydGFsQm90LnRhZ3MucG9ydGFsQWRkcmVzczsKCi8vICAgICAgICAgICAgICAgICBtaW5pR3JpZFBvcnRhbEJvdC50YWdzLm1pbmlQb3J0YWxXaWR0aCA9IDE7CgovLyAgICAgICAgICAgICAgICAgcG9ydGFsQm90LnRhZ3NbdGhhdC50by5kaW1lbnNpb24gKyAiWCJdID0gMDsKLy8gICAgICAgICAgICAgICAgIHBvcnRhbEJvdC50YWdzW3RoYXQudG8uZGltZW5zaW9uICsgIlkiXSA9IDA7Ci8vICAgICAgICAgICAgIH0KLy8gICAgICAgICAgICAgZWxzZSBpZiAoY29uZmlnQm90LnRhZ3MubWluaUdyaWRQb3J0YWwgPT0gcG9ydGFsQm90LnRhZ3MucG9ydGFsQWRkcmVzcyAmJiB0aGF0LnRvLmRpbWVuc2lvbiAhPSBwb3J0YWxCb3QudGFncy5wb3J0YWxBZGRyZXNzKQovLyAgICAgICAgICAgICB7Ci8vICAgICAgICAgICAgICAgICBjb25maWdCb3QudGFncy5taW5pR3JpZFBvcnRhbCA9IG51bGw7Ci8vICAgICAgICAgICAgIH0KLy8gICAgICAgICB9Ci8vICAgICB9Ci8vIH0nAMnKpMcMnbQBD2FiTWVudVNvcnRPcmRlcgIEAMnKpMcMvpoCATAA"}]}