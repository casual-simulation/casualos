{"version":2,"updates":[{"id":0,"timestamp":1721057834198,"update":"AZQB3b+j0g4AJwEEYm90cyQxNzQxMGQ4My03ZWVlLTRhMWUtYjYzOC02NTQ2Mzc0ZDE3YzMBJwDdv6PSDgAGc3lzdGVtAgQA3b+j0g4BEWFiLmludGVyZmFjZS5zY2FuJwDdv6PSDgAEZm9ybQIEAN2/o9IOEwdub3RoaW5nJwDdv6PSDgALYWJJbnRlcmZhY2UCBADdv6PSDhsEdHJ1ZScA3b+j0g4ACGFiSWdub3JlAgQA3b+j0g4gBHRydWUoAN2/o9IOAAxhYkJvdFZlcnNpb24BfYcBJwDdv6PSDgAPb25RUkNvZGVTY2FubmVkAgQA3b+j0g4mrw1AaWYgKCFidWlsZGVyVmVyc2lvbikKewogICAgcmV0dXJuOwp9CgphYi5sb2coYWJSZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIjogc2Nhbm5lZCAiICsgdGhhdCk7CgppZiAoY29uZmlnQm90LnRhZ3MudXVhYlNjYW4pCnsKICAgIG9zLmNsb3NlUVJDb2RlU2Nhbm5lcigpOwoKICAgIGxpbmtzLnN0b3JlLmFiUHVibGlzaFVVQUIodGhhdCk7Cn0KZWxzZSBpZiAoY29uZmlnQm90LnRhZ3MucHVibGlzaFNjYW4pCnsKICAgIG9zLmNsb3NlUVJDb2RlU2Nhbm5lcigpOwoKICAgIGxpbmtzLnN0b3JlLmFiUVJQdWJsaXNoKHRoYXQpOwp9CmVsc2UgaWYgKGNvbmZpZ0JvdC50YWdzLnByYWN0aWNlUGVybWl0U2NhbikKewogICAgbGV0IHNjYW5uZWRVUkw7CgogICAgY29uZmlnQm90LnRhZ3MucHJhY3RpY2VQZXJtaXRTY2FuID0gbnVsbDsKCiAgICBvcy5jbG9zZVFSQ29kZVNjYW5uZXIoKTsKCiAgICB0cnkKICAgIHsKICAgICAgICBzY2FubmVkVVJMID0gbmV3IFVSTCh0aGF0KTsKICAgIH0KICAgIGNhdGNoIChlKQogICAgewogICAgICAgIG9zLnRvYXN0KCJub3QgYSByZWNvZ25pemVkIHByYWN0aWNlIHBlcm1pdCIpOwoKICAgICAgICBjb25zb2xlLmxvZyhlKTsKCiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIGxldCBwaENoZWNrID0gc2Nhbm5lZFVSTC5zZWFyY2hQYXJhbXMuaGFzKCJwaCIpOwogICAgbGV0IGluc3RDaGVjayA9IHNjYW5uZWRVUkwuc2VhcmNoUGFyYW1zLmhhcygiaW5zdCIpOwogICAgbGV0IGFiQ2hlY2sgPSBzY2FubmVkVVJMLnNlYXJjaFBhcmFtcy5oYXMoImFiIik7CiAgICBsZXQgY3dDaGVjayA9IHNjYW5uZWRVUkwuc2VhcmNoUGFyYW1zLmhhcygiY3ciKTsKCiAgICBpZiAocGhDaGVjayAmJiBpbnN0Q2hlY2sgJiYgYWJDaGVjayAmJiBjd0NoZWNrKQogICAgewogICAgICAgIG9zLmdvVG9VUkwodGhhdCk7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgb3MudG9hc3QoIm5vdCBhIHJlY29nbml6ZWQgcHJhY3RpY2UgcGVybWl0Iik7CiAgICB9CgogICAgc2hvdXQoImFiTWVudVJlZnJlc2giKTsKfQplbHNlIGlmIChjb25maWdCb3QudGFncy5hYlNjYW4pCnsKICAgIHNob3V0KCJhYk1lbnVSZWZyZXNoIik7CgogICAgY29uZmlnQm90LnRhZ3MuYWJTY2FuID0gbnVsbDsKICAgIAogICAgb3MuY2xvc2VRUkNvZGVTY2FubmVyKCk7CgogICAgbGV0IHNjYW5uZWRVUkw7CgogICAgdHJ5IAogICAgewogICAgICAgIHNjYW5uZWRVUkwgPSBuZXcgVVJMKHRoYXQpOwogICAgfQogICAgY2F0Y2ggKGUpIAogICAgewogICAgICAgIGxpbmtzLnNlYXJjaC5hYkxUTVNlYXJjaCh7YWJJRDogdGhhdH0pOwoKICAgICAgICByZXR1cm47CiAgICB9CgogICAgaWYoc2Nhbm5lZFVSTC5zZWFyY2hQYXJhbXMuZ2V0KCJhYiIpID09ICJlZ2dDYXJ0b24iKQogICAgewogICAgICAgIG9zLmdvVG9VUkwodGhhdCk7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgc2Nhbm5lZFVSTC5zZWFyY2hQYXJhbXMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4gewogICAgICAgICAgICBsZXQgbmV3VGFnID0ga2V5OwogICAgICAgICAgICBsZXQgbmV3VmFsdWUgPSB2YWx1ZTsKCiAgICAgICAgICAgIGNvbmZpZ0JvdC50YWdzW25ld1RhZ10gPSBuZXdWYWx1ZTsKICAgICAgICB9KTsKCiAgICAgICAgbGlua3Muc2VhcmNoLmFiTFRNU2VhcmNoKHthYklEOiBjb25maWdCb3QudGFncy5hYn0pOwogICAgfQp9JwDdv6PSDgAFc3RvcmUCBADdv6PSDtYNKPCflJc3NmFmMDQ5MS0zOTE5LTQ5ODQtYWE4Mi0yMmM3NDJmNDI2M2YnAN2/o9IOAAZzZWFyY2gCBADdv6PSDv0NKPCflJdkODM3MTQ0NC05MTU4LTQ0MzYtOGZjNy04NGNjOTFiN2Y1MjUnAN2/o9IOABBhYkNvcmVNZW51QWN0aW9uAgQA3b+j0g6kDjdAb3Mub3BlblFSQ29kZVNjYW5uZXIoKTsKCmNvbmZpZ0JvdC50YWdzLmFiU2NhbiA9IHRydWU7JwDdv6PSDgAPYWJDb3JlTWVudUxhYmVsAgQA3b+j0g7cDgRzY2FuJwDdv6PSDgAOYWJDb3JlTWVudUljb24CBADdv6PSDuEOD3FyX2NvZGVfc2Nhbm5lcicA3b+j0g4AE2FiQ29yZU1lbnVTb3J0T3JkZXICBADdv6PSDvEOATMnAQRib3RzJDRhYWY2OTllLWFiYmYtNDRhOC04NWUxLTY4Y2JiNWRmMGUxZgEnAN2/o9IO8w4Gc3lzdGVtAgQA3b+j0g70DhNhYi5pbnRlcmZhY2UubnVnZ2V0JwDdv6PSDvMOBGZvcm0CBADdv6PSDogPB25vdGhpbmcnAN2/o9IO8w4LYWJJbnRlcmZhY2UCBADdv6PSDpAPBHRydWUnAN2/o9IO8w4IYWJJZ25vcmUCBADdv6PSDpUPBHRydWUoAN2/o9IO8w4MYWJCb3RWZXJzaW9uAX2IAScA3b+j0g7zDgxhYkxvYWROdWdnZXQCBADdv6PSDpsPmAJAbGV0IG51Z2dldE5hbWUgPSB0aGF0Lm51Z2dldE5hbWU7CmxldCBmb3JtYXR0ZWROdWdnZXRBQiA9ICJudWdfIitudWdnZXROYW1lOwpsZXQgbG9hZGVkTnVnZ2V0ID0gYXdhaXQgbGlua3Muc2VhcmNoLm9uTG9va3VwQUJFZ2dzKHthYklEOiBmb3JtYXR0ZWROdWdnZXRBQiwgYWJWZXJzaW9uOiB0aGF0LnZlcnNpb24sIHJldHVyblR5cGU6ICJkYXRhIn0pOwoKbG9hZGVkTnVnZ2V0ID0gbG9hZGVkTnVnZ2V0LnN0YXRlW251Z2dldE5hbWVdLm51Z2dldDsKCnJldHVybiBsb2FkZWROdWdnZXQ7JwDdv6PSDvMOD2FiUHVibGlzaE51Z2dldAIEAN2/o9IOtBHtAkAvL3Nob3V0KCJhYlB1Ymxpc2hOdWdnZXQiLCB7bnVnOiAibnVnTmFtZSIsIGRhdGE6IGRhdGF9KTsgIEFERCBFR0cgSUQgRVZFTlRVQUxMWQpsZXQgdGVzdE51Z2dldCA9IHRoYXQuZGF0YTsKbGV0IGZvcm1hdHRlZE51Z2dldCA9IHtpZDogdGhhdC5udWcsIG51Z2dldDogdGVzdE51Z2dldH07CmxldCB0ZXN0TnVnZ2V0TmFtZSA9IHRoYXQubnVnOwpsZXQgZm9ybWF0dGVkTnVnZ2V0QUIgPSAibnVnXyIrdGVzdE51Z2dldE5hbWU7CgptYXNrcy5udWdnZXRUb1B1Ymxpc2ggPSBmb3JtYXR0ZWROdWdnZXRBQjsKCmxpbmtzLnN0b3JlLmFiUHVibGlzaEFCKHthYjogZm9ybWF0dGVkTnVnZ2V0QUIsIHRhcmdldDogZm9ybWF0dGVkTnVnZ2V0fSk7JwDdv6PSDvMOD2ltcGxlbWVudE51Z2dldAIEAN2/o9IOohSxB0BsZXQgbnVnZ2V0TmFtZSA9IHRoYXQubnVnZ2V0OwpsZXQgbnVnZ2V0VmVyc2lvbkNoZWNrID0gbnVnZ2V0TmFtZS5pbmRleE9mKCIudiIpOwpsZXQgdmVyc2lvbjsKCmlmIChudWdnZXRWZXJzaW9uQ2hlY2sgIT0gLTEpCnsKICAgIG51Z2dldE5hbWUgPSBudWdnZXROYW1lLnN1YnN0cmluZygwLCBudWdnZXRWZXJzaW9uQ2hlY2spOwoKICAgIGxldCB2ZXJzaW9uQ2hlY2sgPSB0aGF0Lm51Z2dldC5zdWJzdHJpbmcobnVnZ2V0VmVyc2lvbkNoZWNrICsgMik7CgogICAgaWYgKGlzTmFOKHZlcnNpb25DaGVjaykpCiAgICB7CiAgICAgICAgY29uc29sZS5sb2codmVyc2lvbkNoZWNrLCAidmVyc2lvbiBpcyBub3QgYSBudW1iZXIiKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICB2ZXJzaW9uID0gTnVtYmVyKHZlcnNpb25DaGVjayk7CiAgICB9Cn0KY29uc29sZS5sb2cobnVnZ2V0TmFtZSwgdmVyc2lvbik7CmxldCBudWdEYXRhID0gYXdhaXQgdGhpc0JvdC5hYkxvYWROdWdnZXQoe251Z2dldE5hbWU6IG51Z2dldE5hbWUsIHZlcnNpb246IHZlcnNpb259KTsKCmlmIChudWdEYXRhID09ICJhYklEIG5vdCBmb3VuZCIpCnsKICAgIG9zLnRvYXN0KCJudWdnZXQgbm90IGZvdW5kIik7Cn0KZWxzZQp7CiAgICBsZXQgdGFyZ2V0Qm90ID0gZ2V0Qm90KCJpZCIsIHRoYXQuYm90KTsKICAgIGxldCB0YXJnZXRUYWcgPSB0YXJnZXRCb3QucmF3W3RoYXQudGFnXS50b1N0cmluZygpOwogICAgbGV0IHRhcmdldE51ZyA9ICJ7IiArIHRoYXQubnVnZ2V0ICsgIn0iOyAKICAgIGxldCBudWdQb3MgPSB0YXJnZXRUYWcuaW5kZXhPZih0YXJnZXROdWcpOwoKICAgIGRlbGV0ZVRhZ1RleHQodGFyZ2V0Qm90LCB0aGF0LnRhZywgbnVnUG9zLCB0YXJnZXROdWcubGVuZ3RoKTsKICAgIGluc2VydFRhZ1RleHQodGFyZ2V0Qm90LCB0aGF0LnRhZywgbnVnUG9zLCBudWdEYXRhKTsKfScA3b+j0g7zDgxudWdnZXRCdXR0b24CBADdv6PSDtQb9QxAbGV0IHRhZ1ZhbHVlID0gdGhhdC50YWdWYWx1ZTsKbGV0IHJlZ2V4ID0gL1xuL2dpOwpsZXQgYnJlYWtDaGVjazsKbGV0IGJyZWFrQXJyYXkgPSBbMF07Ci8vbGV0IGNyZWF0ZWRCdXR0b25zID0gW107Cgp3aGlsZSAoYnJlYWtDaGVjayA9IHJlZ2V4LmV4ZWModGFnVmFsdWUpKQp7CiAgICBicmVha0FycmF5LnB1c2goYnJlYWtDaGVjay5pbmRleCk7Cn0KCmxldCBuZXdOdWdnZXRCdXR0b24gPSB7fTsKCm5ld051Z2dldEJ1dHRvbi5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwpuZXdOdWdnZXRCdXR0b24uZm9ybSA9ICJjb2RlQnV0dG9uIjsKbmV3TnVnZ2V0QnV0dG9uLnRhcmdldEJvdCA9IHRoYXQuYm90LmlkOwpuZXdOdWdnZXRCdXR0b24udGFyZ2V0VGFnID0gdGhhdC50YWc7Cm5ld051Z2dldEJ1dHRvbi5sYWJlbCA9ICJsb2FkIG51Z2dldCI7Cm5ld051Z2dldEJ1dHRvbi5udWdnZXRSZXNldCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKbmV3TnVnZ2V0QnV0dG9uW3RoYXQuYm90LmlkICsgIi4iICsgdGhhdC50YWddID0gdHJ1ZTsKbmV3TnVnZ2V0QnV0dG9uLm51Z2dldE1hbmFnZXIgPSAi8J+UlyIgKyB0aGlzQm90LmlkOwpuZXdOdWdnZXRCdXR0b24ub25DbGljayA9IGBAIGxpbmtzLm51Z2dldE1hbmFnZXIuaW1wbGVtZW50TnVnZ2V0KHtib3Q6IHRhZ3MudGFyZ2V0Qm90LCBudWdnZXQ6IHRhZ3MudGFyZ2V0TnVnZ2V0LCB0YWc6IHRhZ3MudGFyZ2V0VGFnfSk7CgpkZXN0cm95KHRoaXNCb3QpO2A7Cgpmb3IgKGxldCBudWdzID0gMDsgbnVncyA8IHRoYXQubnVnZ2V0Lmxlbmd0aDsgbnVncysrKQp7CiAgICBsZXQgY3VycmVudE51Z2dldCA9IHRoYXQubnVnZ2V0W251Z3NdOwogICAgLy9sZXQgYnV0dG9uQ2hlY2sgPSBjcmVhdGVkQnV0dG9ucy5pbmRleE9mKGN1cnJlbnROdWdnZXQubnVnTmFtZSk7CgogICAgaWYgKCFjdXJyZW50TnVnZ2V0IHx8IGN1cnJlbnROdWdnZXQgPT0gdW5kZWZpbmVkKSAvL3x8IGJ1dHRvbkNoZWNrICE9IC0xCiAgICB7CiAgICAgICAgY29udGludWU7CiAgICB9CgogICAgaWYgKGN1cnJlbnROdWdnZXQubnVnUHVibGlzaCkKICAgIHsKICAgICAgICBuZXdOdWdnZXRCdXR0b24ub25DbGljayA9IGBAIGxpbmtzLm51Z2dldE1hbmFnZXIucGFja2FnZU51Z2dldCh7Ym90OiB0YWdzLnRhcmdldEJvdCwgbnVnZ2V0OiB0YWdzLnRhcmdldE51Z2dldCwgdGFnOiB0YWdzLnRhcmdldFRhZ30pOwoKICAgICAgICBkZXN0cm95KHRoaXNCb3QpO2A7CgogICAgICAgIG5ld051Z2dldEJ1dHRvbi5sYWJlbCA9ICJwdWJsaXNoICIgKyBjdXJyZW50TnVnZ2V0Lm51Z05hbWUgKyAiIG51Z2dldCI7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgbmV3TnVnZ2V0QnV0dG9uLmxhYmVsID0gImxvYWQgIiArIGN1cnJlbnROdWdnZXQubnVnTmFtZSArICIgbnVnZ2V0IjsKICAgIH0KCiAgICBuZXdOdWdnZXRCdXR0b24udGFyZ2V0TnVnZ2V0ID0gY3VycmVudE51Z2dldC5udWdOYW1lOwogICAgbmV3TnVnZ2V0QnV0dG9uW3RoYXQuYm90LmlkICsgIi4iICsgdGhhdC50YWcgKyAiU3RhcnQiXSA9IGN1cnJlbnROdWdnZXQubnVnU3RhcnQ7CgogICAgY3JlYXRlKG5ld051Z2dldEJ1dHRvbik7CgogICAgLy9jcmVhdGVkQnV0dG9ucy5wdXNoKGN1cnJlbnROdWdnZXQubnVnTmFtZSk7Cn0KCnJldHVybjsnAN2/o9IO8w4LbnVnZ2V0UGFyc2UCBADdv6PSDsgopw9AY29uc3Qgb3JpZ2luYWxUYWdWYWx1ZSA9IHRoYXQuZWRpdGVkQm90LnJhd1t0aGF0LmVkaXRlZFRhZ107CmxldCB0YWdWYWx1ZSA9IG9yaWdpbmFsVGFnVmFsdWU7CgppZiAoIXRhZ1ZhbHVlKSAKewogICAgcmV0dXJuOwp9CmVsc2UgaWYgKHR5cGVvZiB0YWdWYWx1ZSAhPT0gInN0cmluZyIpIAp7CiAgICB0YWdWYWx1ZSA9IHRhZ1ZhbHVlLnRvU3RyaW5nKCk7Cn0KCmxldCBpbml0aWFsUG9zc2libGVOdWdQb3MgPSAwOwoKaWYgKGluaXRpYWxQb3NzaWJsZU51Z1BvcyA9PSAtMSkgCnsKICAgIHJldHVybjsKfQplbHNlCnsKICAgIHRhZ1ZhbHVlID0gdGFnVmFsdWUuc3Vic3RyaW5nKGluaXRpYWxQb3NzaWJsZU51Z1Bvcyk7Cn0KCmxldCBwb3NzaWJsZU51Z3MgPSBvcmlnaW5hbFRhZ1ZhbHVlLnJlcGxhY2UoL1tee10vZywgIiIpLmxlbmd0aDsKbGV0IHRvdGFsTnVnQnJlYWtzID0gb3JpZ2luYWxUYWdWYWx1ZS5yZXBsYWNlKC9bXlxuXS9nLCAiIikubGVuZ3RoOwpsZXQgYnJlYWtMZXZlbCA9IDA7CmxldCBudWdzVG9DaGVjayA9IFtdOwoKZm9yIChsZXQgaSA9IDA7IGkgPCBwb3NzaWJsZU51Z3M7IGkrKykKewogICAgbGV0IGluaXRpYWxOdWdQb3MgPSB0YWdWYWx1ZS5pbmRleE9mKCJ7IikgKyAxOwogICAgbGV0IHBvc3NpYmxlTnVnRW5kID0gdGFnVmFsdWUuaW5kZXhPZigifSIpOwogICAgbGV0IHBvc3NpYmxlTnVnID0gdGFnVmFsdWUuc3Vic3RyaW5nKGluaXRpYWxOdWdQb3MsIHBvc3NpYmxlTnVnRW5kKTsKCiAgICBpZiAocG9zc2libGVOdWcuaW5kZXhPZigiICIpID09IC0xICYmIC9cbi9nLnRlc3QocG9zc2libGVOdWcpICE9IHRydWUgJiYgcG9zc2libGVOdWcubGVuZ3RoID4gMCAmJiBwb3NzaWJsZU51Zy5pbmRleE9mKCI6IikgPT0gLTEpCiAgICB7CiAgICAgICAgbGV0IG51Z0JyZWFrcyA9IHRhZ1ZhbHVlLnN1YnN0cmluZygwLCB0YWdWYWx1ZS5pbmRleE9mKCJ7Iitwb3NzaWJsZU51ZysifSIpKS5yZXBsYWNlKC9bXlxuXS9nLCAiIikubGVuZ3RoOwogICAgICAgIGxldCBwdWJsaXNoQ2hlY2sgPSB0YWdWYWx1ZS5zdWJzdHJpbmcoaW5pdGlhbE51Z1BvcyAtIDYsIGluaXRpYWxOdWdQb3MgLSAyKTsKICAgICAgICBsZXQgbnVnUHVibGlzaCA9IG51bGw7CgogICAgICAgIGlmIChwdWJsaXNoQ2hlY2sgPT0gIi5udWciKQogICAgICAgIHsKICAgICAgICAgICAgbnVnUHVibGlzaCA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICBicmVha0xldmVsICs9IG51Z0JyZWFrczsKCiAgICAgICAgbnVnQnJlYWtzID0gdG90YWxOdWdCcmVha3MgLSAodG90YWxOdWdCcmVha3MgLSBicmVha0xldmVsKTsKICAgICAgICAKICAgICAgICAvL0NIRUNLIElGICQgYmVmb3JlIG51Z2dldAogICAgICAgIGlmICh0YWdWYWx1ZS5zdWJzdHJpbmcoaW5pdGlhbE51Z1BvcyAtIDIsIGluaXRpYWxOdWdQb3MgLSAxKSAhPSAiJCIpCiAgICAgICAgewogICAgICAgICAgICBudWdzVG9DaGVjay5wdXNoKHtudWdOYW1lOiBwb3NzaWJsZU51ZywgbnVnU3RhcnQ6IG51Z0JyZWFrcyArIDEsIG51Z1B1Ymxpc2g6IG51Z1B1Ymxpc2h9KTsKICAgICAgICB9CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgbGV0IG51Z0JyZWFrcyA9IHRhZ1ZhbHVlLnN1YnN0cmluZygwLCB0YWdWYWx1ZS5pbmRleE9mKCJ9IikpLnJlcGxhY2UoL1teXG5dL2csICIiKS5sZW5ndGg7CgogICAgICAgIGJyZWFrTGV2ZWwgKz0gbnVnQnJlYWtzOwoKICAgICAgICBudWdCcmVha3MgPSB0b3RhbE51Z0JyZWFrcyAtICh0b3RhbE51Z0JyZWFrcyAtIGJyZWFrTGV2ZWwpOwogICAgfQoKICAgIHRhZ1ZhbHVlID0gdGFnVmFsdWUuc3Vic3RyaW5nKHBvc3NpYmxlTnVnRW5kICsgMSk7Cn0KCnRoaXNCb3QubnVnZ2V0QnV0dG9uKHsgbnVnZ2V0OiBudWdzVG9DaGVjaywgYm90OiB0aGF0LmVkaXRlZEJvdCwgdGFnOiB0aGF0LmVkaXRlZFRhZywgdGFnVmFsdWU6IG9yaWdpbmFsVGFnVmFsdWV9KTsnAN2/o9IO8w4Nb25BQlB1Ymxpc2hlZAIEAN2/o9IO8DfBAUBjb25zb2xlLmxvZyh0aGF0LmFiLCB0YWdzLm51Z2dldFRvUHVibGlzaCkKCmlmICh0aGF0LmFiID09IHRhZ3MubnVnZ2V0VG9QdWJsaXNoKQp7CiAgICBvcy50b2FzdCgibnVnZ2V0IHB1Ymxpc2hlZCIpOwoKICAgIG1hc2tzLm51Z2dldFRvUHVibGlzaCA9IG51bGw7CgogICAgY29uZmlnQm90Lm1hc2tzLmFiVmVyc2lvbiA9IG51bGw7Cn0nAN2/o9IO8w4Qb25BbnlCb3RzQ2hhbmdlZAIEAN2/o9IOsjm3BEBpZiAoY29uZmlnQm90ICYmIHRoYXRbMF0uYm90LmlkICE9IHRoaXNCb3QuaWQpIAp7CiAgICBpZiAoIWNvbmZpZ0JvdC50YWdzLmVkaXRpbmdCb3QpIHJldHVybjsgLy8gSWdub3JlIGlmIHRoZSBjb25maWdCb3QgaXNuJ3QgcmVhZHkgeWV0LgoKICAgIGNvbnN0IGVkaXRlZEJvdElEID0gY29uZmlnQm90LnRhZ3MuZWRpdGluZ0JvdC5yZXBsYWNlKCLwn5SXIiwgIiIpOwoKICAgIGlmICghdGhhdC5maW5kKHggPT4geC5ib3QuaWQgPT0gZWRpdGVkQm90SUQpKSByZXR1cm47IC8vIElmIHRoZSBib3QgY2hhbmdlZCB3YXNuJ3QgYmVpbmcgZWRpdGVkIGJ5IHRoZSB1c2VyIGlnbm9yZSBpdC4KCiAgICBjb25zdCBlZGl0ZWRUYWcgPSBjb25maWdCb3QudGFncy5lZGl0aW5nVGFnOwogICAgY29uc3QgZWRpdGVkQm90ID0gZ2V0Qm90KCJpZCIsIGVkaXRlZEJvdElEKTsKCiAgICBpZiAoZWRpdGVkQm90ICYmIGVkaXRlZFRhZykgCiAgICB7CiAgICAgICAgc2hvdXQoIm51Z2dldFJlc2V0Iik7CgogICAgICAgIHRoaXNCb3QubnVnZ2V0UGFyc2UoeyBlZGl0ZWRCb3QsIGVkaXRlZFRhZyB9KTsKICAgIH0KfScA3b+j0g7zDghvbkNyZWF0ZQIEAN2/o9IO6D1MQHRhZ3MubGlzdGVuaW5nID0gZmFsc2U7CgovL3NldFRhZ01hc2sodGhpc0JvdCwgImxpc3RlbmluZyIsIHRydWUsICJsb2NhbCIpOycA3b+j0g7zDg1wYWNrYWdlTnVnZ2V0AgQA3b+j0g61PvgGQGNvbnN0IHRhcmdldEJvdCA9IGdldEJvdCgiaWQiLCB0aGF0LmJvdCk7CmNvbnN0IHRhZ1RleHQgPSB0YXJnZXRCb3QucmF3W3RoYXQudGFnXTsKCmlmIChjb25maWdCb3QudGFncy5jdXJzb3JTdGFydEluZGV4IHx8IGNvbmZpZ0JvdC50YWdzLmN1cnNvckVuZEluZGV4KQp7CiAgICBsZXQgc3RhcnRQb3MgPSBjb25maWdCb3QudGFncy5jdXJzb3JTdGFydEluZGV4OwogICAgbGV0IGVuZFBvcyA9IGNvbmZpZ0JvdC50YWdzLmN1cnNvckVuZEluZGV4OwoKICAgIGlmIChzdGFydFBvcyA9PSBlbmRQb3MpCiAgICB7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgZWxzZSBpZiAoc3RhcnRQb3MgPiBlbmRQb3MpCiAgICB7CiAgICAgICAgbGV0IG5ld1N0YXJ0UG9zID0gZW5kUG9zOwogICAgICAgIGxldCBuZXdFbmRQb3MgPSBzdGFydFBvczsKCiAgICAgICAgc3RhcnRQb3MgPSBuZXdTdGFydFBvczsKICAgICAgICBlbmRQb3MgPSBuZXdFbmRQb3M7CiAgICB9CgogICAgbGV0IGRhdGEgPSB0YWdUZXh0LnN1YnN0cmluZyhzdGFydFBvcywgZW5kUG9zICsgMSk7CgogICAgc2hvdXQoImFiUHVibGlzaE51Z2dldCIsIHtudWc6IHRoYXQubnVnZ2V0LCBkYXRhOiBkYXRhfSk7CgogICAgb3MudG9hc3QoIm51ZyBpcyBwdWJsaXNoaW5nIiwgMTApOwoKICAgIGxldCB0YXJnZXROdWcgPSAiLm51ZyB7IiArIHRoYXQubnVnZ2V0ICsgIn0iOyAKICAgIGxldCBudWdQb3MgPSB0YXJnZXRCb3QucmF3W3RoYXQudGFnXS5pbmRleE9mKHRhcmdldE51Zyk7CgogICAgZGVsZXRlVGFnVGV4dCh0YXJnZXRCb3QsIHRoYXQudGFnLCBudWdQb3MsIHRhcmdldE51Zy5sZW5ndGgpOwp9CmVsc2UKewogICAgb3MudG9hc3QoImNhbm5vdCByZWFkIG51Z2dldCB0byBiZSBwdWJsaXNoZWQiKQp9JwDdv6PSDvMOCHJlbWVtYmVyAgQA3b+j0g6uRSjwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwDdv6PSDvMOBnNlYXJjaAIEAN2/o9IO1UUo8J+Ul2Q4MzcxNDQ0LTkxNTgtNDQzNi04ZmM3LTg0Y2M5MWI3ZjUyNScA3b+j0g7zDgVzdG9yZQIEAN2/o9IO/EUo8J+Ulzc2YWYwNDkxLTM5MTktNDk4NC1hYTgyLTIyYzc0MmY0MjYzZicA3b+j0g7zDglsaXN0ZW5pbmcCBADdv6PSDqNGBWZhbHNlJwEEYm90cyRiMzBjNmM1ZC1hNGY3LTQyNjYtYmEzOC0zOTNkYzk1ZTFlY2IBJwDdv6PSDqlGBnN5c3RlbQIEAN2/o9IOqkYRYWIuaW50ZXJmYWNlLm1lbnUnAN2/o9IOqUYEZm9ybQIEAN2/o9IOvEYHbm90aGluZycA3b+j0g6pRgtkZXNjcmlwdGlvbgIEAN2/o9IOxEYmVGhpcyBza2lsbCBpcyBkZXNpZ25lZCBmb3IgbWVudSBzdHVmZi4oAN2/o9IOqUYLYWJJbnRlcmZhY2UBeCcA3b+j0g6pRgphYk9wZW5NZW51AgQA3b+j0g7sRtsKQGF3YWl0IG9zLnJlcXVlc3RBdXRoQm90SW5CYWNrZ3JvdW5kKCk7Cgpjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9ICJhYk1lbnUiOwoKbGV0IG1lbnVUeXBlID0gdGhhdCA/ICJhYiIgKyB0aGF0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGhhdC5zbGljZSgxKSArICJNZW51IjogImFiQ29yZU1lbnUiOyAvL3NldCB1cCBhIGNoZWNrIHRvIHNlZSB3aGF0IHR5cGUgb2YgbWVudSBzaG91bGQgYmUgb2NjdXJpbmcgW2NvcmUsIGJvdCwgZ3JpZCwgaW5zdF0KbGV0IG1lbnVTa2lsbHMgPSBnZXRCb3RzKG1lbnVUeXBlICsgIkFjdGlvbiIpOwpsZXQgbWF4T3B0aW9ucyA9IG1lbnVUeXBlID09ICJpbnN0IiA/IDcgOiA1OwpsZXQgYWJNZW51QnV0dG9uID0ge307CgphYk1lbnVCdXR0b24uYWJNZW51ID0gdHJ1ZTsKYWJNZW51QnV0dG9uLnJlbWVtYmVyID0gdGFncy5yZW1lbWJlcjsKYWJNZW51QnV0dG9uLm1hbmlmZXN0YXRpb24gPSB0YWdzLm1hbmlmZXN0YXRpb247CmFiTWVudUJ1dHRvbi5hYk1lbnVSZWZyZXNoID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwphYk1lbnVCdXR0b24ub25DbGljayA9IGBAIGxpbmtzLmJhc2VTa2lsbC4ke21lbnVUeXBlICsgIkFjdGlvbiJ9KCk7YDsKCmZvciAobGV0IGkgPSAwOyBpIDwgbWVudVNraWxscy5sZW5ndGg7IGkrKykvL0FERCBMT0dJQyBGT1IgTU9SRSBPUFRJT05TIFRIQU4gNSA6IG1heE9wdGlvbnMKewogICAgbGV0IGN1cnJlbnRTa2lsbCA9IG1lbnVTa2lsbHNbaV07CgogICAgYWJNZW51QnV0dG9uLmJhc2VTa2lsbCA9ICLwn5SXIiArIGN1cnJlbnRTa2lsbC5pZDsKICAgIGFiTWVudUJ1dHRvbi5sYWJlbCA9IGN1cnJlbnRTa2lsbC50YWdzW21lbnVUeXBlICsgIkxhYmVsIl07CiAgICBhYk1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSBjdXJyZW50U2tpbGwudGFnc1ttZW51VHlwZSArICJJY29uIl07CiAgICBhYk1lbnVCdXR0b24ub25DcmVhdGUgPSBjdXJyZW50U2tpbGwudGFnc1ttZW51VHlwZSArICJPbkdlbmVyYXRlIl07CiAgICBhYk1lbnVCdXR0b24uYWJNZW51U29ydE9yZGVyID0gY3VycmVudFNraWxsLnRhZ3NbbWVudVR5cGUgKyAiU29ydE9yZGVyIl07CiAgICBhYk1lbnVCdXR0b24uY29sb3IgPSBjdXJyZW50U2tpbGwudGFnc1ttZW51VHlwZSArICJDb2xvciJdID8gY3VycmVudFNraWxsLnRhZ3NbbWVudVR5cGUgKyAiQ29sb3IiXSA6IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CgogICAgdGhpc0JvdC5hYkNyZWF0ZU1lbnVCdXR0b24oYWJNZW51QnV0dG9uKTsKfQoKdGhpc0JvdC5tYXNrcy5vbkdyaWRDbGljayA9ICJAIHNob3V0KCdhYk1lbnVSZWZyZXNoJyk7IGxpbmtzLm1hbmlmZXN0YXRpb24uYWJDbGljaygpOyI7JwDdv6PSDqlGEmFiQ3JlYXRlTWVudUJ1dHRvbgIEAN2/o9IOxlG/A0BsZXQgYWRkaXRpb25hbFRhZ3MgPSB0aGF0OwpsZXQgbmV3TWVudUJ1dHRvbiA9IHt9OwoKbmV3TWVudUJ1dHRvbi5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwpuZXdNZW51QnV0dG9uLmNvbG9yID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKbmV3TWVudUJ1dHRvbi5sYWJlbENvbG9yID0gImJsYWNrIjsKbmV3TWVudUJ1dHRvbi5sYWJlbEFsaWdubWVudCA9ICJsZWZ0IjsKbmV3TWVudUJ1dHRvbi5tZW51SXRlbVN0eWxlID0geyAiYm9yZGVyLXJhZGl1cyI6IjhweCIsICJtYXJnaW4tdG9wIjoiM3B4In07Cgpmb3IgKGNvbnN0IHRhZyBpbiBhZGRpdGlvbmFsVGFncykKewogICAgbmV3TWVudUJ1dHRvblt0YWddID0gYWRkaXRpb25hbFRhZ3NbdGFnXTsKfQoKbmV3TWVudUJ1dHRvbiA9IGNyZWF0ZShuZXdNZW51QnV0dG9uKTsKCnJldHVybiBuZXdNZW51QnV0dG9uOycA3b+j0g6pRg1hYk1lbnVSZWZyZXNoAgQA3b+j0g6GVYEBQGlmIChjb25maWdCb3QudGFncy5tZW51UG9ydGFsPy5zdWJzdHJpbmcoMCwyKSA9PSAiYWIiKQp7CiAgICBjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9IG51bGw7CgogICAgbWFza3Mub25HcmlkQ2xpY2sgPSBudWxsOwp9JwDdv6PSDqlGCHJlbWVtYmVyAgQA3b+j0g6IVijwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwDdv6PSDqlGDW1hbmlmZXN0YXRpb24CBADdv6PSDq9WKPCflJdkY2E1ZDk4Ny1jNGQ4LTQ2ZTQtYjYwYy1kYWE3YjJmNGRkYWQnAN2/o9IOqUYRYWJFbnZpcm9ubWVudE1lbnUCBADdv6PSDtZW0AZAc2hvdXQoImFiTWVudVJlZnJlc2giKTsKCmNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gImFiTWVudSI7CgpsZXQgYWJNZW51QnV0dG9uID0ge307CgphYk1lbnVCdXR0b24uYWJNZW51ID0gdHJ1ZTsKYWJNZW51QnV0dG9uLmFiTWVudVJlZnJlc2ggPSAiQCBkZXN0cm95KHRoaXNCb3QpOyI7CmFiTWVudUJ1dHRvbi5tYW5pZmVzdGF0aW9uID0gdGFncy5tYW5pZmVzdGF0aW9uOwphYk1lbnVCdXR0b24ucmVtZW1iZXIgPSB0YWdzLnJlbWVtYmVyOwphYk1lbnVCdXR0b24ubGVhcm4gPSB0YWdzLmxlYXJuOwoKYnV0dG9uTG9vcDoKZm9yIChsZXQgaSA9IDA7IGkgPCB0YWdzLmFiRW52aXJvbm1lbnRBcnJheS5sZW5ndGg7IGkrKykKewogICAgbGV0IGFjdGl2ZUJ1dHRvbiA9IHRhZ3MuYWJFbnZpcm9ubWVudEFycmF5W2ldOwoKICAgIGFiTWVudUJ1dHRvbi5hYk1lbnVTb3J0T3JkZXIgPSBhY3RpdmVCdXR0b24uYWJFbnZpcm9ubWVudE1lbnVTb3J0T3JkZXI7CgogICAgaWYgKGFjdGl2ZUJ1dHRvbi5hYkVudmlyb25tZW50R2F0ZSkKICAgIHsKICAgICAgICBpZiAoIWxpbmtzW2FjdGl2ZUJ1dHRvbi5hYkVudmlyb25tZW50R2F0ZV0pCiAgICAgICAgewogICAgICAgICAgICBjb250aW51ZSBidXR0b25Mb29wOwogICAgICAgIH0KICAgIH0KCiAgICBsZXQgbmV3QnV0dG9uRGF0YSA9IHsuLi5hYk1lbnVCdXR0b24sIC4uLmFjdGl2ZUJ1dHRvbn07CgogICAgdGhpc0JvdC5hYkNyZWF0ZU1lbnVCdXR0b24obmV3QnV0dG9uRGF0YSk7Cn0KCnRoaXNCb3QubWFza3Mub25HcmlkQ2xpY2sgPSAiQCBzaG91dCgnYWJNZW51UmVmcmVzaCcpOyBsaW5rcy5tYW5pZmVzdGF0aW9uLmFiQ2xpY2soKTsiOycA3b+j0g6pRgVsZWFybgIEAN2/o9IOp10o8J+UlzY2NTdiODY1LWU5ODMtNDQwMS05ZmM5LWY1NDE4ZDE4YTdmNycA3b+j0g6pRgNncHQCBADdv6PSDs5dKPCflJdlYzg1YzFkNi05ZjFhLTQwZDQtODJlMS01YmQ2ODAzNDljMjcnAN2/o9IOqUYIYWJJZ25vcmUCBADdv6PSDvVdBHRydWUoAN2/o9IOqUYMYWJCb3RWZXJzaW9uAX2MAScA3b+j0g6pRhFhYkluaXRpYWxCb290TWVudQIEAN2/o9IO+12/CkBjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9ICJhYkluaXRpYWxNZW51IjsKCm1hc2tzLmUgPSAiQCBtYXNrcy5vbkdyaWRDbGljayA9IG51bGw7IjsKbWFza3Mub25HcmlkQ2xpY2sgPSAiQCBtYXNrcy5vbkdyaWRDbGljayA9IG51bGw7IGNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gbnVsbDsiOwoKbGV0IG1lbnVCdXR0b24gPSB7fTsKCm1lbnVCdXR0b24uYWJJbml0aWFsTWVudSA9IHRydWU7Cm1lbnVCdXR0b24uZ3JpZENsaWNrID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwptZW51QnV0dG9uLmFiTWVudVJlZnJlc2ggPSAiQCBkZXN0cm95KHRoaXNCb3QpOyI7Cm1lbnVCdXR0b24ubGVhcm4gPSB0YWdzLmxlYXJuOwptZW51QnV0dG9uLm1hbmlmZXN0YXRpb24gPSB0YWdzLm1hbmlmZXN0YXRpb247Cm1lbnVCdXR0b24uc2VhcmNoID0gdGFncy5zZWFyY2g7Cm1lbnVCdXR0b24uYXNrID0gdGFncy5hc2s7Cm1lbnVCdXR0b24ubGFiZWwgPSAiYnVpbGQiOwptZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImN1YmUiOwptZW51QnV0dG9uLmNvbG9yID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKbWVudUJ1dHRvbi5vbkNsaWNrID0gYEAgc2hvdXQoImFiTWVudVJlZnJlc2giKTsKCmxpbmtzLm1hbmlmZXN0YXRpb24uYWJDbGljaygpO2A7CgovL3RoaXNCb3QuYWJDcmVhdGVNZW51QnV0dG9uKG1lbnVCdXR0b24pOwoKbWVudUJ1dHRvbi5sYWJlbCA9ICJhc2sgIiArIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCdWlsZGVySWRlbnRpdHk7Cm1lbnVCdXR0b24uZm9ybSA9ICJpbnB1dCI7Cm1lbnVCdXR0b24uY29sb3IgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwptZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImN1YmUiOwptZW51QnV0dG9uLm9uU3VibWl0ID0gYEAgc2hvdXQoImFiTWVudVJlZnJlc2giKTsKCiAgICBsaW5rcy5hc2suYWJDb3JlTWVudUFjdGlvbih0aGF0LnRleHQpO2A7Cgp0aGlzQm90LmFiQ3JlYXRlTWVudUJ1dHRvbihtZW51QnV0dG9uKTsKCm1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAicXJfY29kZV9zY2FubmVyIjsKbWVudUJ1dHRvbi5mb3JtID0gbnVsbDsKbWVudUJ1dHRvbi5sYWJlbCA9ICJzY2FuIjsKbWVudUJ1dHRvbi5jb2xvciA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7Cm1lbnVCdXR0b24ub25DbGljayA9IGBAIHNob3V0KCJhYk1lbnVSZWZyZXNoIik7Cgpjb25maWdCb3QudGFncy5wcmFjdGljZVBlcm1pdFNjYW4gPSB0cnVlOwoKb3Mub3BlblFSQ29kZVNjYW5uZXIoKTtgOwoKdGhpc0JvdC5hYkNyZWF0ZU1lbnVCdXR0b24obWVudUJ1dHRvbik7JwDdv6PSDqlGBnNlYXJjaAIEAN2/o9IOu2go8J+Ul2Q4MzcxNDQ0LTkxNTgtNDQzNi04ZmM3LTg0Y2M5MWI3ZjUyNScA3b+j0g6pRgZudWdnZXQCBADdv6PSDuJoKPCflJc0YWFmNjk5ZS1hYmJmLTQ0YTgtODVlMS02OGNiYjVkZjBlMWYnAN2/o9IOqUYFdGVzdHMCBADdv6PSDolpKPCflJdiODNkOTcyYi0wNTM1LTQwNTEtYjU4OS00MWNlZGE4NTM1ZjEnAN2/o9IOqUYPb25Qb3J0YWxDaGFuZ2VkAgQA3b+j0g6waW5AaWYgKHRoYXQucG9ydGFsID09ICJzeXN0ZW1Qb3J0YWwiICYmICF0aGF0LmRpbWVuc2lvbiAmJiAhbGlua3MudGVzdHMpCnsKICAgIGxpbmtzLmxlYXJuLmFiQWRhcHQoImFiVGVzdHMiKTsKfScA3b+j0g6pRgNhc2sCBADdv6PSDp9qKPCflJdlYzg1YzFkNi05ZjFhLTQwZDQtODJlMS01YmQ2ODAzNDljMjcnAN2/o9IOqUYSYWJFbnZpcm9ubWVudEFycmF5AgQA3b+j0g7GasMh8J+nrFt7ImxhYmVsIjogImhpZGUiLCAiZm9ybUFkZHJlc3MiOiAidmlzaWJpbGl0eV9vZmYiLCAib25DbGljayI6ICJAIGRlc3Ryb3kobGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYkJvdCk7IGxpbmtzLm1hbmlmZXN0YXRpb24ubWFza3MuYWJCb3QgPSBudWxsOyIsICJhYkVudmlyb25tZW50TWVudVNvcnRPcmRlciI6IDB9LAp7ImxhYmVsIjogIm9wdGltaXplIG1vZGUiLCAib25DcmVhdGUiOiAiQCBjb25maWdCb3QudGFncy5hYk9wdGltaXplZCA/IHRhZ3MuZm9ybUFkZHJlc3MgPSAnY2hlY2tfYm94JyA6IHRhZ3MuZm9ybUFkZHJlc3MgPSAnY2hlY2tfYm94X291dGxpbmVfYmxhbmsnOyIsICJvbkNsaWNrIjogIkAgY29uZmlnQm90LnRhZ3MuYWJPcHRpbWl6ZWQgPyBjb25maWdCb3QudGFncy5hYk9wdGltaXplZCA9IGZhbHNlIDogY29uZmlnQm90LnRhZ3MuYWJPcHRpbWl6ZWQgPSB0cnVlOyB0aGlzQm90Lm9uQ3JlYXRlKCk7IiwgImFiRW52aXJvbm1lbnRNZW51U29ydE9yZGVyIjogMX0sCnsibGFiZWwiOiAiY29sb3IiLCAiZm9ybUFkZHJlc3MiOiAicGFsZXR0ZSIsICJvbkNsaWNrIjogIkAgb3Muc2hvd0lucHV0Rm9yVGFnKGxpbmtzLnJlbWVtYmVyLCdhYkJhc2VDb2xvcicsIHt0eXBlOiAnY29sb3InLHRpdGxlOiAncGljayBhIGNvbG9yJ30pOyBkZXN0cm95KGxpbmtzLm1hbmlmZXN0YXRpb24ubGlua3MuYWJCb3QpO2xpbmtzLm1hbmlmZXN0YXRpb24ubWFza3MuYWJCb3QgPSBudWxsOyIsICJhYkVudmlyb25tZW50TWVudVNvcnRPcmRlciI6IDJ9LAp7ImxhYmVsIjogInNsZWVwIiwgImZvcm1BZGRyZXNzIjogIm5pZ2h0c19zdGF5IiwgIm9uQ2xpY2siOiAiQGRlc3Ryb3kobGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYkJvdCk7IGxpbmtzLm1hbmlmZXN0YXRpb24ubWFza3MuYWJCb3QgPSBudWxsOyBsaW5rcy5yZW1lbWJlci50YWdzLmFiQXdha2VTdGF0ZSA9IGZhbHNlOyIsICJhYkVudmlyb25tZW50TWVudVNvcnRPcmRlciI6IDN9LAp7ImxhYmVsIjogImNoYXQiLCAiZm9ybUFkZHJlc3MiOiAiY2hhdCIsICJvbkNsaWNrIjogIkAgb3Muc2hvd0NoYXQoKTsiLCAiYWJFbnZpcm9ubWVudE1lbnVTb3J0T3JkZXIiOiA0fSwKeyJsYWJlbCI6ICJudWdnZXRzIiwgIm9uQ3JlYXRlIjogIkAgdGFncy5udWdNYW5hZ2VyID0gZ2V0TGluayhnZXRCb3QoJ3N5c3RlbScsICdhYi5pbnRlcmZhY2UubnVnZ2V0JykpOyBpZiAobGlua3MubnVnTWFuYWdlci50YWdzLmxpc3RlbmluZyl7dGFncy5vbkNsaWNrID0gYEAgc2hvdXQoJ2FiTWVudVJlZnJlc2gnKTsgbGlua3MubWFuaWZlc3RhdGlvbi5hYkNsaWNrKCk7IHNldFRhZ01hc2sobGlua3MubnVnTWFuYWdlciwgJ2xpc3RlbmluZycsIG51bGwpO2A7dGFncy5mb3JtQWRkcmVzcyA9IGBjaGVja19ib3hgO31lbHNleyAgICB0YWdzLm9uQ2xpY2sgPSBgQCBzaG91dCgnYWJNZW51UmVmcmVzaCcpOyBsaW5rcy5tYW5pZmVzdGF0aW9uLmFiQ2xpY2soKTsgc2V0VGFnTWFzayhsaW5rcy5udWdNYW5hZ2VyLCAnbGlzdGVuaW5nJywgdHJ1ZSwgJ2xvY2FsJyk7YDsgICAgdGFncy5mb3JtQWRkcmVzcyA9IGBjaGVja19ib3hfb3V0bGluZV9ibGFua2A7fSIsICJhYkVudmlyb25tZW50TWVudVNvcnRPcmRlciI6IDV9LAp7ImxhYmVsIjogInN5c3RlbVBvcnRhbD10cnVlIiwgImZvcm1BZGRyZXNzIjogInNldHRpbmdzX2FwcGxpY2F0aW9ucyIsICJvbktleURvd24iOiAiQCBtYXNrcy5sYWJlbCA9ICdzeXN0ZW1Qb3J0YWw9dHJ1ZSBpbiBuZXcgdGFiJzsiLCAib25LZXlVcCI6ICJAIG1hc2tzLmxhYmVsID0gbnVsbDsiLCAib25DbGljayI6ICJAIGNvbnN0IHN0YXRlID0gb3MuZ2V0SW5wdXRTdGF0ZSgna2V5Ym9hcmQnLCAnU2hpZnQnKTsgaWYgKHN0YXRlKXtvcy5vcGVuVVJMKGNvbmZpZ0JvdC50YWdzLnBlcm1hbGluayArIGAmc3lzdGVtUG9ydGFsPXRydWVgKTt9ZWxzZXtjb25maWdCb3QudGFncy5zeXN0ZW1Qb3J0YWwgPSB0cnVlO30iLCAiYWJFbnZpcm9ubWVudE1lbnVTb3J0T3JkZXIiOiA2fSwKeyJhYkVudmlyb25tZW50R2F0ZSI6ICJncHQiLCAib25DcmVhdGUiOiAiQCAgaWYgKCFhdXRoQm90KXtkZXN0cm95KHRoaXNCb3QpO31lbHNlIGlmIChhdXRoQm90LnRhZ3Muc3Vic2NyaXB0aW9uVGllciA9PSAnRnJlZVBsYXknIHx8IGF1dGhCb3QudGFncy5zdWJzY3JpcHRpb25UaWVyID09IHVuZGVmaW5lZCl7ZGVzdHJveSh0aGlzQm90KTt9OyB0YWdzLmxhYmVsID0gJ2VkaXQgJyArIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCdWlsZGVySWRlbnRpdHkgKyAnIHByb21wdCc7IHRhZ3MuZ3B0Qm90ID0gZ2V0TGluayhnZXRCb3QoJ3N5c3RlbScsICdhYi5hY3Rpb24uYXNrJykpOyIsICJmb3JtQWRkcmVzcyI6ICJlZGl0X25vdGUiLCAib25DbGljayI6ICJAIGxpbmtzLmdwdEJvdC5lZGl0UHJvbXB0KCk7IiwgImFiRW52aXJvbm1lbnRNZW51U29ydE9yZGVyIjogN30sCnsibGFiZWwiOiAiZ3JpZCBzbmFwIiwgIm9uQ3JlYXRlIjogIkAgdGFncy5mb3JtQWRkcmVzcyA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJHcmlkU25hcFN0YXRlID8gJ2NoZWNrX2JveCcgOiAnY2hlY2tfYm94X291dGxpbmVfYmxhbmsnIiwgIm9uQ2xpY2siOiAiQCBsaW5rcy5yZW1lbWJlci50YWdzLmFiR3JpZFNuYXBTdGF0ZSA9ICFsaW5rcy5yZW1lbWJlci50YWdzLmFiR3JpZFNuYXBTdGF0ZTt0YWdzLmZvcm1BZGRyZXNzID0gbGlua3MucmVtZW1iZXIudGFncy5hYkdyaWRTbmFwU3RhdGUgPyAnY2hlY2tfYm94JyA6ICdjaGVja19ib3hfb3V0bGluZV9ibGFuayc7IiwgImFiRW52aXJvbm1lbnRNZW51U29ydE9yZGVyIjogOH0sCnsibGFiZWwiOiAiYm90IHNuYXAiLCAib25DcmVhdGUiOiAiQCB0YWdzLmZvcm1BZGRyZXNzID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJvdFNuYXBTdGF0ZSA/ICdjaGVja19ib3gnIDogJ2NoZWNrX2JveF9vdXRsaW5lX2JsYW5rJzsiLCAib25DbGljayI6ICJAIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCb3RTbmFwU3RhdGUgPSAhbGlua3MucmVtZW1iZXIudGFncy5hYkJvdFNuYXBTdGF0ZTsgdGFncy5mb3JtQWRkcmVzcyA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCb3RTbmFwU3RhdGUgPyAnY2hlY2tfYm94JyA6ICdjaGVja19ib3hfb3V0bGluZV9ibGFuayc7IiwgImFiRW52aXJvbm1lbnRNZW51U29ydE9yZGVyIjogOX0sCnsiYWJFbnZpcm9ubWVudEdhdGUiOiAidGVzdHMiLCAibGFiZWwiOiAicmVjb3JkIHRlc3QiLCAiZm9ybUFkZHJlc3MiOiAic2NpZW5jZSIsICJvbktleURvd24iOiAiQCAiLCAib25LZXlVcCI6ICJAICIsICJvbkNsaWNrIjogIkAgbGV0IHNoaWZ0Q2hlY2sgPSBvcy5nZXRJbnB1dFN0YXRlKCdrZXlib2FyZCcsICdTaGlmdCcpO2xldCBjdXJyZW50SW5zdCA9IG9zLmdldEN1cnJlbnRJbnN0KCk7c2hvdXQoJ2FiUmVjb3JkVGVzdCcpO3Nob3V0KCdhYk1lbnVSZWZyZXNoJyk7IiwgImFiRW52aXJvbm1lbnRNZW51U29ydE9yZGVyIjogMTB9LAp7ImFiRW52aXJvbm1lbnRHYXRlIjogInRlc3RzIiwgImxhYmVsIjogInJlY29yZCB0cmFjZSIsICJmb3JtQWRkcmVzcyI6ICJ0aW1lbGluZSIsICJvbktleURvd24iOiAiQCAiLCAib25LZXlVcCI6ICJAICIsICJvbkNsaWNrIjogIkAgbGV0IHNoaWZ0Q2hlY2sgPSBvcy5nZXRJbnB1dFN0YXRlKCdrZXlib2FyZCcsICdTaGlmdCcpO2xldCBjdXJyZW50SW5zdCA9IG9zLmdldEN1cnJlbnRJbnN0KCk7c2hvdXQoJ2FiUmVjb3JkVHJhY2UnKTtzaG91dCgnYWJNZW51UmVmcmVzaCcpOyIsICJhYkVudmlyb25tZW50TWVudVNvcnRPcmRlciI6IDExfSwKeyJvbkNyZWF0ZSI6ICJAIHRhZ3MubGFiZWwgPSAncGVybWFuZW50bHkgZGVsZXRlICcgKyBsaW5rcy5yZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgJyB2JyArIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJDb3JlVmVyc2lvbiArICcuJyArIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJDb3JlSXRlcmF0aW9uOyIsICJmb3JtQWRkcmVzcyI6ICJkZWxldGVfZm9yZXZlciIsICJjb2xvciI6ICIjRDkzMDMwIiwgIm9uQ2xpY2siOiAiQCBsZXQgYWxsQm90cyA9IGdldEJvdHMoJ3NwYWNlJywgJ3NoYXJlZCcpO2Rlc3Ryb3kobGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYkJvdCk7Zm9yIChsZXQgaSA9IDA7IGkgPCBhbGxCb3RzLmxlbmd0aDsgaSsrKXtpZiAoYWxsQm90c1tpXS50YWdzLnN5c3RlbSkge2lmIChhbGxCb3RzW2ldLnRhZ3Muc3lzdGVtLmluY2x1ZGVzKCdhYicpKXtkZXN0cm95KGFsbEJvdHNbaV0pO319fSIsICJhYkVudmlyb25tZW50TWVudVNvcnRPcmRlciI6IDEwMH0KXScBBGJvdHMkZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkAScA3b+j0g6IjAEGc3lzdGVtAgQA3b+j0g6JjAEaYWIuaW50ZXJmYWNlLm1hbmlmZXN0YXRpb24nAN2/o9IOiIwBBGZvcm0CBADdv6PSDqSMAQdub3RoaW5nKADdv6PSDoiMAQthYkludGVyZmFjZQF4JwDdv6PSDoiMAQtkZXNjcmlwdGlvbgIEAN2/o9IOrYwBOFRoaXMgc2tpbGwgY29udHJvbHMgdGhlIGFjdHVhbCBib3QgZm9yIHRoZSBhYiBpbnRlcmZhY2UuJwDdv6PSDoiMAQVsZWFybgIEAN2/o9IO5owBKPCflJc2NjU3Yjg2NS1lOTgzLTQ0MDEtOWZjOS1mNTQxOGQxOGE3ZjcnAN2/o9IOiIwBD29uUG9ydGFsQ2hhbmdlZAIEAN2/o9IOjY0B4QVAaWYgKCFsaW5rcy5yZW1lbWJlci50YWdzLmFiQXdha2VTdGF0ZSB8fCB0aGF0LnBvcnRhbCA9PSAidGFnUG9ydGFsIikKewogICAgcmV0dXJuOwp9CgpsZXQgcG9ydGFsQXJyYXkgPSBbIm1pbmlHcmlkUG9ydGFsIiwgImdyaWRQb3J0YWwiLCAibWFwUG9ydGFsIiwgIm1pbmlNYXBQb3J0YWwiLCAibGVmdFdyaXN0UG9ydGFsIiwgInJpZ2h0V3Jpc3RQb3J0YWwiXTsKCmlmIChwb3J0YWxBcnJheS5pbmRleE9mKHRoYXQucG9ydGFsKSAhPSAtMSAmJiB0aGF0LmRpbWVuc2lvbiAmJiAhY29uZmlnQm90LnRhZ3Muc2hlZXRQb3J0YWwpCnsKICAgIHRoaXNCb3QuYWJNYW5pZmVzdEJvdCh7ZGltZW5zaW9uOiB0aGF0LmRpbWVuc2lvbiwgcG9zaXRpb246e3g6MCx5OjB9fSk7Cn0KZWxzZSBpZiAocG9ydGFsQXJyYXkuaW5kZXhPZih0aGF0LnBvcnRhbCkgPT0gLTEgJiYgIXRoYXQuZGltZW5zaW9uICYmIHRoYXQucG9ydGFsICE9ICJtZW51UG9ydGFsIikKewogICAgbGV0IHN1bW1vbkRpbWVuc2lvbiA9IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA/IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA6IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWw7CgogICAgdGhpc0JvdC5hYk1hbmlmZXN0Qm90KHtkaW1lbnNpb246IHN1bW1vbkRpbWVuc2lvbiwgcG9zaXRpb246e3g6MCx5OjB9fSk7Cn0KZWxzZSBpZiAodGhhdC5wb3J0YWwgIT0gIm1lbnVQb3J0YWwiKQp7CiAgICBkZXN0cm95KGxpbmtzLmFiQm90KTsKfScA3b+j0g6IjAEIcmVtZW1iZXICBADdv6PSDu+SASjwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwDdv6PSDoiMAQ1hYk1hbmlmZXN0Qm90AgQA3b+j0g6WkwHkD0BpZiAodGFncy5hYkJvdCkKewogICAgZGVzdHJveShsaW5rcy5hYkJvdCk7Cn0KCmxldCBhYiA9IHt9OwoKYWIuc3BhY2UgPSAidGVtcExvY2FsIjsKYWIuY29sb3IgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZUNvbG9yOwphYi5mb3JtT3BhY2l0eSA9ICIwLjMzIjsKYWIubGFiZWwgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZUxhYmVsOwphYi5sYWJlbFBvc2l0aW9uID0gImZyb250IjsKYWIubGFiZWxDb2xvciA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CmFiLmxhYmVsU2l6ZSA9IDAuNjE7CmFiLm9uQ2xpY2sgPSAiQCBsaW5rcy5tYW5hZ2VyLmFiQ2xpY2soKTsiOwphYi5kaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbjsKYWJbdGhhdC5kaW1lbnNpb25dID0gdHJ1ZTsKYWJbdGhhdC5kaW1lbnNpb24gKyAiWCJdID0gdGhhdC5wb3NpdGlvbi54OwphYlt0aGF0LmRpbWVuc2lvbiArICJZIl0gPSB0aGF0LnBvc2l0aW9uLnk7CmFiLnN0cm9rZUNvbG9yID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKYWIubGluZUNvbG9yID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKYWIubWFuYWdlciA9ICLwn5SXIiArIHRoaXNCb3QuaWQ7CmFiLmFuaW1hdGVCb3QgPSBgQCBpZiAoY29uZmlnQm90LnRhZ3MuYWJPcHRpbWl6ZWQpCnsKICAgIHJldHVybjsKfQoKY29uc3Qgcm90WiA9IHRhZ3MuZGltZW5zaW9uICsgIlJvdGF0aW9uWiI7CmxldCB0YXJnZXRTY2FsZSA9IDAuNjU7CgppZiAodGFncy5zY2FsZSA8PSAwLjY1MSkKewogICAgdGFyZ2V0U2NhbGUgPSAwLjk1Owp9Cgphd2FpdCBhbmltYXRlVGFnKHRoaXNCb3QsCnsKICAgIGZyb21WYWx1ZTogewogICAgICAgIFtyb3RaXTogMCwKICAgICAgICBzY2FsZTogdGFncy5zY2FsZQogICAgfSwKICAgIHRvVmFsdWU6IHsKICAgICAgICBbcm90Wl06IDYuMywKICAgICAgICBzY2FsZTogdGFyZ2V0U2NhbGUKICAgIH0sCiAgICBlYXNpbmc6IHsKICAgICAgICB0eXBlOiAic2ludXNvaWRhbCIsCiAgICAgICAgbW9kZTogImlub3V0IgogICAgfSwKICAgIGR1cmF0aW9uOiAyCn0pLmNhdGNoKGUgPT4ge30pOwpgOwphYi5vbkNyZWF0ZSA9IGBACgp0aGlzQm90LmFuaW1hdGVCb3QoKTsKCm1hc2tzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gdGhpc0JvdC5hbmltYXRlQm90KCksIDIwMDApOwpgOwphYi5vbkRlc3Ryb3kgPSBgQApjbGVhckludGVydmFsKHRhZ3MuaW50ZXJ2YWwpOwoKc2hvdXQoImFiTWVudVJlZnJlc2giKTsKYDsKYWIuZHJhZ2dhYmxlID0gZmFsc2U7CmFiLnNjYWxlID0gMC45OwoKbGV0IGFiTWFuaWZlc3RlZCA9IGF3YWl0IGNyZWF0ZShhYik7CgppZiAobGlua3MucmVtZW1iZXIudGFncy5hYlNlY29uZGFyeUxhYmVsKQp7CiAgICBsZXQgYWJMYWJlbEJvdCA9IHt9OwoKICAgIGFiTGFiZWxCb3Quc3BhY2UgPSAidGVtcExvY2FsIjsKICAgIGFiTGFiZWxCb3RbdGhhdC5kaW1lbnNpb25dID0gdHJ1ZTsKICAgIGFiTGFiZWxCb3RbdGhhdC5kaW1lbnNpb24gKyAiWiJdID0gLTE7CiAgICBhYkxhYmVsQm90LmNyZWF0b3IgPSBhYk1hbmlmZXN0ZWQuaWQ7CiAgICBhYkxhYmVsQm90LnRyYW5zZm9ybWVyID0gYWJNYW5pZmVzdGVkLmlkOwogICAgYWJMYWJlbEJvdC5wb2ludGFibGUgPSBmYWxzZTsKICAgIGFiTGFiZWxCb3QuY29sb3IgPSAiY2xlYXIiOwogICAgYWJMYWJlbEJvdC5sYWJlbCA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJTZWNvbmRhcnlMYWJlbDsKICAgIGFiTGFiZWxCb3QubGFiZWxQb3NpdGlvbiA9ICJsZWZ0IjsKICAgIGFiTGFiZWxCb3QubGFiZWxTaXplID0gMC43OwogICAgYWJMYWJlbEJvdC5sYWJlbENvbG9yID0gYWJNYW5pZmVzdGVkLnRhZ3MubGFiZWxDb2xvcjsKCiAgICBjcmVhdGUoYWJMYWJlbEJvdCk7Cn0KCm1hc2tzLmFiQm90ID0gIvCflJciICsgYWJNYW5pZmVzdGVkLmlkOwoKbGlua3MucmVtZW1iZXIubWFza3MuYWJBY3RpdmVEaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbjsnAN2/o9IOiIwBD2FiTWFuaWZlc3RTdGF0ZQIEAN2/o9IO96IBBkFzbGVlcCcA3b+j0g6IjAEcYWJNYW5pZmVzdFN0YXRlQXNsZWVwT25FbnRlcgIEAN2/o9IO/qIBb0BkZXN0cm95KGxpbmtzLmFiQm90KTsKCm1hc2tzLmFiQm90ID0gbnVsbDsKCnNob3V0KCJhYk1lbnVSZWZyZXNoIik7CgpsaW5rcy5yZW1lbWJlci50YWdzLmFiQXdha2VTdGF0ZSA9IGZhbHNlOycA3b+j0g6IjAELb25HcmlkQ2xpY2sCBADdv6PSDu6jAfYQQGlmICghbGlua3MucmVtZW1iZXIudGFncy5hYkF3YWtlU3RhdGUpCnsKICAgIHJldHVybjsKfQoKc2hvdXQoImFiTWVudVJlZnJlc2giKTsKCmNvbnN0IHNoaWZ0Q2hlY2sgPSBvcy5nZXRJbnB1dFN0YXRlKCJrZXlib2FyZCIsICJTaGlmdCIpOwoKaWYgKHNoaWZ0Q2hlY2sgJiYgdGFncy5hYkJvdCkKewogICAgaWYgKGxpbmtzLmFiQm90LnRhZ3MuYXJtKQogICAgewogICAgICAgIGRlc3Ryb3kobGlua3MuYWJCb3QubGlua3MuYXJtKTsKCiAgICAgICAgbGlua3MuYWJCb3QubWFza3MubGluZVRvID0gbnVsbDsKICAgIH0KICAgIAogICAgbGV0IGFybSA9IHt9OwoKICAgIGFybS5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwogICAgYXJtW3RoYXQuZGltZW5zaW9uXSA9IHRydWU7CiAgICBhcm1bdGhhdC5kaW1lbnNpb24gKyAiWCJdID0gdGhhdC5wb3NpdGlvbi54OwogICAgYXJtW3RoYXQuZGltZW5zaW9uICsgIlkiXSA9IHRoYXQucG9zaXRpb24ueTsKICAgIGFybS5kaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbjsKICAgIGFybS5zY2FsZSA9IDAuOTsKICAgIGFybS5zY2FsZVogPSAwLjAxOwogICAgYXJtLmNvbG9yID0gImNsZWFyIjsKICAgIGFybS5zdHJva2VDb2xvciA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CiAgICBhcm0ubGluZUNvbG9yID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKICAgIGFybS5saW5lVG8gPSBsaW5rcy5hYkJvdC5pZDsKICAgIGFybS5tYW5hZ2VyID0gIvCflJciICsgdGhpc0JvdC5pZDsKICAgIGFybS5vbkNsaWNrID0gYEAgZGVzdHJveSh0aGlzQm90KTsKCiAgICBsaW5rcy5tYW5hZ2VyLmFiTWFuaWZlc3RCb3Qoe2RpbWVuc2lvbjogdGFncy5kaW1lbnNpb24sIHBvc2l0aW9uOnt4OnRhZ3NbdGFncy5kaW1lbnNpb24gKyAiWCJdLHk6dGFnc1t0YWdzLmRpbWVuc2lvbiArICJZIl19fSk7YDsKCiAgICBsZXQgbmV3QXJtID0gYXdhaXQgY3JlYXRlKGFybSk7CgogICAgbGlua3MuYWJCb3QubWFza3MuYXJtID0gIvCflJciICsgbmV3QXJtLmlkOwoKICAgIGxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiR3JpZEZvY3VzID0ge2RpbWVuc2lvbjogdGhhdC5kaW1lbnNpb24sIHBvc2l0aW9uOiB7eDogdGhhdC5wb3NpdGlvbi54LCB5OiB0aGF0LnBvc2l0aW9uLnl9fTsKCiAgICB0aGlzQm90LmFiQ2xpY2soe21lbnU6ICJncmlkIn0pOwoKICAgIHJldHVybjsKfQoKbGV0IGZvb3RwcmludCA9IHt9OwoKZm9vdHByaW50LnNwYWNlID0gInRlbXBMb2NhbCI7CmZvb3RwcmludFt0aGF0LmRpbWVuc2lvbl0gPSB0cnVlOwpmb290cHJpbnQuZGltZW5zaW9uID0gdGhhdC5kaW1lbnNpb247CmZvb3RwcmludFt0aGF0LmRpbWVuc2lvbiArICJYIl0gPSB0aGF0LnBvc2l0aW9uLng7CmZvb3RwcmludFt0aGF0LmRpbWVuc2lvbiArICJZIl0gPSB0aGF0LnBvc2l0aW9uLnk7CmZvb3RwcmludC5zY2FsZVogPSAwLjAxOwpmb290cHJpbnQub25DbGljayA9IGBAIHRhZ3NbdGFncy5kaW1lbnNpb25dID0gZmFsc2U7CgpsaW5rcy5tYW5hZ2VyLmFiTWFuaWZlc3RCb3QodGFncy5wb3NpdGlvbkluZm8pOwpgOwpmb290cHJpbnQucG9zaXRpb25JbmZvID0gdGhhdDsKZm9vdHByaW50LmNvbG9yID0gImNsZWFyIjsKZm9vdHByaW50LnN0cm9rZUNvbG9yID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKZm9vdHByaW50LmRyYWdnYWJsZSA9IGZhbHNlOwpmb290cHJpbnQubWFuYWdlciA9ICLwn5SXIiArIHRoaXNCb3QuaWQ7CmZvb3RwcmludC5vbkNyZWF0ZSA9IGBAIHNldFRpbWVvdXQoKCkgPT4gZGVzdHJveSh0aGlzQm90KSwgODAwKTsKCiAgICBhd2FpdCBhbmltYXRlVGFnKHRoaXNCb3QsIHsKICAgICAgICBmcm9tVmFsdWU6IHsKICAgICAgICAgICAgc2NhbGVYOiAwLjEsCiAgICAgICAgICAgIHNjYWxlWTogMC4xCiAgICAgICAgfSwKICAgICAgICB0b1ZhbHVlOiB7CiAgICAgICAgICAgIHNjYWxlWDogMS4xLAogICAgICAgICAgICBzY2FsZVk6IDEuMQogICAgICAgIH0sCiAgICAgICAgZHVyYXRpb246IDAuNSwKICAgICAgICBlYXNpbmc6IHsKICAgICAgICAgICAgdHlwZTogImVsYXN0aWMiLAogICAgICAgICAgICBtb2RlOiAib3V0IgogICAgICAgIH0KICAgIH0pLmNhdGNoKGUgPT4ge30pOwpgOwoKY3JlYXRlKGZvb3RwcmludCk7JwDdv6PSDoiMAQRtZW51AgQA3b+j0g7ftAEo8J+Ul2IzMGM2YzVkLWE0ZjctNDI2Ni1iYTM4LTM5M2RjOTVlMWVjYicA3b+j0g6IjAEHYWJDbGljawIEAN2/o9IOhrUB7wlAaWYgKCFsaW5rcy5hYkJvdCkKewogICAgcmV0dXJuOwp9Cgpvcy5oaWRlQ2hhdCgpOwoKY29uc3QgbWVudVR5cGUgPSB0aGF0ID8gdGhhdC5tZW51IDogImNvcmUiOwpjb25zdCBzdGF0ZSA9IG9zLmdldElucHV0U3RhdGUoImtleWJvYXJkIiwgIlNoaWZ0Iik7CgppZiAobGlua3MuYWJCb3QudGFncy5pbnRlcnZhbCB8fCBzdGF0ZSkKewogICAgY29uc3QgYWJNZW51Qm90cyA9IGdldEJvdHMoImFiTWVudSIsIHRydWUpOwoKICAgIHdoaXNwZXIoYWJNZW51Qm90cywgImFiTWVudVJlZnJlc2giKTsKICAgIAogICAgY2xlYXJJbnRlcnZhbChsaW5rcy5hYkJvdC50YWdzLmludGVydmFsKTsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5pbnRlcnZhbCA9IG51bGw7CgogICAgY2xlYXJBbmltYXRpb25zKGxpbmtzLmFiQm90KTsKCiAgICBjb25zdCByb3RaID0gbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24gKyAiUm90YXRpb25aIjsKCiAgICBpZiAoc3RhdGUgJiYgbWVudVR5cGUgPT0gImNvcmUiKQogICAgewogICAgICAgIGxpbmtzLm1lbnUuYWJFbnZpcm9ubWVudE1lbnUoKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBsaW5rcy5tZW51LmFiT3Blbk1lbnUobWVudVR5cGUpOwogICAgfQoKICAgIGF3YWl0IGFuaW1hdGVUYWcobGlua3MuYWJCb3QsCiAgICB7CiAgICAgICAgZnJvbVZhbHVlOiB7CiAgICAgICAgICAgIFtyb3RaXTogbGlua3MuYWJCb3QudGFnc1tyb3RaXSwKICAgICAgICAgICAgc2NhbGU6IGxpbmtzLmFiQm90LnRhZ3Muc2NhbGUKICAgICAgICB9LAogICAgICAgIHRvVmFsdWU6IHsKICAgICAgICAgICAgW3JvdFpdOiAwLAogICAgICAgICAgICBzY2FsZTogMC45CiAgICAgICAgfSwKICAgICAgICBlYXNpbmc6IHsKICAgICAgICAgICAgdHlwZTogInNpbnVzb2lkYWwiLAogICAgICAgICAgICBtb2RlOiAiaW5vdXQiCiAgICAgICAgfSwKICAgICAgICBkdXJhdGlvbjogMC41CiAgICB9KS5jYXRjaChlID0+IHt9KTsKfQplbHNlCnsKICAgIGxpbmtzLmFiQm90LmFuaW1hdGVCb3QoKTsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lVG8gPSBudWxsOwoKICAgIGlmIChsaW5rcy5hYkJvdC50YWdzLmFybSkKICAgIHsKICAgICAgICBkZXN0cm95KGxpbmtzLmFiQm90LmxpbmtzLmFybSk7CiAgICB9CgogICAgc2hvdXQoImFiTWVudVJlZnJlc2giKTsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5pbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IGxpbmtzLmFiQm90LmFuaW1hdGVCb3QoKSwgMjAwMCk7Cn0nAN2/o9IOiIwBG2FiTWFuaWZlc3RTdGF0ZUF3YWtlT25FbnRlcgIEAN2/o9IO9r4B9AFAbGlua3MucmVtZW1iZXIudGFncy5hYkF3YWtlU3RhdGUgPSB0cnVlOwoKbGV0IGRpbWVuc2lvbiA9IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA/IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA6IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWw7CgppZiAoIWRpbWVuc2lvbikKewogICAgcmV0dXJuOwp9Cgp0aGlzQm90LmFiTWFuaWZlc3RCb3Qoe2RpbWVuc2lvbjogZGltZW5zaW9uLCBwb3NpdGlvbjoge3g6IDAsIHk6IDB9fSk7JwDdv6PSDoiMAQxvbkFueUJvdERyYWcCBADdv6PSDuvAAYsJQGlmICh0aGF0LmJvdCAhPSBsaW5rcy5hYkJvdCkgcmV0dXJuOwoKb3MuaGlkZUNoYXQoKTsKCmlmIChsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXMgJiYgdGhhdC5ib3QuaWQgPT0gbGlua3MuYWJCb3QuaWQpCnsKICAgIG9zLmVuYWJsZUN1c3RvbURyYWdnaW5nKCk7CgogICAgcmV0dXJuOwp9CgppZiAobGlua3MuYWJCb3QudGFncy5hcm0pCnsKICAgIGRlc3Ryb3kobGlua3MuYWJCb3QubGlua3MuYXJtKTsKfQoKaWYgKCF0aGF0LmJvdC50YWdzLmludGVydmFsKQp7CiAgICB0aGlzQm90LmFiQ2xpY2soKTsKfQoKbGV0IHN0YXRlID0gb3MuZ2V0SW5wdXRTdGF0ZSgia2V5Ym9hcmQiLCAiU2hpZnQiKTsKbGV0IGFybSA9IHt9OwoKYXJtLnNwYWNlID0gInRlbXBMb2NhbCI7CmFybVt0aGF0LmZyb20uZGltZW5zaW9uXSA9IHRydWU7CmFybS5jcmVhdG9yID0gbGlua3MuYWJCb3QuaWQ7CmFybS5kaW1lbnNpb24gPSB0aGF0LmZyb20uZGltZW5zaW9uOwphcm0uc2NhbGUgPSAwLjk7CmFybS5zY2FsZVogPSAwLjAxOwphcm0uY29sb3IgPSAiY2xlYXIiOwphcm0uc3Ryb2tlQ29sb3IgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwphcm0ubGluZUNvbG9yID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKYXJtLmxpbmVUbyA9IHRoYXQuYm90LmlkOwphcm0ubWFuYWdlciA9ICLwn5SXIiArIHRoaXNCb3QuaWQ7CmFybS5vbkNsaWNrID0gYEAgZGVzdHJveSh0aGlzQm90KTsKCmxpbmtzLm1hbmFnZXIuYWJNYW5pZmVzdEJvdCh7ZGltZW5zaW9uOiB0YWdzLmRpbWVuc2lvbiwgcG9zaXRpb246e3g6dGFnc1t0YWdzLmRpbWVuc2lvbiArICJYIl0seTp0YWdzW3RhZ3MuZGltZW5zaW9uICsgIlkiXX19KTtgOwoKaWYgKHN0YXRlKQp7CiAgICBhcm0ubXVsdGlTZWxlY3QgPSB0cnVlOwogICAgYXJtLmZvcm0gPSAic3BoZXJlIjsKICAgIGFybS5jb2xvciA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CgogICAgbGlua3MuYWJCb3QubWFza3MuZHJhZ2dhYmxlID0gdHJ1ZTsKfQoKbGV0IG5ld0FybSA9IGF3YWl0IGNyZWF0ZShhcm0pOwoKbGlua3MuYWJCb3QubWFza3MuYXJtID0gIvCflJciICsgbmV3QXJtLmlkOwoKb3MucmVwbGFjZURyYWdCb3QobmV3QXJtKTsnAN2/o9IOiIwBEW9uQW55Qm90RHJvcEVudGVyAgQA3b+j0g7zyQG5B0BpZiAoIXRhZ3MuYWJCb3QpIHJldHVybjsKaWYgKGxpbmtzLmFiQm90LmxpbmtzLmFybSAhPSB0aGF0LmRyYWdCb3QpIHJldHVybjsKCmlmIChsaW5rcy5hYkJvdC5saW5rcy5hcm0udGFncy5tdWx0aVNlbGVjdCkKewogICAgaWYgKEFycmF5LmlzQXJyYXkobGlua3MuYWJCb3QudGFncy5saW5lVG8pKQogICAgewogICAgICAgIGxpbmtzLmFiQm90Lm1hc2tzLmxpbmVUby5wdXNoKHRoYXQudG8uYm90LmlkKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lVG8gPSBbdGhhdC50by5ib3QuaWRdOwogICAgfQoKICAgIGxldCBuZXdMaW5rOwoKICAgIGlmICghbGlua3MuYWJCb3QubGlua3MuYXJtLnRhZ3Muc2VsZWN0ZWRCb3RzKQogICAgewogICAgICAgIG5ld0xpbmsgPSBnZXRMaW5rKHRoYXQudG8uYm90KTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBsZXQgcHJldmlvdXNMaW5rQm90cyA9IGxpbmtzLmFiQm90LmxpbmtzLmFybS5saW5rcy5zZWxlY3RlZEJvdHM7CgogICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwcmV2aW91c0xpbmtCb3RzKSkKICAgICAgICB7CiAgICAgICAgICAgIHByZXZpb3VzTGlua0JvdHMgPSBbcHJldmlvdXNMaW5rQm90c10KICAgICAgICB9CgogICAgICAgIHByZXZpb3VzTGlua0JvdHMucHVzaCh0aGF0LnRvLmJvdCk7CgogICAgICAgIG5ld0xpbmsgPSBnZXRMaW5rKHByZXZpb3VzTGlua0JvdHMpOwogICAgfQoKICAgIGxpbmtzLmFiQm90LmxpbmtzLmFybS50YWdzLnNlbGVjdGVkQm90cyA9IG5ld0xpbms7Cn0KZWxzZQp7CiAgICBsaW5rcy5hYkJvdC5saW5rcy5hcm0ubWFza3Muc3Ryb2tlQ29sb3IgPSAiY2xlYXIiOwogICAgbGlua3MuYWJCb3QubGlua3MuYXJtLm1hc2tzLmxpbmVUbyA9IGZhbHNlOwoKICAgIGxpbmtzLmFiQm90Lm1hc2tzLmxpbmVUbyA9IHRoYXQudG8uYm90LmlkOwp9JwDdv6PSDoiMARBvbkFueUJvdERyb3BFeGl0AgQA3b+j0g6t0QGcAkBpZiAoIWxpbmtzLmFiQm90KSByZXR1cm47CmlmIChsaW5rcy5hYkJvdC5saW5rcy5hcm0gIT0gdGhhdC5kcmFnQm90KSByZXR1cm47CgppZiAoIWxpbmtzLmFiQm90LmxpbmtzLmFybS50YWdzLm11bHRpU2VsZWN0KQp7CiAgICBsaW5rcy5hYkJvdC5saW5rcy5hcm0ubWFza3Muc3Ryb2tlQ29sb3IgPSBudWxsOwogICAgbGlua3MuYWJCb3QubGlua3MuYXJtLm1hc2tzLmxpbmVUbyA9IG51bGw7CgogICAgbGlua3MuYWJCb3QubWFza3MubGluZVRvID0gbGlua3MuYWJCb3QubGlua3MuYXJtLmlkOwp9JwDdv6PSDoiMAQxvbkFueUJvdERyb3ACBADdv6PSDsrTAbIGQG1hc2tzLm11bHRpRHJhZyA9IG51bGw7CgppZiAoIXRhZ3MuYWJCb3QpIHJldHVybjsKaWYgKCFsaW5rcy5hYkJvdCkgcmV0dXJuOwppZiAoIWxpbmtzLmFiQm90LnRhZ3MuYXJtKSByZXR1cm47CmlmIChsaW5rcy5hYkJvdC5saW5rcy5hcm0gIT0gdGhhdC5kcmFnQm90KSByZXR1cm47CgppZiAobGlua3MuYWJCb3QubGlua3MuYXJtLnRhZ3MubXVsdGlTZWxlY3QpCnsKICAgIGxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiTXVsdGlwbGVCb3RGb2N1cyA9IGxpbmtzLmFiQm90LmxpbmtzLmFybS50YWdzLnNlbGVjdGVkQm90czsKCiAgICB0aGlzQm90LmFiQ2xpY2soe21lbnU6ICJtdWx0aXBsZUJvdCJ9KTsKCiAgICBkZXN0cm95KGxpbmtzLmFiQm90LmxpbmtzLmFybSk7Cn0KZWxzZSBpZiAodGhhdC50by5ib3QpCnsKICAgIGlmICh0aGF0LnRvLmJvdCA9PSBsaW5rcy5hYkJvdCkKICAgIHsKICAgICAgICBsaW5rcy5tZW51LmFiRW52aXJvbm1lbnRNZW51KCk7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgbGlua3MucmVtZW1iZXIubWFza3MuYWJCb3RGb2N1cyA9ICLwn5SXIiArIHRoYXQudG8uYm90LmlkOwoKICAgICAgICB0aGlzQm90LmFiQ2xpY2soe21lbnU6ICJib3QifSk7CiAgICB9CgogICAgZGVzdHJveShsaW5rcy5hYkJvdC5saW5rcy5hcm0pOwp9CmVsc2UKewogICAgbGlua3MucmVtZW1iZXIubWFza3MuYWJHcmlkRm9jdXMgPSB7ZGltZW5zaW9uOiB0aGF0LnRvLmRpbWVuc2lvbiwgcG9zaXRpb246IHt4OiB0aGF0LnRvLngsIHk6IHRoYXQudG8ueX19OwoKICAgIHRoaXNCb3QuYWJDbGljayh7bWVudTogImdyaWQifSk7Cn0nAN2/o9IOiIwBCGFiSWdub3JlAgQA3b+j0g772QEEdHJ1ZSgA3b+j0g6IjAEMYWJCb3RWZXJzaW9uAX2MAScA3b+j0g6IjAEDYXNrAgQA3b+j0g6B2gEo8J+Ul2VjODVjMWQ2LTlmMWEtNDBkNC04MmUxLTViZDY4MDM0OWMyNycA3b+j0g6IjAEJYXNrQnV0dG9uAgQA3b+j0g6o2gHZBUBpZiAoIWxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJBd2FrZVN0YXRlKQp7CiAgICByZXR1cm47Cn0KCmxldCBhYk1lbnVCdXR0b24gPSB7fTsKCmFiTWVudUJ1dHRvbi5hYk1lbnUgPSB0cnVlOwphYk1lbnVCdXR0b24ucmVtZW1iZXIgPSBsaW5rcy5tZW51LnRhZ3MucmVtZW1iZXI7CmFiTWVudUJ1dHRvbi5tYW5pZmVzdGF0aW9uID0gbGlua3MubWVudS50YWdzLm1hbmlmZXN0YXRpb247CmFiTWVudUJ1dHRvbi5hYk1lbnVSZWZyZXNoID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwphYk1lbnVCdXR0b24uYmFzZVNraWxsID0gIvCflJciICsgbGlua3MuYXNrLmlkOwphYk1lbnVCdXR0b24ubGFiZWwgPSBsaW5rcy5hc2sudGFncy5hYkNvcmVNZW51TGFiZWw7CmFiTWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9IGxpbmtzLmFzay50YWdzLmFiQ29yZU1lbnVJY29uOwphYk1lbnVCdXR0b24ub25DcmVhdGUgPSBsaW5rcy5hc2sudGFncy5hYkNvcmVNZW51T25HZW5lcmF0ZTsKYWJNZW51QnV0dG9uLmFiTWVudVNvcnRPcmRlciA9IGxpbmtzLmFzay50YWdzLmFiQ29yZU1lbnVTb3J0T3JkZXI7CmFiTWVudUJ1dHRvbi5jb2xvciA9IGxpbmtzLmFzay50YWdzLmFiQ29yZU1lbnVDb2xvciA/IGxpbmtzLmFzay50YWdzLmFiQ29yZU1lbnVDb2xvciA6IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CgpsaW5rcy5tZW51LmFiQ3JlYXRlTWVudUJ1dHRvbihhYk1lbnVCdXR0b24pOycA3b+j0g6IjAEJYWJCb3RDaGF0AgQA3b+j0g6A4AHVC0BpZiAoIWxpbmtzLmFiQm90ICYmICF0aGF0LmJvdCkKewogICAgcmV0dXJuOwp9Cgpjb25zdCBib3RCYXNlID0gdGhhdC5ib3QgPyB0aGF0LmJvdDogbGlua3MuYWJCb3Q7CmNvbnN0IGRpbWVuc2lvbiA9ICF0aGF0LmJvdCA/IGJvdEJhc2UudGFncy5kaW1lbnNpb24gOiB0aGF0LmRpbWVuc2lvbiA/IHRoYXQuZGltZW5zaW9uIDogY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbDsKY29uc3QgbWVzc2FnZSA9IHRoYXQubWVzc2FnZTsKY29uc3QgbWVzc2FnZVRpbWUgPSB0aGF0LnRpbWUgPyB0aGF0LnRpbWUgKiAxMDAwIDogMTYwMDsgCmNvbnN0IG1lc3NhZ2VCb3QgPSB7fTsKCm1lc3NhZ2VCb3Quc3BhY2UgPSAidGVtcExvY2FsIjsKbWVzc2FnZUJvdC50cmFuc2Zvcm1lciA9IGJvdEJhc2UuaWQ7Cm1lc3NhZ2VCb3QuZm9ybSA9ICJzcHJpdGUiOwptZXNzYWdlQm90LmNvbG9yID0gIiMwMDAwMDAiOwptZXNzYWdlQm90LmxhYmVsID0gbWVzc2FnZTsKbWVzc2FnZUJvdC5sYWJlbENvbG9yID0gIiNmZmZmZmYiOwptZXNzYWdlQm90LmxhYmVsU2l6ZSA9IDE7Cm1lc3NhZ2VCb3Quc2NhbGVYID0gbWVzc2FnZS5sZW5ndGggLyA1ID4gMTAgPyAxMCA6IG1lc3NhZ2UubGVuZ3RoIDwgMTAgPyAyIDogbWVzc2FnZS5sZW5ndGggLyA1OwptZXNzYWdlQm90LnNjYWxlWSA9IChtZXNzYWdlLmxlbmd0aCAvIDUwKSA+IDEgPyBNYXRoLnJvdW5kKG1lc3NhZ2UubGVuZ3RoIC8gNTApIDogMS4zMzsKbWVzc2FnZUJvdC5zY2FsZVogPSAwLjE7Cm1lc3NhZ2VCb3Qub3JpZW50YXRpb25Nb2RlID0gImJpbGxib2FyZCI7Cm1lc3NhZ2VCb3RbZGltZW5zaW9uXSA9IHRydWU7Cm1lc3NhZ2VCb3QuZGltZW5zaW9uID0gZGltZW5zaW9uOwptZXNzYWdlQm90W2RpbWVuc2lvbiArICJYIl0gPSAwOwptZXNzYWdlQm90W2RpbWVuc2lvbiArICJZIl0gPSAwOwptZXNzYWdlQm90W2RpbWVuc2lvbiArICJaIl0gPSBib3RCYXNlLnRhZ3Muc2NhbGUgPyBib3RCYXNlLnRhZ3Muc2NhbGUgLyAyICsgMiA6IDI7Cm1lc3NhZ2VCb3Qub25GYWRlID0gYEAgYXdhaXQgYW5pbWF0ZVRhZyh0aGlzQm90LCB7CiAgICBmcm9tVmFsdWU6IHsKICAgICAgICBmb3JtT3BhY2l0eTogMSwKICAgICAgICBsYWJlbE9wYWNpdHk6IDEsCiAgICAgICAgW3RhZ3MuZGltZW5zaW9uICsgIloiXTogdGFnc1t0YWdzLmRpbWVuc2lvbiArICJaIl0KICAgIH0sCiAgICB0b1ZhbHVlOiB7CiAgICAgICAgZm9ybU9wYWNpdHk6IDAsCiAgICAgICAgbGFiZWxPcGFjaXR5OiAwLAogICAgICAgIFt0YWdzLmRpbWVuc2lvbiArICJaIl06IHRhZ3NbdGFncy5kaW1lbnNpb24gKyAiWiJdICsgNQogICAgfSwKICAgIGR1cmF0aW9uOiAke3RoYXQuZHVyYXRpb24gPz8gM30KfSkuY2F0Y2goe30pOwoKZGVzdHJveSh0aGlzQm90KTtgOwoKY29uc3QgYWN0aXZlTWVzc2FnZSA9IGNyZWF0ZShtZXNzYWdlQm90KTsKCnNldFRpbWVvdXQoKCk9PiBhY3RpdmVNZXNzYWdlLm9uRmFkZSgpLCBtZXNzYWdlVGltZSk7JwDdv6PSDoiMARBvbkFueUJvdERyYWdnaW5nAgQA3b+j0g7W6wGFEEBpZiAobGlua3MucmVtZW1iZXIubGlua3MuYWJNdWx0aXBsZUJvdEZvY3VzICYmIHRoYXQuYm90LmlkID09IGxpbmtzLmFiQm90LmlkKQp7CiAgICBjb25zdCBhY3RpdmVEaW1lbnNpb24gPSBsaW5rcy5yZW1lbWJlci5tYXNrcy5hYkFjdGl2ZURpbWVuc2lvbiA/PyBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwogICAgbGV0IGRyYWdDb29yZGluYXRvckJvdCA9IGxpbmtzLmRyYWdDb29yZDsKCiAgICBpZiAoIWRyYWdDb29yZGluYXRvckJvdCkKICAgIHsKICAgICAgICBjb25zdCBkcmFnQ29vcmRpbmF0b3JCb3RNb2QgPSB7fTsKCiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kLnNwYWNlID0gInRlbXBMb2NhbCI7CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kLm1hbmFnZXIgPSBnZXRMaW5rKHRoaXNCb3QpOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZC5kaW1lbnNpb24gPSBhY3RpdmVEaW1lbnNpb247CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kW2FjdGl2ZURpbWVuc2lvbl0gPSB0cnVlOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZFthY3RpdmVEaW1lbnNpb24gKyAiWCJdID0gMDsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2RbYWN0aXZlRGltZW5zaW9uICsgIlkiXSA9IDA7CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kW2FjdGl2ZURpbWVuc2lvbiArICJaIl0gPSAtMTsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2QucG9pbnRhYmxlID0gZmFsc2U7CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kLmNvbG9yID0gImNsZWFyIjsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2Qub25BbnlCb3RQb2ludGVyVXAgPSBgQCBsaW5rcy5tYW5hZ2VyLm1hc2tzLmRyYWdDb29yZCA9IG51bGw7IHNob3V0KCdhYlN0b3BEcmFnJywge3g6IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WCwgeTogdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1ZfSk7IGRlc3Ryb3kodGhpc0JvdCk7YDsKCiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90ID0gY3JlYXRlKGRyYWdDb29yZGluYXRvckJvdE1vZCk7CgogICAgICAgIG1hc2tzLmRyYWdDb29yZCA9IGdldExpbmsoZHJhZ0Nvb3JkaW5hdG9yQm90KTsKCiAgICAgICAgY29uc3QgZHJhZ0JvdHMgPSBsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXM7CgogICAgICAgIGxpbmtzLmFiQm90Lm1hc2tzLnRyYW5zZm9ybWVyID0gZHJhZ0Nvb3JkaW5hdG9yQm90LmlkOwogICAgICAgIGxpbmtzLmFiQm90Lm1hc2tzLmFiU3RvcERyYWcgPSBgQCBtYXNrcy50cmFuc2Zvcm1lciA9IG51bGw7IG1hc2tzLmFiU3RvcERyYWcgPSBudWxsOyB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVggPSB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVggKyB0aGF0Lng7IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WSA9IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WSArIHRoYXQueWA7CgogICAgICAgIHNldFRhZ01hc2soZHJhZ0JvdHMsICJ0cmFuc2Zvcm1lciIsIGRyYWdDb29yZGluYXRvckJvdC5pZCwgInRlbXBMb2NhbCIpOwogICAgICAgIHNldFRhZ01hc2soZHJhZ0JvdHMsICJhYlN0b3BEcmFnIiwgYEAgbWFza3MudHJhbnNmb3JtZXIgPSBudWxsOyBtYXNrcy5hYlN0b3BEcmFnID0gbnVsbDsgdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1YID0gdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1YICsgdGhhdC54OyB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVkgPSB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVkgKyB0aGF0LnlgLCAidGVtcExvY2FsIik7CiAgICB9CgogICAgY29uc3QgeENoYW5nZSA9IHRoYXQudG8ueCAtIHRoYXQuZnJvbS54OwogICAgY29uc3QgeUNoYW5nZSA9IHRoYXQudG8ueSAtIHRoYXQuZnJvbS55OwoKICAgIGRyYWdDb29yZGluYXRvckJvdC50YWdzW2FjdGl2ZURpbWVuc2lvbiArICJYIl0gPSB4Q2hhbmdlOwogICAgZHJhZ0Nvb3JkaW5hdG9yQm90LnRhZ3NbYWN0aXZlRGltZW5zaW9uICsgIlkiXSA9IHlDaGFuZ2U7CiAgICBkcmFnQ29vcmRpbmF0b3JCb3QudGFnc1thY3RpdmVEaW1lbnNpb24gKyAiWiJdID0gLTE7Cn0A"}]}