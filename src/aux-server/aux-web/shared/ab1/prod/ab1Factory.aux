{"version":2,"updates":[{"id":0,"timestamp":1680727827437,"update":"AcoC68aEnQQAJwEEYm90cyQxMDE0MjU0Ni04YzM0LTRiZDYtYWQzNi0wYTE0NjE3OTNkMDkBKADrxoSdBAAKbWF4VmVyc2lvbgF+JwDrxoSdBAAEYWJJRAIEAOvGhJ0EAhRhYnJ3X3Rlc3RfZXhwZXJpZW5jZSgA68aEnQQABWxhYmVsAX4oAOvGhJ0EABFlZ2dWZXJzaW9uSGlzdG9yeQF+JwDrxoSdBAAQZWdnRm9ybWF0VmVyc2lvbgIEAOvGhJ0EGSQwMTcwZDhiYS0xN2MwLTQyYzYtODBlOS0yYjE1ZDNjZDc1YzcoAOvGhJ0EAA10YXJnZXRWZXJzaW9uAX0BKADrxoSdBAAMaW5pdGlhbFRpbWVyAX4nAOvGhJ0EAAdtYW5hZ2VyAgQA68aEnQRAKPCflJdkODM3MTQ0NC05MTU4LTQ0MzYtOGZjNy04NGNjOTFiN2Y1MjUnAOvGhJ0EAAdvbkNsaWNrAgQA68aEnQRnJUAgbGlua3MubWFuYWdlci5pbnRlcmFjdE92byh0aGlzQm90KTsnAOvGhJ0EAAhvbkNyZWF0ZQIEAOvGhJ0EjQG3A0Bjb25zdCB0YXJnZXRBQiA9IGF3YWl0IG9zLnNob3dJbnB1dCgnYWInLCB7CiAgICB0aXRsZTogJ2FiIG5hbWUnCn0pOwoKaWYgKCF0YXJnZXRBQiB8fCB0YXJnZXRBQiA9PSAiYWIiKQp7CiAgICBvcy50b2FzdCgibm8gdmFsaWQgYWIgZ2l2ZW4iKTsKCiAgICBkZXN0cm95KHRoaXNCb3QpOwoKICAgIHJldHVybjsKfQoKY29uc3QgZ2V0UmVjb3JkID0gYXdhaXQgb3MuZ2V0RGF0YShsaW5rcy5yZW1lbWJlci50YWdzLmFiMVJlY29yZEtleSwgdGFyZ2V0QUIsIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxRW5kcG9pbnQpOwoKaWYgKCFnZXRSZWNvcmQuc3VjY2VzcykKewogICAgb3MudG9hc3QoIm5vIGFiIGZvdW5kIHdpdGggdGhhdCBuYW1lIik7CgogICAgZGVzdHJveSh0aGlzQm90KTsKCiAgICByZXR1cm47Cn0KCmFwcGx5TW9kKHRoaXNCb3QsIGdldFJlY29yZC5kYXRhKTsnAOvGhJ0EAARmb3JtAgQA68aEnQTFBANlZ2cnAOvGhJ0EABBwcm9ncmVzc0JhckNvbG9yAgQA68aEnQTJBAcjQkY1RTY2JwDrxoSdBAAacHJvZ3Jlc3NCYXJCYWNrZ3JvdW5kQ29sb3ICBADrxoSdBNEEByM1OTI5ODkoAOvGhJ0EAAlsYWJlbFNpemUBfD8AAAAnAOvGhJ0EAApsYWJlbENvbG9yAgQA68aEnQTaBAcjNDA0MDQwJwDrxoSdBAAOb25Qb2ludGVyRW50ZXICBADrxoSdBOIEL0Bvcy50b2FzdCh0YWdzLmFiSUQgKyAnIHYnK3RhZ3MudGFyZ2V0VmVyc2lvbik7JwDrxoSdBAANbGFiZWxQb3NpdGlvbgIEAOvGhJ0EkgUFZnJvbnQnAOvGhJ0EAA9vcmllbnRhdGlvbk1vZGUCBADrxoSdBJgFDmJpbGxib2FyZEZyb250JwDrxoSdBAAJb25EZXN0cm95AgQA68aEnQSnBSNAbGlua3MubWFuYWdlci5tYXNrcy5vdm9Cb3QgPSBudWxsOygA68aEnQQACGVnZ1RpbWVyAX4oAOvGhJ0EAARob21lAX4oAOvGhJ0EAAVob21lWAF+KADrxoSdBAAFaG9tZVkBficA68aEnQQACWRpbWVuc2lvbgIEAOvGhJ0EzwUEaG9tZSgA68aEnQQACmFiSURPcmlnaW4BfigA68aEnQQAC3Byb2dyZXNzQmFyAX4nAOvGhJ0EAAZzeXN0ZW0CBADrxoSdBNYFEGFiLTEuZmFjdG9yeS5lZ2cnAOvGhJ0EAAlsaXN0ZW5pbmcCBADrxoSdBOcFBWZhbHNlJwDrxoSdBAAKYWIxRmFjdG9yeQIEAOvGhJ0E7QUEdHJ1ZSgA68aEnQQACGFiMUlnb3JlAX4nAOvGhJ0EAAlhYjFJZ25vcmUCBADrxoSdBPMFBHRydWUnAOvGhJ0EAAhyZW1lbWJlcgIEAOvGhJ0E+AUo8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycA68aEnQQAC2ZhY3RvcnlJY29uAgQA68aEnQSfBgNlZ2cnAOvGhJ0EAAVjb2xvcgIEAOvGhJ0EowYHI0ZGRkZGRigA68aEnQQADWFiMUJvdFZlcnNpb24BfQ0nAOvGhJ0EABBhYjFNZW51U29ydE9yZGVyAgQA68aEnQSsBgEzJwEEYm90cyQxNGUxZmRhYy1jZmQ3LTRlN2UtYmRkMS05NjdhNDA4NWE3NTUBJwDrxoSdBK4GBnN5c3RlbQIEAOvGhJ0ErwYUYWItMS5mYWN0b3J5Lm1hbmFnZXInAOvGhJ0ErgYEZm9ybQIEAOvGhJ0ExAYHbm90aGluZycA68aEnQSuBglhYjFJZ25vcmUCBADrxoSdBMwGBHRydWUnAOvGhJ0ErgYPYWIxQWRkVG9GYWN0b3J5AgQA68aEnQTRBo4GQC8vc2hvdXQoImFiMUFkZFRvRmFjdG9yeSIsIHtkaW1lbnNpb246IGRpbWVuc2lvbiwgYm90OiBib3QsIGZhY3RvcnlJRDogZmFjdG9yeUlEfSk7CmxldCBmYWN0b3J5SUQ7CgppZiAodGhhdC5mYWN0b3J5SUQpCnsKICAgIGZhY3RvcnlJRCA9IHRoYXQuZmFjdG9yeUlEOwp9CmVsc2UKewogICAgZmFjdG9yeUlEID0gYXdhaXQgb3Muc2hvd0lucHV0KG51bGwsIHsKICAgICAgICB0aXRsZTogJ0FkZCBmYWN0b3J5IGlkJwogICAgfSk7Cn0KCmlmIChmYWN0b3J5SUQpCnsKICAgIGxldCBwcmV2aW91c0ZhY3RvcnlCb3QgPSBnZXRCb3QoInN5c3RlbSIsICJhYi0xLmZhY3RvcnkuIiArIGZhY3RvcnlJRCk7CiAgICAKICAgIGlmKHByZXZpb3VzRmFjdG9yeUJvdCkKICAgIHsKICAgICAgICBkZXN0cm95KHByZXZpb3VzRmFjdG9yeUJvdCk7CiAgICB9CgogICAgbGV0IHRlbXBsYXRlQm90ID0gdGhhdC5ib3Q7CiAgICBsZXQgZmFjdG9yeU1vZCA9IHt9OwoKICAgIGZhY3RvcnlNb2RbdGhhdC5kaW1lbnNpb25dID0gbnVsbDsKICAgIGZhY3RvcnlNb2Quc3lzdGVtID0gImFiLTEuZmFjdG9yeS4iICsgZmFjdG9yeUlEOwogICAgZmFjdG9yeU1vZC5saXN0ZW5pbmcgPSBmYWxzZTsKICAgIGZhY3RvcnlNb2QuYWIxRmFjdG9yeSA9IHRydWU7CgogICAgY3JlYXRlKHRlbXBsYXRlQm90LCBmYWN0b3J5TW9kKTsKCiAgICBhYjEubG9nKGZhY3RvcnlJRCArICIgYWRkZWQgdG8gZmFjdG9yeSIpOwoKICAgIG9zLnRvYXN0KCJhZGRlZCAiICsgZmFjdG9yeUlEICsgIiB0byBmYWN0b3J5Iik7Cn0nAOvGhJ0ErgYKYWIxRmFjdG9yeQIEAOvGhJ0E4AwEdHJ1ZScA68aEnQSuBhBhYjFCb3RNZW51QWN0aW9uAgQA68aEnQTlDLsBQGNvbnN0IGN1cnJlbnREaW0gPSBsaW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiMUJvdC50YWdzLmRpbWVuc2lvbjsKY29uc3QgdGFyZ2V0Qm90ID0gbGlua3MucmVtZW1iZXIubGlua3MuYWIxQm90Rm9jdXM7Cgp0aGlzQm90LmFiMUFkZFRvRmFjdG9yeSh7ZGltZW5zaW9uOiBjdXJyZW50RGltLCBib3Q6IHRhcmdldEJvdH0pOycA68aEnQSuBhRhYjFDcmVhdGVGcm9tRmFjdG9yeQIEAOvGhJ0EoQ6/BkAvL3Nob3V0KCJhYjFDcmVhdGVGcm9tRmFjdG9yeSIsIHtmYWN0b3J5SUQ6ICJmYWN0b3J5SUQiLCBwb3NpdGlvbjoge2RpbWVuc2lvbjogImRpbWVuc2lvbiIsIHg6ICJ4IiwgeTogInkifX0pOwpsZXQgZnVsbE5hbWUgPSAiYWItMS5mYWN0b3J5LiIgKyB0aGF0LmZhY3RvcnlJRDsKbGV0IGZhY3RvcnlUZW1wbGF0ZSA9IGdldE1vZChnZXRCb3QoJ3N5c3RlbScsIGZ1bGxOYW1lKSk7CmxldCBwb3NpdGlvbkluZm8gPSB0aGF0LnBvc2l0aW9uOwoKaWYoIWZhY3RvcnlUZW1wbGF0ZSkKewogICAgY29uc29sZS5sb2coIm5vdCBmYWN0b3J5IGJvdCBmb3VuZCIpOwoKICAgIGFiMS5sb2coZnVsbE5hbWUgKyAiIGNvdWxkIG5vdCBiZSBmb3VuZCIpCgogICAgcmV0dXJuOwp9CgphYjEubG9nKGZ1bGxOYW1lICsgIiBjcmVhdGVkIGZyb20gZmFjdG9yeSIpOwoKbGV0IG5ld0JvdCA9IHt9CgpuZXdCb3QuY3JlYXRvciA9IG51bGw7Cm5ld0JvdFtwb3NpdGlvbkluZm8uZGltZW5zaW9uXSA9IHRydWU7Cm5ld0JvdFtwb3NpdGlvbkluZm8uZGltZW5zaW9uICsgIlgiXSA9IHBvc2l0aW9uSW5mby5wb3NpdGlvbi54OwpuZXdCb3RbcG9zaXRpb25JbmZvLmRpbWVuc2lvbiArICJZIl0gPSBwb3NpdGlvbkluZm8ucG9zaXRpb24ueTsKbmV3Qm90Lmxpc3RlbmluZyA9IG51bGw7Cm5ld0JvdC5hYjFJZ25vcmUgPSBudWxsOwpuZXdCb3Quc3lzdGVtID0gbnVsbDsKbmV3Qm90LmFiMUZhY3RvcnkgPSBudWxsOwpuZXdCb3QuYWIxTWVudVNvcnRPcmRlciA9IG51bGw7CgpjcmVhdGUoZmFjdG9yeVRlbXBsYXRlLCBuZXdCb3QpOwoKbGlua3MubWFuaWZlc3RhdGlvbi5hYjFDbGljaygpOycA68aEnQSuBhFhYjFHcmlkTWVudUFjdGlvbgIEAOvGhJ0E4RTkCEBzaG91dCgiYWIxTWVudVJlZnJlc2giKTsKCmNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gImFiMU1lbnUiOwoKbGlua3MubWVudS5tYXNrcy5vbkdyaWRDbGljayA9ICJAIHNob3V0KCdhYjFNZW51UmVmcmVzaCcpOyBsaW5rcy5tYW5pZmVzdGF0aW9uLmFiMUNsaWNrKCk7IjsKCmNvbnN0IGZhY3RvcnlCb3RzID0gZ2V0Qm90cygiYWIxRmFjdG9yeSIpOwpjb25zdCBtZW51QnV0dG9uID0ge307CgptZW51QnV0dG9uLmFiMU1lbnUgPSB0cnVlOwptZW51QnV0dG9uLmFiMU1lbnVSZWZyZXNoID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwptZW51QnV0dG9uLmdyaWRJbmZvcm1hdGlvbiA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxR3JpZEZvY3VzOwptZW51QnV0dG9uLm1hbmFnZXIgPSAi8J+UlyIgKyB0aGlzQm90LmlkOwptZW51QnV0dG9uLm9uQ2xpY2sgPSBgQCBsaW5rcy5tYW5hZ2VyLmFiMUNyZWF0ZUZyb21GYWN0b3J5KHtmYWN0b3J5SUQ6IHRhZ3MubGFiZWwsIHBvc2l0aW9uOiB0YWdzLmdyaWRJbmZvcm1hdGlvbn0pOyBzaG91dCgnYWIxTWVudVJlZnJlc2gnKTtgOwoKaWYgKGZhY3RvcnlCb3RzLmxlbmd0aCA8IDIpCnsKICAgIHJldHVybjsgCn0KCmZvciAobGV0IGogPSAwOyBqIDwgZmFjdG9yeUJvdHMubGVuZ3RoOyBqKyspIAp7CiAgICBsZXQgY3VycmVudEZhY3RvcnlCb3QgPSBmYWN0b3J5Qm90c1tqXTsKICAgIGxldCBjdXJyZW50U3lzdGVtVGFnID0gY3VycmVudEZhY3RvcnlCb3QudGFncy5zeXN0ZW07CgogICAgaWYgKGN1cnJlbnRTeXN0ZW1UYWcgPT0gdGFncy5zeXN0ZW0pCiAgICB7CiAgICAgICAgY29udGludWU7CiAgICB9CgogICAgbWVudUJ1dHRvbi5hYjFNZW51U29ydE9yZGVyID0gY3VycmVudEZhY3RvcnlCb3QudGFncy5hYjFNZW51U29ydE9yZGVyOwogICAgbWVudUJ1dHRvbi5sYWJlbCA9IGN1cnJlbnRTeXN0ZW1UYWcuc3Vic3RyaW5nKDEzKTsKICAgIG1lbnVCdXR0b24uY29sb3IgPSBjdXJyZW50RmFjdG9yeUJvdC50YWdzLmNvbG9yOwogICAgbWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9IGN1cnJlbnRGYWN0b3J5Qm90LnRhZ3MuZmFjdG9yeUljb247CgogICAgbGlua3MubWVudS5hYjFDcmVhdGVNZW51QnV0dG9uKG1lbnVCdXR0b24pOwp9JwDrxoSdBK4GDW1hbmlmZXN0YXRpb24CBADrxoSdBMQdKPCflJdkY2E1ZDk4Ny1jNGQ4LTQ2ZTQtYjYwYy1kYWE3YjJmNGRkYWQnAOvGhJ0ErgYIcmVtZW1iZXICBADrxoSdBOsdKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAOvGhJ0ErgYEbWVudQIEAOvGhJ0Ekh4o8J+Ul2IzMGM2YzVkLWE0ZjctNDI2Ni1iYTM4LTM5M2RjOTVlMWVjYicA68aEnQSuBhBhYjFHcmlkTWVudUxhYmVsAgQA68aEnQS5Hgd0b29sYm94JwDrxoSdBK4GD2FiMUdyaWRNZW51SWNvbgIEAOvGhJ0EwR4MY29uc3RydWN0aW9uJwDrxoSdBK4GFGFiMUdyaWRNZW51U29ydE9yZGVyAgQA68aEnQTOHgEzJwDrxoSdBK4GDmFiMUJvdE1lbnVJY29uAgQA68aEnQTQHgxjb25zdHJ1Y3Rpb24nAOvGhJ0ErgYPYWIxQm90TWVudUxhYmVsAgQA68aEnQTdHg5hZGQgdG8gdG9vbGJveCcA68aEnQSuBhNhYjFCb3RNZW51U29ydE9yZGVyAgQA68aEnQTsHgEzJwDrxoSdBK4GD2FiMUJvdE1lbnVDb2xvcgIEAOvGhJ0E7h4HIzU1RTY3OScA68aEnQSuBhBhYjFHcmlkTWVudUNvbG9yAgQA68aEnQT2HgcjNTVFNjc5KADrxoSdBK4GDWFiMUJvdFZlcnNpb24BfRMnAQRib3RzJDFkZDU5NmUxLTg4MjYtNDI1Ny1iNWQ2LWRjMmE5YTU3MWRmNQEnAOvGhJ0E/x4FY29sb3ICBADrxoSdBIAfByM3QjY0RkYnAOvGhJ0E/x4EZm9ybQIEAOvGhJ0EiB8DaGV4KADrxoSdBP8eBXNjYWxlAXw/wAAAKADrxoSdBP8eBnNjYWxlWgF7P4R64UeuFHsnAOvGhJ0E/x4Hb25DbGljawIEAOvGhJ0Ejh+JCUBzaG91dCgicGFkTWVudVJlc2V0Iik7Cgpjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9ICJwYWRNZW51IjsKCm1hc2tzLm9uR3JpZENsaWNrID0gYEAgc2hvdXQoInBhZE1lbnVSZXNldCIpO2A7Cm1hc2tzLnBhZE1lbnVSZXNldCA9IGBAIGNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gbnVsbDsKCmNsZWFyVGFnTWFza3ModGhpc0JvdCk7YDsKCmNvbnN0IHBhZExvY2F0aW9ucyA9IHRhZ3MucGFkTG9jYXRpb25zOwpjb25zdCBtZW51QnV0dG9uID0ge307CgptZW51QnV0dG9uLnNwYWNlID0gInRlbXBMb2NhbCI7Cm1lbnVCdXR0b24ucGFkTWVudSA9IHRydWU7Cm1lbnVCdXR0b24ucGFkTWVudVJlc2V0ID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwptZW51QnV0dG9uLm1lbnVJdGVtU3R5bGUgPSB7ImJvcmRlci1yYWRpdXMiOiI4cHgiLCAibWFyZ2luLXRvcCI6IjNweCJ9OwptZW51QnV0dG9uLmxhYmVsQWxpZ25tZW50ID0gImxlZnQiOwptZW51QnV0dG9uLmNvbG9yID0gdGFncy5jb2xvcjsKbWVudUJ1dHRvbi5tYW5hZ2VyID0gZ2V0TGluayh0aGlzQm90KTsKCmlmIChwYWRMb2NhdGlvbnMubGVuZ3RoID4gMCkKewogICAgbWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJtZWV0aW5nX3Jvb20iOwogICAgbWVudUJ1dHRvbi5vbkNsaWNrID0gYEAgbGlua3MubWFuYWdlci5wYWRHb1RvTG9jYXRpb24odGFncy5sYWJlbCk7YDsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZExvY2F0aW9ucy5sZW5ndGg7IGkrKykKICAgIHsKICAgICAgICBtZW51QnV0dG9uLmxhYmVsID0gcGFkTG9jYXRpb25zW2ldOwoKICAgICAgICBjcmVhdGUobWVudUJ1dHRvbik7CiAgICB9Cn0KCm1lbnVCdXR0b24ubGFiZWxBbGlnbm1lbnQgPSAiY2VudGVyIjsKbWVudUJ1dHRvbi5sYWJlbCA9ICIgICAgIjsKbWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJpb3Nfc2hhcmUiOwptZW51QnV0dG9uLm9uQ2xpY2sgPSBgQCBsaW5rcy5tYW5hZ2VyLnBhZFNoYXJlKCk7YDsKCmNyZWF0ZShtZW51QnV0dG9uKTsKCmlmIChidWlsZGVyVmVyc2lvbikKewogICAgbWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJlZGl0IjsKICAgIG1lbnVCdXR0b24ub25DbGljayA9IGBAIGxpbmtzLm1hbmFnZXIucGFkRWRpdE1lbnUoKTtgOwoKICAgIGNyZWF0ZShtZW51QnV0dG9uKTsKfScA68aEnQT/Hg5vblBvaW50ZXJFbnRlcgIEAOvGhJ0EmCghQCBtYXNrcy5zY2FsZSA9IHRhZ3Muc2NhbGUgKyAwLjE7JwDrxoSdBP8eDW9uUG9pbnRlckV4aXQCBADrxoSdBLooGUAgY2xlYXJUYWdNYXNrcyh0aGlzQm90KTsnAOvGhJ0E/x4Gc3lzdGVtAgQA68aEnQTUKBBhYi0xLmZhY3RvcnkucGFkJwDrxoSdBP8eD3BhZEdvVG9Mb2NhdGlvbgIEAOvGhJ0E5SiiBUBsZXQgdGFyZ2V0TG9jYXRpb24gPSB0aGF0OwpsZXQgdXJsQ2hlY2sgPSBmYWxzZTsKCnRyeSAKewogICAgdGFyZ2V0TG9jYXRpb24gPSBuZXcgVVJMKHRoYXQpOwoKICAgIHVybENoZWNrID0gIXVybENoZWNrOwp9CmNhdGNoIChlKSAKewoKICAgIG9zLnRvYXN0KCJ0cmF2ZWxsaW5nIG5vdyIpOwoKICAgIG9zLmdvVG9VUkwoIi8/YWI9IiArIHRhcmdldExvY2F0aW9uKTsKfQoKbGV0IGluc3RDaGVjayA9IHRhcmdldExvY2F0aW9uLnNlYXJjaFBhcmFtcy5oYXMoImluc3QiKTsKbGV0IGFiQ2hlY2sgPSB0YXJnZXRMb2NhdGlvbi5zZWFyY2hQYXJhbXMuaGFzKCJhYiIpOwoKaWYgKGluc3RDaGVjaykKewogICAgaWYgKGFiQ2hlY2spCiAgICB7CiAgICAgICAgb3MuZ29Ub1VSTCgiLz9ncmlkUG9ydGFsPWhvbWUmaW5zdD0iICsgdGFyZ2V0TG9jYXRpb24uc2VhcmNoUGFyYW1zLmdldCgiaW5zdCIpICsgIiZhYj0iICsgdGFyZ2V0TG9jYXRpb24uc2VhcmNoUGFyYW1zLmdldCgiYWIiKSk7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgb3MuZ29Ub1VSTCgiLz9ncmlkUG9ydGFsPWhvbWUmaW5zdD0iICsgdGFyZ2V0TG9jYXRpb24uc2VhcmNoUGFyYW1zLmdldCgiaW5zdCIpKTsKICAgIH0KICAgIAp9CmVsc2UgCnsKICAgIG9zLnRvYXN0KCJub3QgYSByZWNvZ25pemVkIHVybCIpOwp9JwDrxoSdBP8eC3BhZEVkaXRNZW51AgQA68aEnQSILoEPQHNob3V0KCJwYWRNZW51UmVzZXQiKTsKCmNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gInBhZE1lbnUiOwoKbWFza3Mub25HcmlkQ2xpY2sgPSBgQCBzaG91dCgicGFkTWVudVJlc2V0Iik7YDsKbWFza3MucGFkTWVudVJlc2V0ID0gYEAgY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSBudWxsOwoKY2xlYXJUYWdNYXNrcyh0aGlzQm90KTtgOwoKY29uc3QgcGFkTG9jYXRpb25zID0gdGFncy5wYWRMb2NhdGlvbnM7CmNvbnN0IG1lbnVCdXR0b24gPSB7fTsKCm1lbnVCdXR0b24uc3BhY2UgPSAidGVtcExvY2FsIjsKbWVudUJ1dHRvbi5wYWRNZW51U29ydE9yZGVyID0gMTAwOwptZW51QnV0dG9uLnBhZE1lbnVSZXNldCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKbWVudUJ1dHRvbi5tZW51SXRlbVN0eWxlID0geyAiYm9yZGVyLXJhZGl1cyI6ICI4cHgiLCAibWFyZ2luLXRvcCI6ICIzcHgiIH07Cm1lbnVCdXR0b24ubGFiZWxBbGlnbm1lbnQgPSAiY2VudGVyIjsKbWVudUJ1dHRvbi5jb2xvciA9ICIjRDY2RDVFIjsKbWVudUJ1dHRvbi5tYW5hZ2VyID0gZ2V0TGluayh0aGlzQm90KTsKbWVudUJ1dHRvbi5sYWJlbCA9ICIgICAgIjsKbWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJkZWxldGVfZm9yZXZlciI7Cm1lbnVCdXR0b24ub25DbGljayA9IGBAIGxpbmtzLm1hbmFnZXIucGFkUmVtb3ZlTG9jYXRpb25zKCk7YDsKbWVudUJ1dHRvbi5vcHRpb25DbGljayA9IGBAIGlmIChnZXRCb3QoYnlNb2Qoe3BhZExvY2F0aW9uT3B0aW9uOiB0cnVlLCBmb3JtQWRkcmVzczogImNoZWNrX2JveCJ9KSkpCnsKICAgIHRhZ3MucGFkTWVudSA9IHRydWU7Cn0KZWxzZQp7CiAgICB0YWdzLnBhZE1lbnUgPSBmYWxzZTsKfWA7CgpsZXQgZGVsZXRlQnV0dG9uID0gY3JlYXRlKG1lbnVCdXR0b24pOwoKbWVudUJ1dHRvbi5wYWRNZW51ID0gdHJ1ZTsKbWVudUJ1dHRvbi5sYWJlbEFsaWdubWVudCA9ICJsZWZ0IjsKbWVudUJ1dHRvbi5jb2xvciA9IHRhZ3MuY29sb3I7Cm1lbnVCdXR0b24uZGVsZXRlQnV0dG9uID0gZ2V0TGluayhkZWxldGVCdXR0b24pOwoKaWYgKHBhZExvY2F0aW9ucy5sZW5ndGggPiAwKSAKewogICAgbWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJjaGVja19ib3hfb3V0bGluZV9ibGFuayI7CiAgICBtZW51QnV0dG9uLnBhZExvY2F0aW9uT3B0aW9uID0gdHJ1ZTsKICAgIG1lbnVCdXR0b24ub25DbGljayA9IGBAIGlmICh0YWdzLmZvcm1BZGRyZXNzID09ICJjaGVja19ib3hfb3V0bGluZV9ibGFuayIpCiAgICB7CiAgICAgICAgdGFncy5mb3JtQWRkcmVzcyA9ICJjaGVja19ib3giOwogICAgfQogICAgZWxzZQogICAgewogICAgICAgIHRhZ3MuZm9ybUFkZHJlc3MgPSAiY2hlY2tfYm94X291dGxpbmVfYmxhbmsiOwogICAgfQogICAgCiAgICBsaW5rcy5kZWxldGVCdXR0b24ub3B0aW9uQ2xpY2sodGhpc0JvdCk7YDsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZExvY2F0aW9ucy5sZW5ndGg7IGkrKykgCiAgICB7CiAgICAgICAgbWVudUJ1dHRvbi5wYWRNZW51U29ydE9yZGVyID0gaTsKICAgICAgICBtZW51QnV0dG9uLmxhYmVsID0gcGFkTG9jYXRpb25zW2ldOwoKICAgICAgICBjcmVhdGUobWVudUJ1dHRvbik7CiAgICB9Cn0KCm1lbnVCdXR0b24ub25DbGljayA9IG51bGw7Cm1lbnVCdXR0b24ucGFkTG9jYXRpb25PcHRpb24gPSBudWxsOwptZW51QnV0dG9uLnBhZE1lbnVTb3J0T3JkZXIgPSAtMTsKbWVudUJ1dHRvbi5sYWJlbCA9ICIrIjsKbWVudUJ1dHRvbi5mb3JtID0gImlucHV0IjsKbWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJtZWV0aW5nX3Jvb20iOwptZW51QnV0dG9uLm9uU3VibWl0ID0gYEAgaWYgKCF0aGF0KQp7CiAgICByZXR1cm47Cn0KCmxpbmtzLm1hbmFnZXIucGFkQWRkTG9jYXRpb24odGhhdC50ZXh0KTtgOwoKY3JlYXRlKG1lbnVCdXR0b24pOycA68aEnQT/HghwYWRTaGFyZQIEAOvGhJ0Eij1jQHNob3V0KCJwYWRNZW51UmVzZXQiKTsKCm9zLnNldENsaXBib2FyZChjb25maWdCb3QudGFncy51cmwpOwoKb3MudG9hc3QoInVybCBjb3BpZWQgdG8gY2xpcGJvYXJkIik7JwDrxoSdBP8eDnBhZEFkZExvY2F0aW9uAgQA68aEnQTuPYcBQHNob3V0KCJwYWRNZW51UmVzZXQiKTsKCmxldCBuZXdBcnJheSA9IHRhZ3MucGFkTG9jYXRpb25zOwoKbmV3QXJyYXkucHVzaCh0aGF0KTsKCnRhZ3MucGFkTG9jYXRpb25zID0gbmV3QXJyYXk7Cgp0aGlzQm90LnBhZEVkaXRNZW51KCk7JwDrxoSdBP8eEnBhZFJlbW92ZUxvY2F0aW9ucwIEAOvGhJ0E9j7lA0Bjb25zdCBwYWRNZW51T3B0aW9ucyA9IGdldEJvdHMoYnlNb2Qoe3BhZExvY2F0aW9uT3B0aW9uOiB0cnVlLCBmb3JtQWRkcmVzczogImNoZWNrX2JveCIsIHBhZE1lbnU6IHRydWV9KSk7CmNvbnN0IHJlbW92ZVRhcmdldHMgPSBbXTsKCmZvciAobGV0IGkgPSAwOyBpIDwgcGFkTWVudU9wdGlvbnMubGVuZ3RoOyBpKyspCnsKICAgIHJlbW92ZVRhcmdldHMucHVzaChwYWRNZW51T3B0aW9uc1tpXS50YWdzLmxhYmVsKTsKfQoKc2hvdXQoInBhZE1lbnVSZXNldCIpOwoKY29uc3QgcGFkTG9jYXRpb25zID0gdGFncy5wYWRMb2NhdGlvbnM7Cgpmb3IgKGxldCBqID0gMDsgaiA8IHJlbW92ZVRhcmdldHMubGVuZ3RoOyBqKyspCnsKICAgIGxldCB0YXJnZXRJbmRleCA9IHBhZExvY2F0aW9ucy5pbmRleE9mKHJlbW92ZVRhcmdldHNbal0pOwoKICAgIHBhZExvY2F0aW9ucy5zcGxpY2UodGFyZ2V0SW5kZXgsIDEpOwp9Cgp0aGlzQm90LnBhZEVkaXRNZW51KCk7KADrxoSdBP8eDWFiMUJvdFZlcnNpb24BfQMnAOvGhJ0E/x4KYWIxRmFjdG9yeQIEAOvGhJ0E3UIEdHJ1ZScA68aEnQT/HglhYjFJZ25vcmUCBADrxoSdBOJCBHRydWUnAOvGhJ0E/x4LZmFjdG9yeUljb24CBADrxoSdBOdCDG1lZXRpbmdfcm9vbScA68aEnQT/HglsaXN0ZW5pbmcCBADrxoSdBPRCBWZhbHNlJwDrxoSdBP8eC3Rvb2xNYW5hZ2VyAgQA68aEnQT6Qijwn5SXMTRlMWZkYWMtY2ZkNy00ZTdlLWJkZDEtOTY3YTQwODVhNzU1JwDrxoSdBP8eCG9uQ3JlYXRlAgQA68aEnQShQ1JAaWYgKCF0YWdzLnN5c3RlbSkKewogICAgbGV0IGJhc2VBcnJheSA9IFtdOwoKICAgIHRhZ3MucGFkTG9jYXRpb25zID0gYmFzZUFycmF5Owp9JwDrxoSdBP8eEGFiMU1lbnVTb3J0T3JkZXICBADrxoSdBPRDATEnAQRib3RzJGE1ZTJlZWRmLWNkMTctNGJmOC1hOTg2LWRkODJhYTFmZDg1OAEnAOvGhJ0E9kMFY29sb3ICBADrxoSdBPdDByM2MjI3NzMnAOvGhJ0E9kMEZm9ybQIEAOvGhJ0E/0MFaGVsaXgnAOvGhJ0E9kMEbW9kcwIEAOvGhJ0EhUQY8J+nrHsiY29sb3IiOiAiIzYyMjc3MyJ9JwDrxoSdBPZDBnN5c3RlbQIEAOvGhJ0EnEQQYWItMS5mYWN0b3J5Lm1vZCcA68aEnQT2QwphYjFGYWN0b3J5AgQA68aEnQStRAR0cnVlJwDrxoSdBPZDCWFiMUlnbm9yZQIEAOvGhJ0EskQEdHJ1ZScA68aEnQT2QwlsaXN0ZW5pbmcCBADrxoSdBLdEBWZhbHNlJwDrxoSdBPZDC2ZhY3RvcnlJY29uAgQA68aEnQS9RAVoZWxpeCcA68aEnQT2Qwt0b29sTWFuYWdlcgIEAOvGhJ0Ew0Qo8J+UlzE0ZTFmZGFjLWNmZDctNGU3ZS1iZGQxLTk2N2E0MDg1YTc1NScA68aEnQT2QwdvbkNsaWNrAgQA68aEnQTqRJMGQHNob3V0KCJtb2RNZW51UmVzZXQiKTsKCmNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gIm1vZE1lbnUiOwoKbWFza3Mub25HcmlkQ2xpY2sgPSBgQCBzaG91dCgibW9kTWVudVJlc2V0Iik7YDsKbWFza3MubW9kTWVudVJlc2V0ID0gYEAgY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSBudWxsOwpjb25maWdCb3QubWFza3MudGFnUG9ydGFsID0gbnVsbDsKCnRhZ1BvcnRhbEJvdC5tYXNrcy50YWdQb3J0YWxBbmNob3IgPSBudWxsOwoKY2xlYXJUYWdNYXNrcyh0aGlzQm90KTtgOwoKbGV0IG1vZE1lbnVCb3QgPSB7fTsKCm1vZE1lbnVCb3Quc3BhY2UgPSAidGVtcExvY2FsIjsKbW9kTWVudUJvdC5tb2RNZW51ID0gdHJ1ZTsKbW9kTWVudUJvdC5sYWJlbCA9ICJlZGl0IG1vZCI7Cm1vZE1lbnVCb3QuZm9ybUFkZHJlc3MgPSAiZWRpdCI7Cm1vZE1lbnVCb3QuY29sb3IgPSB0YWdzLmNvbG9yOwptb2RNZW51Qm90Lm1vZERpbWVuc2lvbiA9IHRoaXNCb3QuaWQgKyAiLm1vZHMiOwptb2RNZW51Qm90Lm1vZE1lbnVSZXNldCA9IGBAIGRlc3Ryb3kodGhpc0JvdCk7YDsKbW9kTWVudUJvdC5tZW51SXRlbVN0eWxlID0geyJib3JkZXItcmFkaXVzIjoiOHB4IiwgIm1hcmdpbi10b3AiOiIzcHgifTsKbW9kTWVudUJvdC5vbkNsaWNrID0gYEAgZGVzdHJveSh0aGlzQm90KTsKCmNvbmZpZ0JvdC5tYXNrcy50YWdQb3J0YWwgPSB0YWdzLm1vZERpbWVuc2lvbjsKCnRhZ1BvcnRhbEJvdC5tYXNrcy50YWdQb3J0YWxBbmNob3JQb2ludCA9ICJ0b3AiOwpgOwoKY3JlYXRlKG1vZE1lbnVCb3QpOycA68aEnQT2QwZvbkRyb3ACBADrxoSdBP5K6gJAaWYgKHRoYXQuZHJhZ0JvdCAhPSB0aGlzQm90IHx8IHRoYXQudG8uYm90LnRhZ3MuYWIxRmFjdG9yeSkKewogICAgcmV0dXJuOwp9CgphcHBseU1vZCh0aGF0LnRvLmJvdCwgdGFncy5tb2RzKTsKCmxldCBwcmV2aW9pdXNEaW1lbnNpb24gPSB0aGF0LmZyb20uZGltZW5zaW9uOwoKdGFnc1t0aGF0LnRvLmRpbWVuc2lvbl0gPSBudWxsOwp0YWdzW3ByZXZpb2l1c0RpbWVuc2lvbl0gPSB0cnVlOwp0YWdzW3ByZXZpb2l1c0RpbWVuc2lvbiArICJYIl0gPSB0aGF0LmZyb20ueDsKdGFnc1twcmV2aW9pdXNEaW1lbnNpb24gKyAiWSJdID0gdGhhdC5mcm9tLnk7CnRhZ3NbcHJldmlvaXVzRGltZW5zaW9uICsgIloiXSA9IHRoYXQuZnJvbS56OygA68aEnQT2Qw1hYjFCb3RWZXJzaW9uAX0NKADrxoSdBPZDCGFiMUlnb3JlAX4nAOvGhJ0E9kMQYWIxTWVudVNvcnRPcmRlcgIEAOvGhJ0E600BNCcBBGJvdHMkYzQ0ZWJjN2YtM2RmNy00ZThlLTk3ODEtMTRlMmNlOGUzNGM4AScA68aEnQTtTQtmYWN0b3J5SWNvbgIEAOvGhJ0E7k0LaW52ZW50b3J5XzInAOvGhJ0E7U0FY29sb3ICBADrxoSdBPpNByM5MDhCRkMoAOvGhJ0E7U0NYWIxQm90VmVyc2lvbgF9EicA68aEnQTtTQRmb3JtAgQA68aEnQSDTgZjaXJjbGUoAOvGhJ0E7U0Fc2NhbGUBfQInAOvGhJ0E7U0LdG9vbE1hbmFnZXICBADrxoSdBItOKPCflJcxNGUxZmRhYy1jZmQ3LTRlN2UtYmRkMS05NjdhNDA4NWE3NTUoAOvGhJ0E7U0EaG9tZQF+KADrxoSdBO1NBWhvbWVZAX4oAOvGhJ0E7U0FaG9tZVoBficA68aEnQTtTQZzY2FsZVoCBADrxoSdBLVOAzAuMSgA68aEnQTtTQVob21lWAF+JwDrxoSdBO1NBnN5c3RlbQIEAOvGhJ0Euk4VYWItMS5mYWN0b3J5LmJvdFN0b3JlJwDrxoSdBO1NBm9uRHJvcAIEAOvGhJ0E0E5/QGlmICh0aGF0LmRyYWdCb3QgPT0gdGhpc0JvdCB8fCB0aGF0LmRyYWdCb3QudGFncy5zcGFjZSAhPSAic2hhcmVkIikKewogICAgcmV0dXJuOwp9Cgp0aGlzQm90W3RhZ3Muc3RvcmVNb2RlICsgIk9uRHJvcCJdKHRoYXQpOycA68aEnQTtTRFib3RTdG9yZVJlamVjdEJvdAIEAOvGhJ0E0E+KAkB0aGF0LmRyYWdCb3QudGFnc1t0aGF0LnRvLmRpbWVuc2lvbl0gPSBudWxsOwp0aGF0LmRyYWdCb3QudGFnc1t0aGF0LmZyb20uZGltZW5zaW9uXSA9IHRydWU7CnRoYXQuZHJhZ0JvdC50YWdzW3RoYXQuZnJvbS5kaW1lbnNpb24rIlgiXSA9IHRoYXQuZnJvbS54Owp0aGF0LmRyYWdCb3QudGFnc1t0aGF0LmZyb20uZGltZW5zaW9uKyJZIl0gPSB0aGF0LmZyb20ueTsKdGhhdC5kcmFnQm90LnRhZ3NbdGhhdC5mcm9tLmRpbWVuc2lvbisiWiJdID0gdGhhdC5mcm9tLno7KADrxoSdBO1NCG9uQ3JlYXRlAX4nAOvGhJ0E7U0Jc3RvcmVNb2RlAgQA68aEnQTcUQl1bmxpbWl0ZWQnAOvGhJ0E7U0PdW5saW1pdGVkT25Ecm9wAgQA68aEnQTmUWVAaWYgKHRhZ3MudGVtcGxhdGUpCnsKICAgIHRoaXNCb3QuYm90U3RvcmVSZWplY3RCb3QodGhhdCk7CgogICAgcmV0dXJuOwp9Cgp0aGlzQm90LmFkZFRlbXBsYXRlKHRoYXQpOycA68aEnQTtTQ1saW1pdGVkT25Ecm9wAgQA68aEnQTMUokCQGlmICgodGFncy5ib3RTdG9yZUlEICYmIHRoYXQuZHJhZ0JvdC50YWdzLmJvdFN0b3JlSUQgIT0gdGFncy5ib3RTdG9yZUlEKSB8fCB0YWdzLm1heENvdW50ID09IHRhZ3MubGFiZWwpCnsKICAgIHRoaXNCb3QuYm90U3RvcmVSZWplY3RCb3QodGhhdCk7CgogICAgcmV0dXJuOwp9Cgp0YWdzLmxhYmVsKys7CgppZiAodGFncy50ZW1wbGF0ZSkKewogICAgZGVzdHJveSh0aGF0LmRyYWdCb3QpOwp9CmVsc2UKewogICAgdGhpc0JvdC5hZGRUZW1wbGF0ZSh0aGF0KTsKfScA68aEnQTtTQthZGRUZW1wbGF0ZQIEAOvGhJ0E1lTjC0B0YWdzLnRlbXBsYXRlID0gZ2V0TGluayh0aGF0LmRyYWdCb3QpOwoKdGhhdC5kcmFnQm90LnRhZ3MubGlzdGVuaW5nID0gZmFsc2U7CnRoYXQuZHJhZ0JvdC50YWdzLnBvaW50YWJsZSA9IGZhbHNlOwp0aGF0LmRyYWdCb3QudGFncy50cmFuc2Zvcm1lciA9IHRoaXNCb3QuaWQ7CnRoYXQuZHJhZ0JvdC50YWdzLmNyZWF0b3IgPSB0aGlzQm90LmlkOwp0aGF0LmRyYWdCb3QudGFncy50cmFuc2Zvcm1lciA9IHRoaXNCb3QuaWQ7CnRoYXQuZHJhZ0JvdC50YWdzW3RoYXQudG8uZGltZW5zaW9uICsgIlgiXSA9IDA7CnRoYXQuZHJhZ0JvdC50YWdzW3RoYXQudG8uZGltZW5zaW9uICsgIlkiXSA9IDA7CnRoYXQuZHJhZ0JvdC50YWdzW3RoYXQudG8uZGltZW5zaW9uICsgIloiXSA9IDU7CnRoYXQuZHJhZ0JvdC50YWdzLnNjYWxlID0gdGhhdC5kcmFnQm90LnRhZ3Muc2NhbGUgPyB0aGF0LmRyYWdCb3QudGFncy5zY2FsZSAvIDIgOiAwLjU7CnRoYXQuZHJhZ0JvdC50YWdzLnNjYWxlWCA9IHRoYXQuZHJhZ0JvdC50YWdzLnNjYWxlWCA/IHRoYXQuZHJhZ0JvdC50YWdzLnNjYWxlWCAvIDIgOiAxOwp0aGF0LmRyYWdCb3QudGFncy5zY2FsZVkgPSB0aGF0LmRyYWdCb3QudGFncy5zY2FsZVkgPyB0aGF0LmRyYWdCb3QudGFncy5zY2FsZVkgLyAyIDogMTsKdGhhdC5kcmFnQm90LnRhZ3Muc2NhbGVaID0gdGhhdC5kcmFnQm90LnRhZ3Muc2NhbGVaID8gdGhhdC5kcmFnQm90LnRhZ3Muc2NhbGVaICogMTAgOiAxMDsKCmlmICh0YWdzLnN0b3JlTW9kZSA9PSAibGltaXRlZCIpCnsKICAgIGxldCBuZXdTdG9yZUlEID0gdXVpZCgpOwoKICAgIHRhZ3MuYm90U3RvcmVJRCA9IG5ld1N0b3JlSUQ7CgogICAgdGhhdC5kcmFnQm90LnRhZ3MuYm90U3RvcmVJRCA9IG5ld1N0b3JlSUQ7Cn0KCmxldCBoaXRCb3ggPSB7fTsKCmhpdEJveC50cmFuc2Zvcm1lciA9IHRoaXNCb3QuaWQ7CmhpdEJveC5jb2xvciA9ICJjbGVhciI7CmhpdEJveC5kcmFnZ2FibGUgPSBmYWxzZTsKaGl0Qm94Lm1hbmFnZXIgPSBnZXRMaW5rKHRoaXNCb3QpOwpoaXRCb3gub25EcmFnID0gYEAgbGlua3MubWFuYWdlci50ZW1wbGF0ZURyYWcodGhhdCk7YDsKaGl0Qm94LnNjYWxlID0gbGlua3MudGVtcGxhdGUudGFncy5zY2FsZTsKaGl0Qm94LnNjYWxlWCA9IGxpbmtzLnRlbXBsYXRlLnRhZ3Muc2NhbGVYOwpoaXRCb3guc2NhbGVZID0gbGlua3MudGVtcGxhdGUudGFncy5zY2FsZVk7CmhpdEJveC5zY2FsZVogPSBsaW5rcy50ZW1wbGF0ZS50YWdzLnNjYWxlWjsKaGl0Qm94W3RoYXQudG8uZGltZW5zaW9uXSA9IHRydWU7CmhpdEJveFt0aGF0LnRvLmRpbWVuc2lvbiArICJYIl0gPSAwOwpoaXRCb3hbdGhhdC50by5kaW1lbnNpb24gKyAiWSJdID0gMDsKaGl0Qm94W3RoYXQudG8uZGltZW5zaW9uICsgIloiXSA9IDU7CgpsZXQgbmV3SGl0Ym94ID0gY3JlYXRlKGhpdEJveCk7CgpsaW5rcy5oaXRCb3ggPSBnZXRMaW5rKG5ld0hpdGJveCk7Cgp0aGlzQm90LmluaXRpYXRlQm90U3RvcmVBbmltYXRpb24oKTsnAOvGhJ0E7U0Hb25DbGljawIEAOvGhJ0EumD8CkBzaG91dCgiYm90U3RvcmVNZW51UmVzZXQiKTsKCmNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gImJvdFN0b3JlTWVudSI7CgptYXNrcy5vbkdyaWRDbGljayA9IGBAIHNob3V0KCJib3RTdG9yZU1lbnVSZXNldCIpO2A7Cm1hc2tzLmJvdFN0b3JlTWVudVJlc2V0ID0gYEAgY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSBudWxsOwoKY2xlYXJUYWdNYXNrcyh0aGlzQm90KTtgOwoKbGV0IG1lbnVCdXR0b24gPSB7fTsKCm1lbnVCdXR0b24uc3BhY2UgPSAidGVtcExvY2FsIjsKbWVudUJ1dHRvbi5ib3RTdG9yZU1lbnUgPSB0cnVlOwptZW51QnV0dG9uLmJvdFN0b3JlTWVudVJlc2V0ID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwptZW51QnV0dG9uLm1lbnVJdGVtU3R5bGUgPSB7ImJvcmRlci1yYWRpdXMiOiI4cHgiLCAibWFyZ2luLXRvcCI6IjNweCJ9OwptZW51QnV0dG9uLmxhYmVsQWxpZ25tZW50ID0gImxlZnQiOwptZW51QnV0dG9uLmNvbG9yID0gdGFncy5jb2xvcjsKbWVudUJ1dHRvbi5tYW5hZ2VyID0gZ2V0TGluayh0aGlzQm90KTsKbWVudUJ1dHRvbi5vbkNsaWNrID0gYEAgc2hvdXQoImJvdFN0b3JlTWVudVJlc2V0Iik7CiAgICAKbGlua3MubWFuYWdlci5jaGFuZ2VTdG9yZVN0YXRlKCk7YDsKCmlmICh0YWdzLnN0b3JlTW9kZSA9PSAidW5saW1pdGVkIikKewogICAgbWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJpbnZlbnRvcnkiOwogICAgbWVudUJ1dHRvbi5sYWJlbCA9ICJjaGFuZ2UgdG8gbGltaXRlZCI7CgogICAgY3JlYXRlKG1lbnVCdXR0b24pOwp9CmVsc2UKewogICAgbWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJmaWxlX2NvcHkiOwogICAgbWVudUJ1dHRvbi5sYWJlbCA9ICJjaGFuZ2UgdG8gdW5saW1pdGVkIjsKCiAgICBjcmVhdGUobWVudUJ1dHRvbik7CgogICAgbWVudUJ1dHRvbi5sYWJlbCA9ICIgICAgIjsKICAgIG1lbnVCdXR0b24ubGFiZWxBbGlnbm1lbnQgPSAiY2VudGVyIjsKICAgIG1lbnVCdXR0b24ub25DbGljayA9IGBAIGxpbmtzLm1hbmFnZXIudGFncy50ZW1wbGF0ZUxvY2sgPSAhbGlua3MubWFuYWdlci50YWdzLnRlbXBsYXRlTG9jawogICAgCiAgICBpZiAobGlua3MubWFuYWdlci50YWdzLnRlbXBsYXRlTG9jaykKICAgIHsKICAgICAgICB0YWdzLmZvcm1BZGRyZXNzID0gImxvY2siOwogICAgfQogICAgZWxzZQogICAgewogICAgICAgIHRhZ3MuZm9ybUFkZHJlc3MgPSAibG9ja19vcGVuIjsKICAgIH1gOwoKICAgIGlmICh0YWdzLnRlbXBsYXRlTG9jaykKICAgIHsKICAgICAgICBtZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImxvY2siOwogICAgfQogICAgZWxzZQogICAgewogICAgICAgIG1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAibG9ja19vcGVuIjsKICAgIH0KCiAgICBjcmVhdGUobWVudUJ1dHRvbik7Cn0KCicA68aEnQTtTQx0ZW1wbGF0ZURyYWcCBADrxoSdBLdrgQdAaWYgKHRhZ3Muc3RvcmVNb2RlID09ICJsaW1pdGVkIikKewogICAgaWYgKHRhZ3MubGFiZWwgPT0gMCkKICAgIHsKICAgICAgICByZXR1cm47CiAgICB9Cn0KCmxldCBuZXdCb3QgPSBnZXRNb2QobGlua3MudGVtcGxhdGUpOwoKbmV3Qm90W3RoYXQuZnJvbS5kaW1lbnNpb25dID0gdHJ1ZTsKbmV3Qm90W3RoYXQuZnJvbS5kaW1lbnNpb24gKyAiWCJdID0gdGFnc1t0aGF0LmZyb20uZGltZW5zaW9uICsgIlgiXTsKbmV3Qm90W3RoYXQuZnJvbS5kaW1lbnNpb24gKyAiWSJdID0gdGFnc1t0aGF0LmZyb20uZGltZW5zaW9uICsgIlkiXTsKbmV3Qm90W3RoYXQuZnJvbS5kaW1lbnNpb24gKyAiWiJdID0gMDsKbmV3Qm90Lmxpc3RlbmluZyA9IG51bGw7Cm5ld0JvdC5wb2ludGFibGUgPSBudWxsOwpuZXdCb3QudHJhbnNmb3JtZXIgPSBudWxsOwpuZXdCb3QuY3JlYXRvciA9IG51bGw7Cm5ld0JvdC50cmFuc2Zvcm1lciA9IG51bGw7Cm5ld0JvdC5zY2FsZSA9IG5ld0JvdC5zY2FsZSA9PSAwLjUgPyBudWxsIDogbmV3Qm90LnNjYWxlICogMjsKbmV3Qm90LnNjYWxlWCA9IG5ld0JvdC5zY2FsZVggPT0gMSA/IG51bGwgOiBuZXdCb3Quc2NhbGVYICogMjsKbmV3Qm90LnNjYWxlWSA9IG5ld0JvdC5zY2FsZVkgPT0gMSA/IG51bGwgOiBuZXdCb3Quc2NhbGVZICogMjsKbmV3Qm90LnNjYWxlWiA9IG5ld0JvdC5zY2FsZVogPT0gMTAgPyBudWxsIDogbmV3Qm90LnNjYWxlWiAvIDEwOwpuZXdCb3QuYm90U3RvcmVJRCA9IHRhZ3MuYm90U3RvcmVJRDsKCmxldCBjcmVhdGVkQm90ID0gY3JlYXRlKG5ld0JvdCk7Cgpvcy5yZXBsYWNlRHJhZ0JvdChjcmVhdGVkQm90KTsKCmlmICh0YWdzLnN0b3JlTW9kZSA9PSAibGltaXRlZCIpCnsKICAgIHRoaXNCb3QucmVkdWNlTGltaXRlZENvdW50KCk7Cn0nAOvGhJ0E7U0ScmVkdWNlTGltaXRlZENvdW50AgQA68aEnQS5co0CQHRhZ3MubGFiZWwtLTsKCmlmICh0YWdzLmxhYmVsID09IDAgJiYgIXRhZ3MudGVtcGxhdGVMb2NrKQp7CiAgICBjbGVhckludGVydmFsKHRhZ3Muc3RvcmVJbnRlcnZhbCk7CgogICAgZGVzdHJveShsaW5rcy50ZW1wbGF0ZSk7CiAgICBkZXN0cm95KGxpbmtzLmhpdEJveCk7CgogICAgdGFncy50ZW1wbGF0ZSA9IG51bGw7CiAgICB0YWdzLmhpdEJveCA9IG51bGw7CiAgICB0YWdzLmJvdFN0b3JlSUQgPSBudWxsOwogICAgbWFza3Muc3RvcmVJbnRlcnZhbCA9IG51bGw7Cn0nAOvGhJ0E7U0KYWIxRmFjdG9yeQIEAOvGhJ0Ex3QEdHJ1ZScA68aEnQTtTQlhYjFJZ25vcmUCBADrxoSdBMx0BHRydWUnAOvGhJ0E7U0JbGlzdGVuaW5nAgQA68aEnQTRdAVmYWxzZScA68aEnQTtTRBjaGFuZ2VTdG9yZVN0YXRlAgQA68aEnQTXdO0EQGlmICh0YWdzLnN0b3JlTW9kZSA9PSAidW5saW1pdGVkIikKewogICAgdGFncy5zdG9yZU1vZGUgPSAibGltaXRlZCI7CgogICAgY29uc3QgbWF4Q291bnQgPSBhd2FpdCBvcy5zaG93SW5wdXQoMSwgewogICAgICAgIHRpdGxlOiAnY2hvb3NlIG1heCcKICAgIH0pOwoKICAgIGlmICghbWF4Q291bnQpCiAgICB7CiAgICAgICAgbWF4Q291bnQgPSAxOwogICAgfQoKICAgIHRhZ3MubWF4Q291bnQgPSBtYXhDb3VudDsKCiAgICBpZiAodGFncy50ZW1wbGF0ZSkKICAgIHsKICAgICAgICBsZXQgbmV3U3RvcmVJRCA9IHV1aWQoKTsKCiAgICAgICAgdGFncy5ib3RTdG9yZUlEID0gbmV3U3RvcmVJRDsKCiAgICAgICAgbGlua3MudGVtcGxhdGUudGFncy5ib3RTdG9yZUlEID0gbmV3U3RvcmVJRDsKCiAgICAgICAgdGFncy5sYWJlbCA9IDE7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgdGFncy5sYWJlbCA9IDA7CiAgICB9Cn0KZWxzZQp7CiAgICB0YWdzLnN0b3JlTW9kZSA9ICJ1bmxpbWl0ZWQiOwoKICAgIHRhZ3MubGFiZWwgPSBudWxsOwogICAgdGFncy5tYXhDb3VudCA9IG51bGw7CiAgICB0YWdzLnRlbXBsYXRlTG9jayA9IG51bGw7CiAgICB0YWdzLmJvdFN0b3JlSUQgPSBudWxsOwp9JwDrxoSdBO1NGWluaXRpYXRlQm90U3RvcmVBbmltYXRpb24CBADrxoSdBMV5iwFAaWYgKCF0YWdzLnN0b3JlSW50ZXJ2YWwpCnsKICAgIHRoaXNCb3QuYW5pbWF0ZUJvdFN0b3JlKCk7CgogICAgbWFza3Muc3RvcmVJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHRoaXNCb3QuYW5pbWF0ZUJvdFN0b3JlKCksIDIwMDApOwp9JwDrxoSdBO1ND2FuaW1hdGVCb3RTdG9yZQIEAOvGhJ0E0XqaAkBsZXQgcm90WiA9IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWwgKyAiUm90YXRpb25aIjsKbGV0IHRhcmdldFJvdGF0aW9uID0gMzYwICogTWF0aC5QSS8xODA7Cgphd2FpdCBhbmltYXRlVGFnKGxpbmtzLnRlbXBsYXRlLCByb3RaLCB7CiAgICBmcm9tVmFsdWU6IDAsCiAgICB0b1ZhbHVlOiB0YXJnZXRSb3RhdGlvbiwKICAgIGVhc2luZzp7CiAgICAgICAgbW9kZTogImlub3V0IiwKICAgICAgICB0eXBlOiAibGluZWFyIgogICAgfSwKICAgIGR1cmF0aW9uOiAyCn0pLmNhdGNoKGUgPT4ge30pOycA68aEnQTtTQ9vbkluc3RTdHJlYW1pbmcCBADrxoSdBOx8QEBpZiAodGFncy50ZW1wbGF0ZSkKewogICAgdGhpc0JvdC5pbml0aWF0ZUJvdFN0b3JlQW5pbWF0aW9uKCk7Cn0nAOvGhJ0E7U0Jb25EZXN0cm95AgQA68aEnQStfSNAY2xlYXJJbnRlcnZhbCh0YWdzLnN0b3JlSW50ZXJ2YWwpOycA68aEnQTtTRBhYjFNZW51U29ydE9yZGVyAgQA68aEnQTRfQE1JwEEYm90cyRkMTQwMjA0Yy01NWM3LTRlYzMtOTM1NC05M2FlNzYyNmE4MzYBKADrxoSdBNN9BnNjYWxlWgF7P4R64UeuFHsoAOvGhJ0E030Fc2NhbGUBez/jhR64UeuFJwDrxoSdBNN9BWNvbG9yAgQA68aEnQTWfQRncmF5JwDrxoSdBNN9C3N0cm9rZUNvbG9yAgQA68aEnQTbfQcjNUU1ODgwJwDrxoSdBNN9CWxpbmVDb2xvcgIEAOvGhJ0E430HIzVFNTg4MCgA68aEnQTTfQhkdXJhdGlvbgF9AScA68aEnQTTfQplYXNpbmdUeXBlAgQA68aEnQTsfQZsaW5lYXInAOvGhJ0E030KZWFzaW5nTW9kZQIEAOvGhJ0E830FaW5vdXQnAOvGhJ0E030JbGluZVN0eWxlAgQA68aEnQT5fQRsaW5lJwDrxoSdBNN9BnN5c3RlbQIEAOvGhJ0E/n0SYWItMS5mYWN0b3J5LnRyYWNrJwDrxoSdBNN9CmFiMUZhY3RvcnkCBADrxoSdBJF+BHRydWUnAOvGhJ0E030JYWIxSWdub3JlAgQA68aEnQSWfgR0cnVlJwDrxoSdBNN9C3Rvb2xNYW5hZ2VyAgQA68aEnQSbfijwn5SXMTRlMWZkYWMtY2ZkNy00ZTdlLWJkZDEtOTY3YTQwODVhNzU1JwDrxoSdBNN9C2ZhY3RvcnlJY29uAgQA68aEnQTCfgh0aW1lbGluZSgA68aEnQTTfQ1hYjFCb3RWZXJzaW9uAX0NJwDrxoSdBNN9CG9uQ3JlYXRlAgQA68aEnQTMfm9AdGFncy5jb2xvciA9ICJjbGVhciI7CgppZiAoIXRhZ3MubGluZVRvKQp7CiAgICB0aGlzQm90LmFkZFRyYWNrTm9kZSh7ZGltZW5zaW9uOiBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsfSk7Cn0nAOvGhJ0E030MYWRkVHJhY2tOb2RlAgQA68aEnQS8f9cFQGxldCBib3RNb2QgPSBnZXRNb2QodGhpc0JvdCk7Cgpib3RNb2RbdGhhdC5kaW1lbnNpb24gKyAiWSJdID0gYm90TW9kW3RoYXQuZGltZW5zaW9uICsgIlkiXSAtIDM7Cgpib3RNb2QubGluZVRvID0gdGhpc0JvdC5pZDsKYm90TW9kLmNyZWF0b3IgPSB0aGlzQm90LmlkOwoKbGV0IG5vZGUyID0gY3JlYXRlKGJvdE1vZCk7Cgp0YWdzLmxpbmVUbyA9IG5vZGUyLmlkOwp0YWdzLmNyZWF0b3IgPSBub2RlMi5pZDsKCmxldCBub2RlMyA9IGNyZWF0ZShib3RNb2QpOwoKYm90TW9kW3RoYXQuZGltZW5zaW9uICsgIlgiXSA9IGJvdE1vZFt0aGF0LmRpbWVuc2lvbiArICJYIl0gKyAzOwoKbGV0IG5vZGU0ID0gY3JlYXRlKGJvdE1vZCk7Cgpub2RlMy50YWdzLmxpbmVUbyA9IG5vZGU0LmlkOwpub2RlMy50YWdzLmNyZWF0b3IgPSBub2RlNC5pZDsKbm9kZTQudGFncy5saW5lVG8gPSBub2RlMy5pZDsKbm9kZTQudGFncy5jcmVhdG9yID0gbm9kZTMuaWQ7CgpsZXQgbm9kZTUgPSBjcmVhdGUoYm90TW9kKTsKCmJvdE1vZFt0aGF0LmRpbWVuc2lvbiArICJZIl0gPSBib3RNb2RbdGhhdC5kaW1lbnNpb24gKyAiWSJdIC0gMzsKCmxldCBub2RlNiA9IGNyZWF0ZShib3RNb2QpOwoKbm9kZTUudGFncy5saW5lVG8gPSBub2RlNi5pZDsKbm9kZTUudGFncy5jcmVhdG9yID0gbm9kZTYuaWQ7Cm5vZGU2LnRhZ3MubGluZVRvID0gbm9kZTUuaWQ7Cm5vZGU2LnRhZ3MuY3JlYXRvciA9IG5vZGU1LmlkOycA68aEnQTTfQxhYjFUcmFja05vZGUCBADrxoSdBJSFAQR0cnVlJwDrxoSdBNN9CWxpc3RlbmluZwIEAOvGhJ0EmYUBBWZhbHNlJwDrxoSdBNN9Bm9uRHJvcAIEAOvGhJ0En4UBlwVAaWYgKHRoYXQuZHJhZ0JvdC50YWdzLmFiMVRyYWNrTm9kZSkKewogICAgdGFnc1tjb25maWdCb3QudGFncy5ncmlkUG9ydGFsICsgIlgiXSA9IE1hdGgucm91bmQodGFnc1tjb25maWdCb3QudGFncy5ncmlkUG9ydGFsICsgIlgiXSk7CiAgICB0YWdzW2NvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWwgKyAiWSJdID0gTWF0aC5yb3VuZCh0YWdzW2NvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWwgKyAiWSJdKTsKCiAgICByZXR1cm47Cn0KZWxzZSBpZiAodGhhdC5kcmFnQm90LnRhZ3MuZmFjdG9yeUljb24gPT0gImhlbGl4IikKewogICAgdGhpc0JvdC5hcHBseU1vZFRvVHJhY2tOb2RlKHRoYXQpOwoKICAgIHRoYXQuZHJhZ0JvdC50YWdzW3RoYXQuZnJvbS5kaW1lbnNpb24gKyAiWCJdID0gdGhhdC5mcm9tLng7CiAgICB0aGF0LmRyYWdCb3QudGFnc1t0aGF0LmZyb20uZGltZW5zaW9uICsgIlkiXSA9IHRoYXQuZnJvbS55OwoKICAgIHJldHVybjsKfQoKdGhhdC5kcmFnQm90Lm1hc2tzLm9uRHJhZyA9ICJAIGNsZWFyVGltZW91dCh0YWdzLnRyYWNrVGltZW91dCk7IGNsZWFyQW5pbWF0aW9ucyh0aGlzQm90KTsiOwoKdGhpc0JvdC5hbmltYXRlVHJhY2soe2FuaW1hdGVkQm90OiB0aGF0LmRyYWdCb3QsIHRhcmdldE5vZGU6IGdldEJvdCgiaWQiLCB0YWdzLmxpbmVUbyl9KTsnAOvGhJ0E030MYW5pbWF0ZVRyYWNrAgQA68aEnQS3igGQDUBsZXQgY3VycmVudERpbSA9IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA/IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA6IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWw7CmxldCBhbmltYXRlZEJvdCA9IHRoYXQuYW5pbWF0ZWRCb3Q7CmxldCBuZXh0Tm9kZSA9IHRoYXQudGFyZ2V0Tm9kZTsKbGV0IG9yaWdpbk5vZGUgPSB0aGlzQm90OwoKaWYgKG5leHROb2RlLmlkID09IHRoaXNCb3QuaWQpCnsKICAgIGxldCBub2RlU3RhY2sgPSBnZXRCb3RzKGJ5TW9kKHthYjFUcmFja05vZGU6IHRydWUsIFtjdXJyZW50RGltXTogdHJ1ZSwgW2N1cnJlbnREaW0gKyAiWCJdOiB0YWdzW2N1cnJlbnREaW0gKyAiWCJdLCBbY3VycmVudERpbSArICJZIl06IHRhZ3NbY3VycmVudERpbSArICJZIl19KSk7CgogICAgaWYgKG5vZGVTdGFjay5sZW5ndGggPj0gMykKICAgIHsKICAgICAgICBvcmlnaW5Ob2RlID0gbm9kZVN0YWNrW21hdGgucmFuZG9tSW50KDAsIG5vZGVTdGFjay5sZW5ndGgpXTsKCiAgICAgICAgbmV4dE5vZGUgPSBnZXRCb3QoImlkIiwgb3JpZ2luTm9kZS50YWdzLmxpbmVUbyk7CiAgICB9CiAgICBlbHNlIGlmIChub2RlU3RhY2subGVuZ3RoID4gMSkKICAgIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVTdGFjay5sZW5ndGg7IGkrKykKICAgICAgICB7CiAgICAgICAgICAgIGlmIChub2RlU3RhY2tbaV0uaWQgIT0gdGhpc0JvdC5pZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgb3JpZ2luTm9kZSA9IG5vZGVTdGFja1tpXTsKCiAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IGdldEJvdCgiaWQiLCBvcmlnaW5Ob2RlLnRhZ3MubGluZVRvKTsKCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBuZXh0Tm9kZSA9IGdldEJvdCgiaWQiLCB0YWdzLmxpbmVUbyk7CiAgICB9Cn0KCmFuaW1hdGVkQm90Lm1hc2tzLnRyYWNrVGltZW91dCA9IHNldFRpbWVvdXQoKCk9PiB3aGlzcGVyKG5leHROb2RlLCAiYW5pbWF0ZVRyYWNrIiwge2FuaW1hdGVkQm90OiBhbmltYXRlZEJvdCwgdGFyZ2V0Tm9kZTogbmV4dE5vZGV9KSwgdGFncy5kdXJhdGlvbiAqIDEwMDApOwoKaWYgKG9yaWdpbk5vZGUudGFncy5tb2RzKQp7CiAgICBhcHBseU1vZChhbmltYXRlZEJvdCwgb3JpZ2luTm9kZS50YWdzLm1vZHMpOwp9Cgphd2FpdCBhbmltYXRlVGFnKGFuaW1hdGVkQm90LCB7CiAgICBmcm9tVmFsdWU6IHsKICAgICAgICBbY3VycmVudERpbSArICJYIl06IG9yaWdpbk5vZGUudGFnc1tjdXJyZW50RGltICsgIlgiXSwKICAgICAgICBbY3VycmVudERpbSArICJZIl06IG9yaWdpbk5vZGUudGFnc1tjdXJyZW50RGltICsgIlkiXQogICAgfSwKICAgIHRvVmFsdWU6IHsKICAgICAgICBbY3VycmVudERpbSArICJYIl06IG5leHROb2RlLnRhZ3NbY3VycmVudERpbSArICJYIl0sCiAgICAgICAgW2N1cnJlbnREaW0gKyAiWSJdOiBuZXh0Tm9kZS50YWdzW2N1cnJlbnREaW0gKyAiWSJdCiAgICB9LAogICAgZHVyYXRpb246IHRhZ3MuZHVyYXRpb24sCiAgICBlYXNpbmc6ewogICAgICAgIHR5cGU6IHRhZ3MuZWFzaW5nVHlwZSwKICAgICAgICBtb2RlOiB0YWdzLmVhc2luZ01vZGUKICAgIH0sCiAgICB0YWdNYXNrU3BhY2U6ICJ0ZW1wTG9jYWwiCn0pLmNhdGNoKGUgPT4ge30pOycA68aEnQTTfQdvbkNsaWNrAgQA68aEnQTIlwHXCEBzaG91dCgiYWIxVHJhY2tNZW51UmVzZXQiKTsKCmNvbnN0IG1lbnVUeXBlID0gdGhhdC5tZW51VHlwZSA/IHRoYXQubWVudVR5cGUgOiAiYmFzZSI7CmNvbnN0IG1lbnVUYWcgPSB0YWdzW21lbnVUeXBlICsgIkFCMVRyYWNrTWVudSJdOwoKY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSAiYWIxVHJhY2tNZW51IjsKCm1hc2tzLm9uR3JpZENsaWNrID0gYEAgc2hvdXQoImFiMVRyYWNrTWVudVJlc2V0Iik7YDsKbWFza3MuYWIxVHJhY2tNZW51UmVzZXQgPSBgQCBjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9IG51bGw7CgpjbGVhclRhZ01hc2tzKHRoaXNCb3QpO2A7CgpsZXQgbWVudUJ1dHRvbiA9IHt9OwoKbWVudUJ1dHRvbi5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwptZW51QnV0dG9uLmFiMVRyYWNrTWVudSA9IHRydWU7Cm1lbnVCdXR0b24uYWIxVHJhY2tNZW51UmVzZXQgPSAiQCBkZXN0cm95KHRoaXNCb3QpOyI7Cm1lbnVCdXR0b24ubWVudUl0ZW1TdHlsZSA9IHsiYm9yZGVyLXJhZGl1cyI6IjhweCIsICJtYXJnaW4tdG9wIjoiM3B4In07Cm1lbnVCdXR0b24ubGFiZWxBbGlnbm1lbnQgPSAibGVmdCI7Cm1lbnVCdXR0b24ubGFiZWxDb2xvciA9ICIjZmZmZmZmIjsKbWVudUJ1dHRvbi5jb2xvciA9IHRhZ3Muc3Ryb2tlQ29sb3I7Cm1lbnVCdXR0b24ubWFuYWdlciA9IGdldExpbmsodGhpc0JvdCk7Cgpmb3IgKGxldCBpID0gMDsgaSA8IHRhZ3NbbWVudVR5cGUgKyAiQUIxVHJhY2tNZW51Il0ubGVuZ3RoOyBpKyspCnsKICAgIGNyZWF0ZShtZW51QnV0dG9uLCB0YWdzW21lbnVUeXBlICsgIkFCMVRyYWNrTWVudSJdW2ldKTsKfQoKaWYgKHRhZ3MubW9kcykKewogICAgbWVudUJ1dHRvbi5sYWJlbCA9ICJyZW1vdmUgbW9kIjsKICAgIG1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiaGVsaXgiOwogICAgbWVudUJ1dHRvbi5vbkNsaWNrID0gYEAgbGlua3MubWFuYWdlci50YWdzLm1vZHMgPSBudWxsOwogICAgbGlua3MubWFuYWdlci50YWdzLmNvbG9yID0gImNsZWFyIjsKICAgIGxpbmtzLm1hbmFnZXIudGFncy5mb3JtID0gbnVsbDsKICAgIAogICAgc2hvdXQoJ2FiMVRyYWNrTWVudVJlc2V0Jyk7YDsKCiAgICBjcmVhdGUobWVudUJ1dHRvbik7Cn0nAOvGhJ0E030QYmFzZUFCMVRyYWNrTWVudQIEAOvGhJ0EoKAB1QLwn6esW3sib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIudXBkYXRlVHJhY2tEdXJhdGlvbigpOyIsICJmb3JtQWRkcmVzcyI6ICJhdl90aW1lciIsICJsYWJlbCI6ICJkdXJhdGlvbiJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLm9uQ2xpY2soe21lbnVUeXBlOiAnZWFzaW5nJ30pOyIsICJmb3JtQWRkcmVzcyI6ICJ0cmVuZGluZ19mbGF0IiwgImxhYmVsIjogImVhc2luZyB0eXBlIn0sCnsib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIub25DbGljayh7bWVudVR5cGU6ICdtb2RlJ30pOyIsICJmb3JtQWRkcmVzcyI6ICJ0cmVuZGluZ191cCIsICJsYWJlbCI6ICJlYXNpbmcgbW9kZSJ9XScA68aEnQTTfRN1cGRhdGVUcmFja0R1cmF0aW9uAgQA68aEnQT0ogGjAUBzaG91dCgiYWIxVHJhY2tNZW51UmVzZXQiKTsKCmxldCBpbnB1dCA9IGF3YWl0IG9zLnNob3dJbnB1dCh0YWdzLmR1cmF0aW9uLCB7CiAgICB0aXRsZTogImR1cmF0aW9uIgp9KTsKCmlmIChpbnB1dCAmJiAhaXNOYU4oaW5wdXQpKQp7CiAgICB0YWdzLmR1cmF0aW9uID0gaW5wdXQ7Cn0nAOvGhJ0E030SZWFzaW5nQUIxVHJhY2tNZW51AgQA68aEnQSYpAH3CfCfp6xbeyJvbkNsaWNrIjogIkAgbGlua3MubWFuYWdlci50YWdzLmVhc2luZ1R5cGUgPSB0YWdzLmxhYmVsOyBzaG91dCgnYWIxVHJhY2tNZW51UmVzZXQnKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXJyb3dfcmlnaHQiLCAibGFiZWwiOiAibGluZWFyIn0sCnsib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIudGFncy5lYXNpbmdUeXBlID0gdGFncy5sYWJlbDsgc2hvdXQoJ2FiMVRyYWNrTWVudVJlc2V0Jyk7IiwgImZvcm1BZGRyZXNzIjogImFycm93X3JpZ2h0IiwgImxhYmVsIjogInF1YWRyYXRpYyJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnRhZ3MuZWFzaW5nVHlwZSA9IHRhZ3MubGFiZWw7IHNob3V0KCdhYjFUcmFja01lbnVSZXNldCcpOyIsICJmb3JtQWRkcmVzcyI6ICJhcnJvd19yaWdodCIsICJsYWJlbCI6ICJjdWJpYyJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnRhZ3MuZWFzaW5nVHlwZSA9IHRhZ3MubGFiZWw7IHNob3V0KCdhYjFUcmFja01lbnVSZXNldCcpOyIsICJmb3JtQWRkcmVzcyI6ICJhcnJvd19yaWdodCIsICJsYWJlbCI6ICJxdWFydGljIn0sCnsib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIudGFncy5lYXNpbmdUeXBlID0gdGFncy5sYWJlbDsgc2hvdXQoJ2FiMVRyYWNrTWVudVJlc2V0Jyk7IiwgImZvcm1BZGRyZXNzIjogImFycm93X3JpZ2h0IiwgImxhYmVsIjogInF1aW50aWMifSwKeyJvbkNsaWNrIjogIkAgbGlua3MubWFuYWdlci50YWdzLmVhc2luZ1R5cGUgPSB0YWdzLmxhYmVsOyBzaG91dCgnYWIxVHJhY2tNZW51UmVzZXQnKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXJyb3dfcmlnaHQiLCAibGFiZWwiOiAic2ludXNvaWRhbCJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnRhZ3MuZWFzaW5nVHlwZSA9IHRhZ3MubGFiZWw7IHNob3V0KCdhYjFUcmFja01lbnVSZXNldCcpOyIsICJmb3JtQWRkcmVzcyI6ICJhcnJvd19yaWdodCIsICJsYWJlbCI6ICJleHBvbmVudGlhbCJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnRhZ3MuZWFzaW5nVHlwZSA9IHRhZ3MubGFiZWw7IHNob3V0KCdhYjFUcmFja01lbnVSZXNldCcpOyIsICJmb3JtQWRkcmVzcyI6ICJhcnJvd19yaWdodCIsICJsYWJlbCI6ICJjaXJjdWxhciJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnRhZ3MuZWFzaW5nVHlwZSA9IHRhZ3MubGFiZWw7IHNob3V0KCdhYjFUcmFja01lbnVSZXNldCcpOyIsICJmb3JtQWRkcmVzcyI6ICJhcnJvd19yaWdodCIsICJsYWJlbCI6ICJlbGFzdGljIn1dJwDrxoSdBNN9EG1vZGVBQjFUcmFja01lbnUCBADrxoSdBI6uAZ0D8J+nrFt7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnRhZ3MuZWFzaW5nTW9kZSA9IHRhZ3MubGFiZWw7IHNob3V0KCdhYjFUcmFja01lbnVSZXNldCcpOyIsICJmb3JtQWRkcmVzcyI6ICJhcnJvd19yaWdodCIsICJsYWJlbCI6ICJpbiJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnRhZ3MuZWFzaW5nTW9kZSA9IHRhZ3MubGFiZWw7IHNob3V0KCdhYjFUcmFja01lbnVSZXNldCcpOyIsICJmb3JtQWRkcmVzcyI6ICJhcnJvd19yaWdodCIsICJsYWJlbCI6ICJvdXQifSwKeyJvbkNsaWNrIjogIkAgbGlua3MubWFuYWdlci50YWdzLmVhc2luZ01vZGUgPSB0YWdzLmxhYmVsOyBzaG91dCgnYWIxVHJhY2tNZW51UmVzZXQnKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXJyb3dfcmlnaHQiLCAibGFiZWwiOiAiaW5vdXQifV0nAOvGhJ0E030TYXBwbHlNb2RUb1RyYWNrTm9kZQIEAOvGhJ0EqrEB9QFAbGV0IGJvdE1vZCA9IHRoYXQuZHJhZ0JvdC50YWdzLm1vZHM7Cgp0YWdzLm1vZHMgPSBib3RNb2Q7CnRhZ3MuY29sb3IgPSB0YWdzLnN0cm9rZUNvbG9yOwp0YWdzLmZvcm0gPSAic3ByaXRlIjsKdGFncy5mb3JtQWRkcmVzcyA9ICJodHRwczovL2J1aWxkZXItbHRtLWZpbGVzLnMzLmFtYXpvbmF3cy5jb20vYjYzNTJlZGI4ODU5OGExOTY5YTY0OGY3ZGQ2ZDQxODIzM2VmMTE1OWJkNzhiNzM3Y2YyMGEzZGE1NDA1ZDFjNC5wbmciOycA68aEnQTTfRBhYjFNZW51U29ydE9yZGVyAgQA68aEnQSgswEBMicBBGJvdHMkZWI3NWY1NWEtMmJiOS00MzcyLWJmOGMtY2NiYWM4NjM5MGZmAScA68aEnQSiswEFY29sb3ICBADrxoSdBKOzAQcjN0I2NEZGJwDrxoSdBKKzAQlkaW1lbnNpb24CBADrxoSdBKuzAQRob21lJwDrxoSdBKKzAQRmb3JtAgQA68aEnQSwswEDaGV4KADrxoSdBKKzAQVzY2FsZQF9AicA68aEnQSiswEGc2NhbGVaAgQA68aEnQS1swEEMC43NScA68aEnQSiswEHb25DbGljawIEAOvGhJ0EurMBGkB0aGlzQm90Lm9wZW5Qb3J0YWwodGhhdCk7JwDrxoSdBKKzAQ5vblBvaW50ZXJFbnRlcgIEAOvGhJ0E1bMBE0BtYXNrcy5zY2FsZSA9IDIuMTsnAOvGhJ0EorMBC29uRHJvcEVudGVyAgQA68aEnQTpswFqQGlmICh0aGF0LmRyYWdCb3QuaWQgIT0gdGhpc0JvdC5pZCkgLy9NQVlCRSBNQUtFIEEgV0FZIEZPUiBBQi0xIFRPIE5PVCBJTlRFUkFDVAp7CiAgICB0aGlzQm90Lm9uQ2xpY2soKTsKfScA68aEnQSiswEGc3lzdGVtAgQA68aEnQTUtAETYWItMS5mYWN0b3J5LnBvcnRhbCcA68aEnQSiswENb25Qb2ludGVyRXhpdAIEAOvGhJ0E6LQBFEBtYXNrcy5zY2FsZSA9IG51bGw7KADrxoSdBKKzAQ1hYjFCb3RWZXJzaW9uAX0IJwDrxoSdBKKzAQphYjFGYWN0b3J5AgQA68aEnQT+tAEEdHJ1ZScA68aEnQSiswEJYWIxSWdub3JlAgQA68aEnQSDtQEEdHJ1ZScA68aEnQSiswELdG9vbE1hbmFnZXICBADrxoSdBIi1ASjwn5SXMTRlMWZkYWMtY2ZkNy00ZTdlLWJkZDEtOTY3YTQwODVhNzU1JwDrxoSdBKKzAQlsaXN0ZW5pbmcCBADrxoSdBK+1AQVmYWxzZScA68aEnQSiswELZmFjdG9yeUljb24CBADrxoSdBLW1AQV0b3BpYycA68aEnQSiswEKb3BlblBvcnRhbAIEAOvGhJ0Eu7UBpTBAY29uc3QgY3VycmVudERpbSA9IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA/IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA6IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWw7CmNvbnN0IGEgPSBNYXRoLlBJIC8gNjsKY29uc3QgaGV4U2NhbGUgPSA1Owpjb25zdCBwb3J0YWxEaW1lbnNpb24gPSB0YWdzLnBvcnRhbEFkZHJlc3M7CgpsZXQgaGV4ID0ge307CmxldCBoZXhOdW0gPSAxOwoKaGV4LnNwYWNlID0gInRlbXBMb2NhbCI7CmhleC5wb3J0YWxSZXNldCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKaGV4LmZvcm0gPSAiaGV4IjsKaGV4LmNvbG9yID0gdGFncy5jb2xvcjsKaGV4Lm9yaWdpbiA9IHRoaXNCb3QuaWQ7CmhleC5wb3J0YWxIZXggPSB0cnVlOwpoZXhbY3VycmVudERpbSsiWiJdID0gLTE7CmhleC5hbmNob3JQb2ludCA9ICJ0b3AiOwpoZXguc2NhbGUgPSA0LjU7CmhleFtjdXJyZW50RGltXSA9IHRydWU7CmhleC5wb2ludGFibGUgPSBmYWxzZTsKaGV4LnNjYWxlWiA9IDAuMDE7CmhleC5hbmltYXRlID0gYEAgYW5pbWF0ZVRhZyh0aGlzQm90LCAic2NhbGUiLCB7CiAgICBmcm9tVmFsdWU6IHRhZ3Muc2NhbGUsCiAgICB0b1ZhbHVlOiBbdGhhdF0sCiAgICBlYXNpbmc6IHsKICAgICAgICB0eXBlOiAicXVhZHJhdGljIiwKICAgICAgICBtb2RlOiAib3V0IgogICAgfSwKICAgIGR1cmF0aW9uOiAwLjMKfSkuY2F0Y2goZSA9PiB7IH0pO2A7CgpsZXQgZGltZW5zaW9uQm90cyA9IGdldEJvdHMocG9ydGFsRGltZW5zaW9uLCB0cnVlKTsKbGV0IHJpbmdOdW07CgppZiAoZGltZW5zaW9uQm90cy5sZW5ndGggPiAwKQp7CiAgICBsZXQgeFBhcmFtZXRlciA9IGRpbWVuc2lvbkJvdHMuc29ydCgoYSwgYik9PiBNYXRoLmFicyhiLnRhZ3NbcG9ydGFsRGltZW5zaW9uKyJYIl0pIC0gTWF0aC5hYnMoYS50YWdzW3BvcnRhbERpbWVuc2lvbisiWCJdKSlbMF0udGFnc1twb3J0YWxEaW1lbnNpb24rIlgiXTsKICAgIGxldCB5UGFyYW1ldGVyID0gZGltZW5zaW9uQm90cy5zb3J0KChhLCBiKT0+IE1hdGguYWJzKGIudGFnc1twb3J0YWxEaW1lbnNpb24rIlkiXSkgLSBNYXRoLmFicyhhLnRhZ3NbcG9ydGFsRGltZW5zaW9uKyJZIl0pKVswXS50YWdzW3BvcnRhbERpbWVuc2lvbisiWSJdOwoKCiAgICBsZXQgZGlzdGFuY2UgPSBNYXRoLmZsb29yKE1hdGguc3FydChNYXRoLnBvdyhNYXRoLmZsb29yKE1hdGguYWJzKHhQYXJhbWV0ZXIgLSAwKSksIDIpICsgTWF0aC5wb3coTWF0aC5mbG9vcihNYXRoLmFicyh5UGFyYW1ldGVyIC0gMCkpLCAyKSkgLyBoZXhTY2FsZSkgKyAxOwogICAgcmluZ051bSA9IDYgKiAoZGlzdGFuY2UpKihkaXN0YW5jZSsxKS8yICsgMTsKCiAgICBpZiAocmluZ051bSA+IDM5NykKICAgIHsKICAgICAgICByaW5nTnVtID0gMzk3OwogICAgfQp9CmVsc2UKewogICAgcmluZ051bSA9IDc7Cn0KCm1hc2tzLnNjYWxlID0gMC4xOwptYXNrcy5wb2ludGFibGUgPSBmYWxzZTsKCmxldCBwcmV2aW91c0hleDsKCmZvciAobGV0IGkgPSAwOyBpIDwgcmluZ051bTsgaSsrKQp7CiAgICBpZiAoaSAhPSAwKQogICAgewogICAgICAgIGxldCBlbXB0eVBvcyA9IGF3YWl0IGNoZWNrSGV4UG9zKHByZXZpb3VzSGV4LCBjdXJyZW50RGltKTsKCiAgICAgICAgaWYgKGVtcHR5UG9zID09IDAgfHwgZW1wdHlQb3MgPT0gMykKICAgICAgICB7CiAgICAgICAgICAgIHZhciB4ID0gcHJldmlvdXNIZXgudGFnc1tjdXJyZW50RGltKyJYIl07CiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgZmxpcFggPSAxOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKGVtcHR5UG9zID09IDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBmbGlwWSA9IDA7CiAgICAgICAgICAgICAgICB2YXIgeSA9IHByZXZpb3VzSGV4LnRhZ3NbY3VycmVudERpbSsiWSJdICsgaGV4U2NhbGU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgZmxpcFkgPSAtMTsKICAgICAgICAgICAgICAgIHZhciB5ID0gcHJldmlvdXNIZXgudGFnc1tjdXJyZW50RGltKyJZIl0gLSBoZXhTY2FsZS8yOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIHZhciB4ID0gcHJldmlvdXNIZXgudGFnc1tjdXJyZW50RGltKyJYIl0gKyAoaGV4U2NhbGUgKiAwLjg1KTsKICAgICAgICAgICAgdmFyIHkgPSBwcmV2aW91c0hleC50YWdzW2N1cnJlbnREaW0rIlkiXTsKCiAgICAgICAgICAgIGlmIChlbXB0eVBvcyA9PSAxKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgZmxpcFggPSAxOwogICAgICAgICAgICAgICAgdmFyIGZsaXBZID0gMTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChlbXB0eVBvcyA9PSAyKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgZmxpcFggPSAxOwogICAgICAgICAgICAgICAgdmFyIGZsaXBZID0gLTE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoZW1wdHlQb3MgPT0gNCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgeCA9IHByZXZpb3VzSGV4LnRhZ3NbY3VycmVudERpbSsiWCJdIC0gKGhleFNjYWxlICogMC44NSk7CgogICAgICAgICAgICAgICAgdmFyIGZsaXBYID0gMTsKICAgICAgICAgICAgICAgIHZhciBmbGlwWSA9IC0xOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGVtcHR5UG9zID09IDUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHggPSBwcmV2aW91c0hleC50YWdzW2N1cnJlbnREaW0rIlgiXSAtIChoZXhTY2FsZSAqIDAuODUpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgZmxpcFggPSAxOwogICAgICAgICAgICAgICAgdmFyIGZsaXBZID0gMTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaGV4W2N1cnJlbnREaW0rIlgiXSA9IHggKiBmbGlwWDsKICAgICAgICBoZXhbY3VycmVudERpbSsiWSJdID0geSArIGZsaXBZICogaGV4U2NhbGUvMjsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBoZXhbY3VycmVudERpbSsiWCJdID0gdGFnc1tjdXJyZW50RGltKyJYIl07CiAgICAgICAgaGV4W2N1cnJlbnREaW0rIlkiXSA9IHRhZ3NbY3VycmVudERpbSsiWSJdOwogICAgfQoKICAgIGhleC5oZXhOdW0gPSBoZXhOdW07CgogICAgbGV0IG5lYXJieVBvcnRhbEJvdCA9IGdldEJvdChieU1vZCh7Ly9iZWluZyBtaXJyb3JlZCByaWdodCBub3cKICAgICAgICBbcG9ydGFsRGltZW5zaW9uXTogdHJ1ZSwKICAgICAgICBbcG9ydGFsRGltZW5zaW9uKyJYIl06IHggPT4geCA+IChoZXhbY3VycmVudERpbSsiWCJdIC0gdGFnc1tjdXJyZW50RGltKyJYIl0pIC0gaGV4U2NhbGUgJiYgeCA8IChoZXhbY3VycmVudERpbSsiWCJdIC0gdGFnc1tjdXJyZW50RGltKyJYIl0pICsgaGV4U2NhbGUsCiAgICAgICAgW3BvcnRhbERpbWVuc2lvbisiWSJdOiB5ID0+IHkgPiAoaGV4W2N1cnJlbnREaW0rIlkiXSAtIHRhZ3NbY3VycmVudERpbSsiWSJdKSAtIGhleFNjYWxlICYmIHkgPCAoaGV4W2N1cnJlbnREaW0rIlkiXSAtIHRhZ3NbY3VycmVudERpbSsiWSJdKSArIGhleFNjYWxlCiAgICB9KSk7CgogICAgaWYgKG5lYXJieVBvcnRhbEJvdCB8fCBpIDwgNykKICAgIHsKICAgICAgICBoZXgub25Qb3J0YWxDb21wbGV0ZSA9IGZhbHNlOwogICAgICAgIGhleC5jb2xvciA9IHRhZ3MuY29sb3I7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgaGV4Lm9uUG9ydGFsQ29tcGxldGUgPSB0cnVlOwogICAgICAgIGhleC5jb2xvciA9ICJjbGVhciI7CiAgICB9CgogICAgaGV4TnVtKys7CgogICAgcHJldmlvdXNIZXggPSBhd2FpdCBjcmVhdGUoaGV4KTsKfQoKbGV0IG5vblBvcnRhbEhleGVzID0gZ2V0Qm90cygib25Qb3J0YWxDb21wbGV0ZSIsIHRydWUpOwpsZXQgcG9ydGFsSGV4ZXMgPSBnZXRCb3RzKCJvblBvcnRhbENvbXBsZXRlIiwgZmFsc2UpOwoKZm9yIChsZXQgbiA9IDA7IG4gPCBub25Qb3J0YWxIZXhlcy5sZW5ndGg7IG4rKykKewogICAgZGVzdHJveShub25Qb3J0YWxIZXhlc1tuXSk7Cn0KCndoaXNwZXIocG9ydGFsSGV4ZXMsICJhbmltYXRlIiwgaGV4U2NhbGUpOwoKbWFza3MuZm9ybSA9ICJwb3J0YWwiOwptYXNrcy5mb3JtQWRkcmVzcyA9IHRhZ3MucG9ydGFsQWRkcmVzczsKbWFza3MucG9ydGFsSGV4Qm90cyA9IGdldExpbmsocG9ydGFsSGV4ZXMpOwoKdGhpc0JvdC5wb3J0YWxNZW51KCk7CgpmdW5jdGlvbiBjaGVja0hleFBvcyhoZXgsIGRpbWVuc2lvbikKewogICAgbGV0IHNjYWxlVmFyID0gaGV4U2NhbGUvMjsKICAgIGxldCB4UG9zID0gaGV4LnRhZ3NbZGltZW5zaW9uKyJYIl07CiAgICBsZXQgeVBvcyA9IGhleC50YWdzW2RpbWVuc2lvbisiWSJdOwogICAgbGV0IGhleE1hdGhWYXIgPSBNYXRoLlBJIC8gNjsKICAgIGxldCB4U3BhY2luZ1BsdXMgPSB4UG9zICsgc2NhbGVWYXIgKyAoMSArIE1hdGguY29zKGhleE1hdGhWYXIpKTsKICAgIGxldCB4U3BhY2luZ01pbnVzID0geFBvcyAtIChzY2FsZVZhciArICgxICsgTWF0aC5jb3MoaGV4TWF0aFZhcikpKTsKICAgIGxldCB5U3BhY2luZ1RvcCA9IE1hdGguZmxvb3IoaGV4LnRhZ3Muc2NhbGUpICsgeVBvczsKICAgIGxldCB5U3BhY2luZ1VwID0geVBvcyArIHNjYWxlVmFyICogTWF0aC5zaW4oaGV4TWF0aFZhcik7CiAgICBsZXQgeVNwYWNpbmdEb3duID0geVBvcyAtIHNjYWxlVmFyICogTWF0aC5zaW4oaGV4TWF0aFZhcik7CiAgICBsZXQgeVNwYWNpbmdCb3R0b20gPSB5UG9zIC0gTWF0aC5mbG9vcihoZXgudGFncy5zY2FsZSk7CiAgICBsZXQgeENoZWNrID0gW3hQb3MsIHhTcGFjaW5nUGx1cywgeFNwYWNpbmdQbHVzLCB4UG9zLCB4U3BhY2luZ01pbnVzLCB4U3BhY2luZ01pbnVzXTsKICAgIGxldCB5Q2hlY2sgPSBbeVNwYWNpbmdUb3AsIHlTcGFjaW5nVXAsIHlTcGFjaW5nRG93biwgeVNwYWNpbmdCb3R0b20sIHlTcGFjaW5nRG93biwgeVNwYWNpbmdVcF07CiAgICBsZXQgdG90YWxOZWlnaGJvcnMgPSAwOwogICAgbGV0IG5laWdoYm9yQXJyYXkgPSBbXQoKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKQogICAgewogICAgICAgIGxldCBoZXhOZWlnaGJvciA9IGdldEJvdChieU1vZCh7CiAgICAgICAgICAgIFtkaW1lbnNpb25dOiB0cnVlLCAKICAgICAgICAgICAgW2RpbWVuc2lvbisiWCJdOiB4ID0+IHggPiB4Q2hlY2tbaV0gLSBzY2FsZVZhciAmJiB4IDwgeENoZWNrW2ldICsgc2NhbGVWYXIsIAogICAgICAgICAgICBbZGltZW5zaW9uKyJZIl06IHkgPT4geSA+IHlDaGVja1tpXSAtIHNjYWxlVmFyICYmIHkgPCB5Q2hlY2tbaV0gKyBzY2FsZVZhciwKICAgICAgICAgICAgb3JpZ2luOiBoZXgudGFncy5vcmlnaW4sCiAgICAgICAgICAgIHBvcnRhbEhleDogdHJ1ZQogICAgICAgIH0pKTsKCiAgICAgICAgaWYgKCFoZXhOZWlnaGJvcikKICAgICAgICB7CiAgICAgICAgICAgIG5laWdoYm9yQXJyYXkucHVzaCgiZW1wdHkiKTsKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgbmVpZ2hib3JBcnJheS5wdXNoKGhleE5laWdoYm9yKTsKICAgICAgICAgICAgdG90YWxOZWlnaGJvcnMrKzsKICAgICAgICB9CiAgICB9CgogICAgaWYgKHRvdGFsTmVpZ2hib3JzID09IDApCiAgICB7CiAgICAgICAgdmFyIHRhcmdldCA9IDA7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgdmFyIGVtcHR5ID0gZmFsc2U7CgogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgNjsgaisrKQogICAgICAgIHsKICAgICAgICAgICAgbGV0IG5leHRFbXB0eSA9IG5laWdoYm9yQXJyYXlbal07CgogICAgICAgICAgICBpZiAobmV4dEVtcHR5ID09ICJlbXB0eSIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGVtcHR5ID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICBpZiAoaiA9PSA1KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSA1OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKG5leHRFbXB0eSAhPSAiZW1wdHkiICYmIGVtcHR5KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gai0xOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gdGFyZ2V0Owp9JwDrxoSdBKKzAQlwb2ludGFibGUCBADrxoSdBOHlAQR0cnVlJwDrxoSdBKKzAQtvbkdyaWRDbGljawIEAOvGhJ0E5uUBkwFAaWYgKHRhZ3MuZm9ybSAhPSAicG9ydGFsIikKewogICAgcmV0dXJuOwp9CgpsZXQgcG9ydGFsQ2xpY2sgPSB0aGlzQm90LnBvcnRhbFBvc2l0aW9uQ2hlY2sodGhhdCk7CgppZiAoIXBvcnRhbENsaWNrKQp7CiAgICB0aGlzQm90LmNsb3NlUG9ydGFsKCk7Cn0nAOvGhJ0EorMBC2Nsb3NlUG9ydGFsAgQA68aEnQT65gFqQHdoaXNwZXIobGlua3MucG9ydGFsSGV4Qm90cywgInBvcnRhbFJlc2V0Iik7Cgpjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9IG51bGw7CgpjbGVhclRhZ01hc2tzKHRoaXNCb3QpOycA68aEnQSiswEKcG9ydGFsTWVudQIEAOvGhJ0E5ecB5wdAc2hvdXQoImFiMVBvcnRhbE1lbnVSZXNldCIpOwoKY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSAiYWIxUG9ydGFsTWVudSI7CgpsZXQgbWVudUJ1dHRvbiA9IHt9OwoKbWVudUJ1dHRvbi5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwptZW51QnV0dG9uLmFiMVBvcnRhbE1lbnUgPSB0cnVlOwptZW51QnV0dG9uLmFiMVBvcnRhbE1lbnVSZXNldCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKbWVudUJ1dHRvbi5jb2xvciA9IHRhZ3MuY29sb3I7Cm1lbnVCdXR0b24ubWFuYWdlciA9IGdldExpbmsodGhpc0JvdCk7Cm1lbnVCdXR0b24ubWVudUl0ZW1TdHlsZSA9IGDwn6esIHsiYm9yZGVyLXJhZGl1cyI6ICI5cHggOXB4IDlweCA5cHgiLCAibWFyZ2luLXRvcCI6ICI2cHgifWA7Cm1lbnVCdXR0b24ubGFiZWxBbGlnbm1lbnQgPSAiY2VudGVyIjsKbWVudUJ1dHRvbi5sYWJlbCA9IHRhZ3MucG9ydGFsQWRkcmVzczsKCmNyZWF0ZShtZW51QnV0dG9uKTsKCm1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiZWRpdCI7Cm1lbnVCdXR0b24ubGFiZWxBbGlnbm1lbnQgPSAibGVmdCI7Cm1lbnVCdXR0b24ubGFiZWwgPSAiZWRpdCBkaW1lbnNpb24iOwptZW51QnV0dG9uLnRhcmdldCA9IHRoaXNCb3QuaWQ7Cm1lbnVCdXR0b24ub25DbGljayA9IGBAIGxpbmtzLm1hbmFnZXIucG9ydGFsQ2hhbmdlRGltZW5zaW9uKCk7YDsKCmNyZWF0ZShtZW51QnV0dG9uKTsKCm1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiYXJyb3dfZm9yd2FyZCI7Cm1lbnVCdXR0b24ubGFiZWxBbGlnbm1lbnQgPSAibGVmdCI7Cm1lbnVCdXR0b24ubGFiZWwgPSAiZ28gdG8gZGltZW5zaW9uIjsKbWVudUJ1dHRvbi50YXJnZXQgPSB0YWdzLmZvcm1BZGRyZXNzOwptZW51QnV0dG9uLm9uQ2xpY2sgPSBgQCBzaG91dCgiYWIxUG9ydGFsTWVudVJlc2V0Iik7Cgpjb25maWdCb3QudGFncy5ncmlkUG9ydGFsID0gbGlua3MubWFuYWdlci50YWdzLnBvcnRhbEFkZHJlc3M7YDsKCmNyZWF0ZShtZW51QnV0dG9uKTsnAOvGhJ0EorMBCG9uQ3JlYXRlAgQA68aEnQTL7wE+QGlmICghdGFncy5wb3J0YWxBZGRyZXNzKQp7CiAgICB0YWdzLnBvcnRhbEFkZHJlc3MgPSB1dWlkKCk7Cn0nAOvGhJ0EorMBE3BvcnRhbFBvc2l0aW9uQ2hlY2sCBADrxoSdBIrwAaQWQGxldCBjdXJyZW50RGltID0gdGhhdC5kaW1lbnNpb24gPyB0aGF0LmRpbWVuc2lvbiA6IHRoYXQudG8uZGltZW5zaW9uOwpsZXQgcG9zWSA9IHRoYXQucG9zaXRpb24gPyB0aGF0LnBvc2l0aW9uLnkgOiB0aGF0LnRvLnk7CmxldCBwb3NYID0gdGhhdC5wb3NpdGlvbiA/IHRoYXQucG9zaXRpb24ueCA6IHRoYXQudG8ueDsKbGV0IHBvcnRhbEhleEJvdHMgPSBsaW5rcy5wb3J0YWxIZXhCb3RzOwpsZXQgcG9ydGFsRW50cnkgPSBmYWxzZTsKCmZvciAobGV0IGkgPSAwOyBpIDwgcG9ydGFsSGV4Qm90cy5sZW5ndGg7IGkrKykgCnsKICAgIGxldCBjdXJyZW50SGV4ID0gcG9ydGFsSGV4Qm90c1tpXTsKICAgIGxldCBtYXhZID0gY3VycmVudEhleC50YWdzW2N1cnJlbnREaW0gKyAiWSJdICsgY3VycmVudEhleC50YWdzLnNjYWxlIC8gMjsKICAgIGxldCBtaW5ZID0gY3VycmVudEhleC50YWdzW2N1cnJlbnREaW0gKyAiWSJdIC0gY3VycmVudEhleC50YWdzLnNjYWxlIC8gMjsKCiAgICBpZiAocG9zWSA8PSBtYXhZICYmIHBvc1kgPj0gbWluWSkgewoKICAgICAgICAvL1NFVFVQIEEgQ0hFQ0sgRk9SIFdIRU4gWCA9IERFQ0sgWAogICAgICAgIGxldCBtYXhYID0gY3VycmVudEhleC50YWdzW2N1cnJlbnREaW0gKyAiWCJdICsgY3VycmVudEhleC50YWdzLnNjYWxlIC8gMiArIDAuNTsKICAgICAgICBsZXQgbWluWCA9IGN1cnJlbnRIZXgudGFnc1tjdXJyZW50RGltICsgIlgiXSAtIGN1cnJlbnRIZXgudGFncy5zY2FsZSAvIDIgLSAwLjU7CgogICAgICAgIGlmIChwb3NYIDw9IG1heFggJiYgcG9zWCA+PSBtaW5YKSB7CiAgICAgICAgICAgIGlmIChwb3NYIDw9IGN1cnJlbnRIZXgudGFnc1tjdXJyZW50RGltICsgIlgiXSArIDAuMyAmJiBwb3NYID49IGN1cnJlbnRIZXgudGFnc1tjdXJyZW50RGltICsgIlgiXSAtIDAuMykvL25vdCBwZXJmZWN0IHBhcnQgb2YgYWxnCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmIChwb3NZID49IGN1cnJlbnRIZXgudGFnc1tjdXJyZW50RGltICsgIlkiXSAtIGN1cnJlbnRIZXgudGFncy5zY2FsZSAvIDIgJiYgcG9zWSA8PSBjdXJyZW50SGV4LnRhZ3NbY3VycmVudERpbSArICJZIl0gKyBjdXJyZW50SGV4LnRhZ3Muc2NhbGUgLyAyKSAKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBwb3J0YWxFbnRyeSA9IHRydWU7CgogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgbWlkWCA9IGN1cnJlbnRIZXgudGFnc1tjdXJyZW50RGltICsgIlgiXTsKICAgICAgICAgICAgbGV0IG1pZFkgPSBjdXJyZW50SGV4LnRhZ3NbY3VycmVudERpbSArICJZIl07CiAgICAgICAgICAgIGNvbnN0IGEgPSBNYXRoLnBvdyhjdXJyZW50SGV4LnRhZ3Muc2NhbGUgLyAyLCAyKTsKICAgICAgICAgICAgY29uc3QgYiA9IE1hdGgucG93KGEgLyAyLCAyKTsKICAgICAgICAgICAgY29uc3QgbWF4RGlzdGFuY2UgPSBNYXRoLnNxcnQoTWF0aC5hYnMoYSAtIGIpKTsKICAgICAgICAgICAgbGV0IHNsb3BlOwoKICAgICAgICAgICAgaWYgKChwb3NYID4gbWlkWCAmJiBwb3NZID4gbWlkWSkgfHwgKHBvc1ggPCBtaWRYICYmIHBvc1kgPCBtaWRZKSkgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHNsb3BlID0gKG1heFkgLSBtaW5ZKSAvIChtYXhYIC0gbWluWCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAocG9zWCA+IG1pZFgpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgc2xvcGUgPSAobWF4WCAtIG1pblgpIC8gKG1heFkgLSBtaW5ZKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgc2xvcGUgPSAxIC8gKG1heFggLSBtaW5YKSAvIChtYXhZIC0gbWluWSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCBjMSA9IG1heFkgLSAobWF4WCAqIHNsb3BlKTsKICAgICAgICAgICAgbGV0IGMyID0gcG9zWSAtIChwb3NYICogc2xvcGUpOwogICAgICAgICAgICBsZXQgYWN0dWFsRGlzdGFuY2UgPSBNYXRoLmFicyhjMiAtIGMxKSAvIE1hdGguc3FydChNYXRoLnBvdyhzbG9wZSwgMikgKyAxKTsKCiAgICAgICAgICAgIGlmIChhY3R1YWxEaXN0YW5jZSA8PSBtYXhEaXN0YW5jZSkgCiAgICAgICAgICAgIHsgICAKICAgICAgICAgICAgICAgIHBvcnRhbEVudHJ5ID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvL05PVCBTVVJFIE9GIFRISVMgQ09ERVMgTkVFRD8KICAgIC8vIGlmICh0aGF0LnBvcnRhbElEKSAKICAgIC8vIHsKICAgIC8vICAgICBpZiAodGhhdC5wb3J0YWxJRCA9PSBjdXJyZW50SGV4LnRhZ3Mub3JpZ2luKSAKICAgIC8vICAgICB7CiAgICAvLyAgICAgICAgIHBvcnRhbEVudHJ5ID0gdHJ1ZTsKCiAgICAvLyAgICAgICAgIGJyZWFrOwogICAgLy8gICAgIH0KICAgIC8vIH0KfQoKLy8gbGV0IHBvcnRhbEJvdHMgPSBnZXRCb3RzKCJwb3J0YWxIZXhCb3RzIik7Ly9DSEVDSyBUTyBTRUUgSUYgVEhFUkUgQVJFIE9USEVSIE9QRU4gUE9SVEFMIChub3Qgc3VyZSBJIG5lZWQgdGhpcykKCi8vIGZvciAobGV0IGkgPSAwOyBpIDwgcG9ydGFsQm90cy5sZW5ndGg7IGkrKykgCi8vIHsKLy8gICAgIGlmIChwb3J0YWxCb3RzW2ldLmlkICE9IHRoaXNCb3QuaWQpIAovLyAgICAgewovLyAgICAgICAgIHdoaXNwZXIocG9ydGFsQm90c1tpXSwgImNsb3NlUG9ydGFsIik7Ci8vICAgICB9Ci8vIH0KCnJldHVybiBwb3J0YWxFbnRyeTsnAOvGhJ0EorMBDG9uQW55Qm90RHJvcAIEAOvGhJ0Er4YC1QRAaWYgKHRoYXQuZHJhZ0JvdC5pZCA9PSB0aGlzQm90LmlkKQp7CiAgICBjbGVhckludGVydmFsKHRhZ3MuaW50ZXJ2YWwpOwoKICAgIG1hc2tzLmludGVydmFsID0gbnVsbDsKCiAgICByZXR1cm47Cn0KCmlmICh0YWdzLmZvcm0gIT0gInBvcnRhbCIpCnsKICAgIHJldHVybjsKfQoKY29uc3QgY3VycmVudERpbSA9IHRoYXQudG8uZGltZW5zaW9uOwpjb25zdCBwb3J0YWxEcm9wID0gYXdhaXQgdGhpc0JvdC5wb3J0YWxQb3NpdGlvbkNoZWNrKHRoYXQpOwoKaWYgKHBvcnRhbERyb3ApIAp7CiAgICBsZXQgbmV3RGltID0gdGFncy5wb3J0YWxBZGRyZXNzOwoKICAgIHRoYXQuZHJhZ0JvdC50YWdzW25ld0RpbV0gPSB0cnVlOwogICAgdGhhdC5kcmFnQm90LnRhZ3NbbmV3RGltICsgIlgiXSA9IHRoYXQuZHJhZ0JvdC50YWdzW2N1cnJlbnREaW0gKyAiWCJdIC0gdGFnc1tjdXJyZW50RGltICsgIlgiXTsKICAgIHRoYXQuZHJhZ0JvdC50YWdzW25ld0RpbSArICJZIl0gPSB0aGF0LmRyYWdCb3QudGFnc1tjdXJyZW50RGltICsgIlkiXSAtIHRhZ3NbY3VycmVudERpbSArICJZIl07CiAgICB0aGF0LmRyYWdCb3QudGFnc1tjdXJyZW50RGltXSA9IG51bGw7Cn0nAOvGhJ0EorMBBm9uRHJhZwIEAOvGhJ0EhYsCXkBpZiAoIXRhZ3MuaW50ZXJ2YWwpCnsKICAgIG1hc2tzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gdGhpc0JvdC5wb3NpdGlvbkNoZWNrKCksIDEwMCk7Cn0nAOvGhJ0EorMBFXBvcnRhbENoYW5nZURpbWVuc2lvbgIEAOvGhJ0E5IsCvgFAY29uc3QgbmV3RGltZW5zaW9uID0gYXdhaXQgb3Muc2hvd0lucHV0KHRhZ3MucG9ydGFsQWRkcmVzcywgewogICAgdGl0bGU6ICJlZGl0IGRpbWVuc2lvbiIKfSk7CgppZiAoIW5ld0RpbWVuc2lvbikKewogICAgcmV0dXJuOwp9OwoKdGFncy5wb3J0YWxBZGRyZXNzID0gbmV3RGltZW5zaW9uOwoKdGhpc0JvdC5wb3J0YWxNZW51KCk7JwDrxoSdBKKzAQ1wb3NpdGlvbkNoZWNrAgQA68aEnQSjjQKoDEBsZXQgaGVpZ2h0ID0gZ3JpZFBvcnRhbEJvdC50YWdzLnBpeGVsSGVpZ2h0OwpsZXQgYm90VGhpcmQgPSBoZWlnaHQgLSAoaGVpZ2h0IC8gOCk7CmxldCBwb2ludGVyWSA9IGdyaWRQb3J0YWxCb3QudGFncy5wb2ludGVyUGl4ZWxZOwoKaWYgKHBvaW50ZXJZID4gYm90VGhpcmQpCnsKICAgIGlmIChjb25maWdCb3QudGFncy5taW5pR3JpZFBvcnRhbCAhPSB0YWdzLnBvcnRhbEFkZHJlc3MpCiAgICB7CiAgICAgICAgY29uZmlnQm90LnRhZ3MubWluaUdyaWRQb3J0YWwgPSB0YWdzLnBvcnRhbEFkZHJlc3M7CgogICAgICAgIG1pbmlHcmlkUG9ydGFsQm90LnRhZ3MubWluaVBvcnRhbFdpZHRoID0gMTsKCiAgICAgICAgbWluaUdyaWRQb3J0YWxCb3QudGFncy5wb3J0YWxDb2xvciA9IHRhZ3MuY29sb3I7CiAgICB9Cn0KZWxzZQp7CiAgICBpZiAoY29uZmlnQm90LnRhZ3MubWluaUdyaWRQb3J0YWwgPT0gdGFncy5wb3J0YWxBZGRyZXNzKQogICAgewogICAgICAgIGNvbmZpZ0JvdC50YWdzLm1pbmlHcmlkUG9ydGFsID0gbnVsbDsKICAgICAgICBtaW5pR3JpZFBvcnRhbEJvdC50YWdzLnBvcnRhbENvbG9yID0gbnVsbDsKICAgICAgICBtaW5pR3JpZFBvcnRhbEJvdC50YWdzLm1pbmlQb3J0YWxXaWR0aCA9IG51bGw7CiAgICB9Cn0KCgoKCi8vIGlmICh0aGF0LmJvdC50YWdzLnByaW1pdGl2ZUlEKQovLyB7Ci8vICAgICBpZiAodGhhdC5ib3QudGFncy5wcmltaXRpdmVJRCA9PSAicG9ydGFsIikKLy8gICAgIHsKLy8gICAgICAgICBsZXQgcG9ydGFsQm90ID0gdGhhdC5ib3Q7CgovLyAgICAgICAgIGNsZWFySW50ZXJ2YWwocG9ydGFsQm90Lm1hc2tzLmludGVydmFsKTsKLy8gICAgICAgICBjbGVhclRhZ01hc2tzKHBvcnRhbEJvdCk7CgovLyAgICAgICAgIGlmICh0aGF0LnRvLmRpbWVuc2lvbiAhPSB0aGF0LmZyb20uZGltZW5zaW9uKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgaWYgKHRoYXQudG8uZGltZW5zaW9uID09IHBvcnRhbEJvdC50YWdzLnBvcnRhbEFkZHJlc3MpCi8vICAgICAgICAgICAgIHsKLy8gICAgICAgICAgICAgICAgIGNvbmZpZ0JvdC50YWdzLm1pbmlHcmlkUG9ydGFsID0gcG9ydGFsQm90LnRhZ3MucG9ydGFsQWRkcmVzczsKCi8vICAgICAgICAgICAgICAgICBtaW5pR3JpZFBvcnRhbEJvdC50YWdzLm1pbmlQb3J0YWxXaWR0aCA9IDE7CgovLyAgICAgICAgICAgICAgICAgcG9ydGFsQm90LnRhZ3NbdGhhdC50by5kaW1lbnNpb24gKyAiWCJdID0gMDsKLy8gICAgICAgICAgICAgICAgIHBvcnRhbEJvdC50YWdzW3RoYXQudG8uZGltZW5zaW9uICsgIlkiXSA9IDA7Ci8vICAgICAgICAgICAgIH0KLy8gICAgICAgICAgICAgZWxzZSBpZiAoY29uZmlnQm90LnRhZ3MubWluaUdyaWRQb3J0YWwgPT0gcG9ydGFsQm90LnRhZ3MucG9ydGFsQWRkcmVzcyAmJiB0aGF0LnRvLmRpbWVuc2lvbiAhPSBwb3J0YWxCb3QudGFncy5wb3J0YWxBZGRyZXNzKQovLyAgICAgICAgICAgICB7Ci8vICAgICAgICAgICAgICAgICBjb25maWdCb3QudGFncy5taW5pR3JpZFBvcnRhbCA9IG51bGw7Ci8vICAgICAgICAgICAgIH0KLy8gICAgICAgICB9Ci8vICAgICB9Ci8vIH0nAOvGhJ0EorMBEGFiMU1lbnVTb3J0T3JkZXICBADrxoSdBMyZAgEwAA=="}]}