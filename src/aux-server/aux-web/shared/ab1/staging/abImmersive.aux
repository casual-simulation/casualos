{"version":2,"updates":[{"id":0,"timestamp":1687874976898,"update":"AWTaxLCNCgAnAQRib3RzJGM0ODkxOThhLWY4OTktNGJlNi1iMWEwLWY0MjdkZjJmZjMzZAEnANrEsI0KAAZzeXN0ZW0CBADaxLCNCgEUYWIuaW1tZXJzaXZlLmltbWVyc2UnANrEsI0KAA9vblBvcnRhbENoYW5nZWQCBADaxLCNChZ2QGlmICh0aGF0LmRpbWVuc2lvbiA9PSB0YWdzLnJvb3REaW1lbnNpb24gfHwgdGhhdC5kaW1lbnNpb24gPT0gIm1haW5TY2VuZSIpCnsKICAgIHRoaXNCb3QuaW5pdGlhbGl6ZSgpOwoKICAgIHJldHVybjsKfScA2sSwjQoABGZvcm0CBADaxLCNCo0BB25vdGhpbmcnANrEsI0KAAthYkltbWVyc2l2ZQIEANrEsI0KlQEEdHJ1ZScA2sSwjQoADmluaXRpYWxpemVNYXRoAgQA2sSwjQqaAemPAUAvLyA9PT09PT09PT09Ci8vIG1hdGggdXRpbHMKLy8gPT09PT09PT09PQpnbG9iYWxUaGlzLm1hdGhVdGlscyA9IHt9OwoKbWF0aFV0aWxzLmNsYW1wID0gKHZhbHVlLCBtaW4sIG1heCkgPT4gewoJcmV0dXJuIE1hdGgubWF4KG1pbiwgTWF0aC5taW4obWF4LCB2YWx1ZSkpOwp9CgptYXRoVXRpbHMuZm1vZCA9IChhLGIpID0+IHsgCglyZXR1cm4gTnVtYmVyKChhIC0gKE1hdGguZmxvb3IoYSAvIGIpICogYikpLnRvUHJlY2lzaW9uKDgpKTsgCn0KCm1hdGhVdGlscy53cmFwVG8yUGkgPSAoYSkgPT4geyAKCWEgPSBtYXRoVXRpbHMuZm1vZChhLCBNYXRoLlBJICogMik7CglyZXR1cm4gYTsKfQoKbWF0aFV0aWxzLmZsaXBZWiA9ICh2LCBzaWduKSA9PiB7CiAgICBjb25zdCB5ID0gdi55OwogICAgY29uc3QgeiA9IHYuejsKICAgIHYueiA9IHk7CiAgICB2LnkgPSBzaWduID8gLXogOiB6Owp9CgovLyA9PT09PT09PT09Ci8vIHZlY3RvcjMKLy8gPT09PT09PT09PQpnbG9iYWxUaGlzLnZlY3RvcjMgPSB7fTsKCnZlY3RvcjMuemVybyA9ICgpID0+IHsKCXJldHVybiB7eDogMCwgeTogMCwgejogMH0KfQoKdmVjdG9yMy51cCA9ICgpID0+IHsKCXJldHVybiB7eDogMCwgeTogMSwgejogMH0KfQoKdmVjdG9yMy5vbmUgPSAoKSA9PiB7CglyZXR1cm4ge3g6IDEsIHk6IDEsIHo6IDF9Cn0KCnZlY3RvcjMuYXBwbHlRdWF0ZXJuaW9uID0gKHYsIHEpID0+IHsKCQljb25zdCB4ID0gdi54LCB5ID0gdi55LCB6ID0gdi56OwoJCWNvbnN0IHF4ID0gcS54LCBxeSA9IHEueSwgcXogPSBxLnosIHF3ID0gcS53OwoKCQkvLyBjYWxjdWxhdGUgcXVhdCAqIHZlY3RvcgoJCWNvbnN0IGl4ID0gcXcgKiB4ICsgcXkgKiB6IC0gcXogKiB5OwoJCWNvbnN0IGl5ID0gcXcgKiB5ICsgcXogKiB4IC0gcXggKiB6OwoJCWNvbnN0IGl6ID0gcXcgKiB6ICsgcXggKiB5IC0gcXkgKiB4OwoJCWNvbnN0IGl3ID0gLSBxeCAqIHggLSBxeSAqIHkgLSBxeiAqIHo7CgoJCS8vIGNhbGN1bGF0ZSByZXN1bHQgKiBpbnZlcnNlIHF1YXQKCQl2LnggPSBpeCAqIHF3ICsgaXcgKiAtIHF4ICsgaXkgKiAtIHF6IC0gaXogKiAtIHF5OwoJCXYueSA9IGl5ICogcXcgKyBpdyAqIC0gcXkgKyBpeiAqIC0gcXggLSBpeCAqIC0gcXo7CgkJdi56ID0gaXogKiBxdyArIGl3ICogLSBxeiArIGl4ICogLSBxeSAtIGl5ICogLSBxeDsKCgkJcmV0dXJuIHY7Cn0KCnZlY3RvcjMubGVuZ3RoU3EgPSAodikgPT4gewogICAgcmV0dXJuIHYueCAqIHYueCArIHYueSAqIHYueSArIHYueiAqIHYuejsKfQoKdmVjdG9yMy5kb3QgPSAodjEsIHYyKSA9PiB7CiAgICByZXR1cm4gdjEueCAqIHYyLnggKyB2MS55ICogdjIueSArIHYxLnogKiB2Mi56Owp9Cgp2ZWN0b3IzLmFuZ2xlID0gKHYxLCB2MikgPT4gewoJCWNvbnN0IGRlbm9taW5hdG9yID0gTWF0aC5zcXJ0KCB2ZWN0b3IzLmxlbmd0aFNxKHYxKSAqIHZlY3RvcjMubGVuZ3RoU3EodjIpICk7CgkJaWYgKCBkZW5vbWluYXRvciA9PT0gMCApIHJldHVybiBNYXRoLlBJIC8gMjsKCgkJY29uc3QgdGhldGEgPSB2ZWN0b3IzLmRvdCh2MSwgdjIpIC8gZGVub21pbmF0b3I7CgkJLy8gY2xhbXAsIHRvIGhhbmRsZSBudW1lcmljYWwgcHJvYmxlbXMKCQlyZXR1cm4gTWF0aC5hY29zKG1hdGhVdGlscy5jbGFtcCh0aGV0YSwgLSAxLCAxKSk7Cn0KCnZlY3RvcjMubGVycCA9ICh2MSwgdjIsIHQpID0+IHsKICAgIHJldHVybiB7CiAgICAgICAgeDogdjEueCArICh2Mi54IC0gdjEueCkgKiB0LAoJCXk6IHYxLnkgKyAodjIueSAtIHYxLnkpICogdCwKCQl6OiB2MS56ICsgKHYyLnogLSB2MS56KSAqIHQKICAgIH0KfQoKdmVjdG9yMy5sZW5ndGggPSAodikgPT4gewoJcmV0dXJuIE1hdGguc3FydCh2LnggKiB2LnggKyB2LnkgKiB2LnkgKyB2LnogKiB2LnopOwp9Cgp2ZWN0b3IzLmxlbmd0aFNxID0gKHYpID0+IHsKCXJldHVybiB2LnggKiB2LnggKyB2LnkgKiB2LnkgKyB2LnogKiB2Lno7Cn0KCnZlY3RvcjMuYXBwbHlNYXRyaXg0ID0gKHYsIG0pID0+IHsKCWNvbnN0IHggPSB2LngsIHkgPSB2LnksIHogPSB2Lno7Cgljb25zdCB3ID0gMSAvIChtWzNdICogeCArIG1bN10gKiB5ICsgbVsxMV0gKiB6ICsgbVsxNV0pOwoKCXYueCA9IChtWzBdICogeCArIG1bNF0gKiB5ICsgbVs4XSAqIHogKyBtWzEyXSkgKiB3OwoJdi55ID0gKG1bMV0gKiB4ICsgbVs1XSAqIHkgKyBtWzldICogeiArIG1bMTNdKSAqIHc7Cgl2LnogPSAobVsyXSAqIHggKyBtWzZdICogeSArIG1bMTBdICogeiArIG1bMTRdKSAqIHc7CgoJcmV0dXJuIHY7Cn0KCnZlY3RvcjMubXVsdGlwbHlTY2FsYXIgPSAodiwgcykgPT4gewoJdi54ICo9IHM7Cgl2LnkgKj0gczsKCXYueiAqPSBzOwoKCXJldHVybiB2Owp9Cgp2ZWN0b3IzLmNyb3NzVmVjdG9ycyA9IChhLCBiKSA9PiB7Cgljb25zdCB2ID0gdmVjdG9yMy56ZXJvKCk7Cgljb25zdCBheCA9IGEueCwgYXkgPSBhLnksIGF6ID0gYS56OwoJY29uc3QgYnggPSBiLngsIGJ5ID0gYi55LCBieiA9IGIuejsKCgl2LnggPSBheSAqIGJ6IC0gYXogKiBieTsKCXYueSA9IGF6ICogYnggLSBheCAqIGJ6OwoJdi56ID0gYXggKiBieSAtIGF5ICogYng7CglyZXR1cm4gdjsKfQoKdmVjdG9yMy5hcHBseUV1bGVyID0gKHYsIGV1bGVyLCBvcmRlciA9ICdYWVonKSA9PiB7CglyZXR1cm4gdmVjdG9yMy5hcHBseVF1YXRlcm5pb24odiwgcXVhdGVybmlvbi5mcm9tRXVsZXIoZXVsZXIsIG9yZGVyKSk7Cn0KCnZlY3RvcjMuYXBwbHlBeGlzQW5nbGUgPSAodiwgYXhpcywgYW5nbGUpID0+IHsKCXJldHVybiB2ZWN0b3IzLmFwcGx5UXVhdGVybmlvbiggdiwgcXVhdGVybmlvbi5zZXRGcm9tQXhpc0FuZ2xlKCBheGlzLCBhbmdsZSApICk7Cn0KCnZlY3RvcjMuc2V0RnJvbVJvdGF0aW9uTWF0cml4ID0gKG0sIG9yZGVyID0gJ1hZWicpID0+IHsKCS8vIGFzc3VtZXMgdGhlIHVwcGVyIDN4MyBvZiBtIGlzIGEgcHVyZSByb3RhdGlvbiBtYXRyaXggKGkuZSwgdW5zY2FsZWQpCgkvLyBjb25zb2xlLmxvZyhgW3ZlY3RvcjMuc2V0RnJvbVJvdGF0aW9uTWF0cml4XSAxLiBtYXRyaXhgLCBKU09OLnN0cmluZ2lmeShtKSk7Cgljb25zdCBtMTEgPSBtWzBdLCBtMTIgPSBtWzRdLCBtMTMgPSBtWzhdOwoJY29uc3QgbTIxID0gbVsxXSwgbTIyID0gbVs1XSwgbTIzID0gbVs5XTsKCWNvbnN0IG0zMSA9IG1bMl0sIG0zMiA9IG1bNl0sIG0zMyA9IG1bMTBdOwoJY29uc3QgdiA9IHZlY3RvcjMuemVybygpOwoKCXN3aXRjaCAob3JkZXIpIHsKCQljYXNlICdYWVonOgoJCQl2LnkgPSBNYXRoLmFzaW4obWF0aFV0aWxzLmNsYW1wKG0xMywgLSAxLCAxKSk7CgoJCQlpZiAoTWF0aC5hYnMobTEzKSA8IDAuOTk5OTk5OSkgewoJCQkJdi54ID0gTWF0aC5hdGFuMigtIG0yMywgbTMzKTsKCQkJCXYueiA9IE1hdGguYXRhbjIoLSBtMTIsIG0xMSk7CgkJCX0gZWxzZSB7CgkJCQl2LnggPSBNYXRoLmF0YW4yKG0zMiwgbTIyKTsKCQkJCXYueiA9IDA7CgkJCX0KCQkJLy8gY29uc29sZS5sb2coYFt2ZWN0b3IzLnNldEZyb21Sb3RhdGlvbk1hdHJpeF0gMi4gWFlaIHN3aXp6bGVgLCBKU09OLnN0cmluZ2lmeSh2KSk7CgkJCWJyZWFrOwoJCWNhc2UgJ1lYWic6CgkJCXYueCA9IE1hdGguYXNpbigtIG1hdGhVdGlscy5jbGFtcChtMjMsIC0gMSwgMSkpOwoKCQkJaWYgKE1hdGguYWJzKG0yMykgPCAwLjk5OTk5OTkpIHsKCQkJCXYueSA9IE1hdGguYXRhbjIobTEzLCBtMzMpOwoJCQkJdi56ID0gTWF0aC5hdGFuMihtMjEsIG0yMik7CgkJCX0gZWxzZSB7CgkJCQl2LnkgPSBNYXRoLmF0YW4yKC0gbTMxLCBtMTEpOwoJCQkJdi56ID0gMDsKCQkJfQoJCQlicmVhazsKCQljYXNlICdaWFknOgoJCQl2LnggPSBNYXRoLmFzaW4obWF0aFV0aWxzLmNsYW1wKG0zMiwgLSAxLCAxKSk7CgoJCQlpZiAoTWF0aC5hYnMobTMyKSA8IDAuOTk5OTk5OSkgewoJCQkJdi55ID0gTWF0aC5hdGFuMigtIG0zMSwgbTMzKTsKCQkJCXYueiA9IE1hdGguYXRhbjIoLSBtMTIsIG0yMik7CgkJCX0gZWxzZSB7CgkJCQl2LnkgPSAwOwoJCQkJdi56ID0gTWF0aC5hdGFuMihtMjEsIG0xMSk7CgkJCX0KCQkJYnJlYWs7CgkJY2FzZSAnWllYJzoKCQkJdi55ID0gTWF0aC5hc2luKC0gbWF0aFV0aWxzLmNsYW1wKG0zMSwgLSAxLCAxKSk7CgoJCQlpZiAoTWF0aC5hYnMobTMxKSA8IDAuOTk5OTk5OSkgewoJCQkJdi54ID0gTWF0aC5hdGFuMihtMzIsIG0zMyk7CgkJCQl2LnogPSBNYXRoLmF0YW4yKG0yMSwgbTExKTsKCQkJfSBlbHNlIHsKCQkJCXYueCA9IDA7CgkJCQl2LnogPSBNYXRoLmF0YW4yKC0gbTEyLCBtMjIpOwoJCQl9CgkJCWJyZWFrOwoJCWNhc2UgJ1laWCc6CgkJCXYueiA9IE1hdGguYXNpbihtYXRoVXRpbHMuY2xhbXAobTIxLCAtIDEsIDEpKTsKCgkJCWlmIChNYXRoLmFicyhtMjEpIDwgMC45OTk5OTk5KSB7CgkJCQl2LnggPSBNYXRoLmF0YW4yKC0gbTIzLCBtMjIpOwoJCQkJdi55ID0gTWF0aC5hdGFuMigtIG0zMSwgbTExKTsKCQkJfSBlbHNlIHsKCQkJCXYueCA9IDA7CgkJCQl2LnkgPSBNYXRoLmF0YW4yKG0xMywgbTMzKTsKCQkJfQoJCQlicmVhazsKCQljYXNlICdYWlknOgoJCQl2LnogPSBNYXRoLmFzaW4oLSBtYXRoVXRpbHMuY2xhbXAobTEyLCAtIDEsIDEpKTsKCgkJCWlmIChNYXRoLmFicyhtMTIpIDwgMC45OTk5OTk5KSB7CgkJCQl2LnggPSBNYXRoLmF0YW4yKG0zMiwgbTIyKTsKCQkJCXYueSA9IE1hdGguYXRhbjIobTEzLCBtMTEpOwoJCQl9IGVsc2UgewoJCQkJdi54ID0gTWF0aC5hdGFuMigtIG0yMywgbTMzKTsKCQkJCXYueSA9IDA7CgkJCX0KCQkJYnJlYWs7CgkJZGVmYXVsdDoKCQkJY29uc29sZS53YXJuKCdbdmVjdG9yMy5zZXRGcm9tUm90YXRpb25NYXRyaXhdIGVuY291bnRlcmVkIGFuIHVua25vd24gb3JkZXI6ICcgKyBvcmRlcik7Cgl9CgoJcmV0dXJuIHY7Cn0KCnZlY3RvcjMuc2V0RnJvbVF1YXRlcm5pb24gPSAocSwgb3JkZXIgPSAnWFlaJykgPT4gewoJY29uc3QgbSA9IG1hdHJpeDQuY29tcG9zZSh2ZWN0b3IzLnplcm8oKSwgcSwgdmVjdG9yMy5vbmUoKSk7CglyZXR1cm4gdmVjdG9yMy5zZXRGcm9tUm90YXRpb25NYXRyaXgobSwgb3JkZXIpOwp9Cgp2ZWN0b3IzLmxvY2FsVG9Xb3JsZCA9ICh2ZWN0b3IsIG1hdHJpeFdvcmxkKSA9PiB7CglyZXR1cm4gdmVjdG9yMy5hcHBseU1hdHJpeDQodmVjdG9yLCBtYXRyaXhXb3JsZCk7Cn0KCnZlY3RvcjMud29ybGRUb0xvY2FsID0gKHZlY3RvciwgbWF0cml4V29ybGQpID0+IHsKCWNvbnN0IGludmVyc2VNYXRyaXggPSBtYXRyaXg0LmludmVydChbLi4ubWF0cml4V29ybGRdKTsKCXJldHVybiB2ZWN0b3IzLmFwcGx5TWF0cml4NCh2ZWN0b3IsIGludmVyc2VNYXRyaXgpOwp9CgovLyA9PT09PT09PT09Ci8vIHF1YXRlcm5pb24KLy8gPT09PT09PT09PQpnbG9iYWxUaGlzLnF1YXRlcm5pb24gPSB7fTsKCnF1YXRlcm5pb24uaWRlbnRpdHkgPSAoKSA9PiB7CglyZXR1cm4ge3g6IDAsIHk6IDAsIHo6IDAsIHc6IDF9Owp9CgpxdWF0ZXJuaW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeCA9IChxLCBtKSA9PiB7CgkvLyBodHRwOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9nZW9tZXRyeS9yb3RhdGlvbnMvY29udmVyc2lvbnMvbWF0cml4VG9RdWF0ZXJuaW9uL2luZGV4Lmh0bQoJLy8gYXNzdW1lcyB0aGUgdXBwZXIgM3gzIG9mIG0gaXMgYSBwdXJlIHJvdGF0aW9uIG1hdHJpeCAoaS5lLCB1bnNjYWxlZCkKCgljb25zdCBtMTEgPSBtWyAwIF0sIG0xMiA9IG1bIDQgXSwgbTEzID0gbVsgOCBdOwoJY29uc3QgbTIxID0gbVsgMSBdLCBtMjIgPSBtWyA1IF0sIG0yMyA9IG1bIDkgXTsKCWNvbnN0IG0zMSA9IG1bIDIgXSwgbTMyID0gbVsgNiBdLCBtMzMgPSBtWyAxMCBdOwoKCWNvbnN0IHRyYWNlID0gbTExICsgbTIyICsgbTMzOwoKCWlmICggdHJhY2UgPiAwICkgewoJCWNvbnN0IHMgPSAwLjUgLyBNYXRoLnNxcnQoIHRyYWNlICsgMS4wICk7CgoJCXEudyA9IDAuMjUgLyBzOwoJCXEueCA9ICggbTMyIC0gbTIzICkgKiBzOwoJCXEueSA9ICggbTEzIC0gbTMxICkgKiBzOwoJCXEueiA9ICggbTIxIC0gbTEyICkgKiBzOwoJfSBlbHNlIGlmICggbTExID4gbTIyICYmIG0xMSA+IG0zMyApIHsKCQljb25zdCBzID0gMi4wICogTWF0aC5zcXJ0KCAxLjAgKyBtMTEgLSBtMjIgLSBtMzMgKTsKCgkJcS53ID0gKCBtMzIgLSBtMjMgKSAvIHM7CgkJcS54ID0gMC4yNSAqIHM7CgkJcS55ID0gKCBtMTIgKyBtMjEgKSAvIHM7CgkJcS56ID0gKCBtMTMgKyBtMzEgKSAvIHM7Cgl9IGVsc2UgaWYgKCBtMjIgPiBtMzMgKSB7CgkJY29uc3QgcyA9IDIuMCAqIE1hdGguc3FydCggMS4wICsgbTIyIC0gbTExIC0gbTMzICk7CgoJCXEudyA9ICggbTEzIC0gbTMxICkgLyBzOwoJCXEueCA9ICggbTEyICsgbTIxICkgLyBzOwoJCXEueSA9IDAuMjUgKiBzOwoJCXEueiA9ICggbTIzICsgbTMyICkgLyBzOwoJfSBlbHNlIHsKCQljb25zdCBzID0gMi4wICogTWF0aC5zcXJ0KCAxLjAgKyBtMzMgLSBtMTEgLSBtMjIgKTsKCgkJcS53ID0gKCBtMjEgLSBtMTIgKSAvIHM7CgkJcS54ID0gKCBtMTMgKyBtMzEgKSAvIHM7CgkJcS55ID0gKCBtMjMgKyBtMzIgKSAvIHM7CgkJcS56ID0gMC4yNSAqIHM7Cgl9CgoJcmV0dXJuIHE7Cn0JCgpxdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUgPSAoYXhpcywgYW5nbGUpID0+IHsKCS8vIGh0dHA6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL2dlb21ldHJ5L3JvdGF0aW9ucy9jb252ZXJzaW9ucy9hbmdsZVRvUXVhdGVybmlvbi9pbmRleC5odG0KCS8vIGFzc3VtZXMgYXhpcyBpcyBub3JtYWxpemVkCgljb25zdCBxID0gcXVhdGVybmlvbi5pZGVudGl0eSgpOwoJY29uc3QgaGFsZkFuZ2xlID0gYW5nbGUgLyAyLCBzID0gTWF0aC5zaW4oIGhhbGZBbmdsZSApOwoKCXEueCA9IGF4aXMueCAqIHM7CglxLnkgPSBheGlzLnkgKiBzOwoJcS56ID0gYXhpcy56ICogczsKCXEudyA9IE1hdGguY29zKGhhbGZBbmdsZSk7CgoJcmV0dXJuIHE7Cn0KCnF1YXRlcm5pb24uZnJvbUV1bGVyID0gKGV1bGVyLCBvcmRlciA9ICdYWVonKSA9PiB7Cgljb25zdCBxID0gcXVhdGVybmlvbi5pZGVudGl0eSgpOwoJY29uc3QgeCA9IGV1bGVyLngsIHkgPSBldWxlci55LCB6ID0gZXVsZXIuejsKCgkvLyBodHRwOi8vd3d3Lm1hdGh3b3Jrcy5jb20vbWF0bGFiY2VudHJhbC9maWxlZXhjaGFuZ2UvCgkvLyAJMjA2OTYtZnVuY3Rpb24tdG8tY29udmVydC1iZXR3ZWVuLWRjbS1ldWxlci1hbmdsZXMtcXVhdGVybmlvbnMtYW5kLWV1bGVyLXZlY3RvcnMvY29udGVudC9TcGluQ2FsYy5tCgljb25zdCBjMSA9IE1hdGguY29zKCB4IC8gMiApOwoJY29uc3QgYzIgPSBNYXRoLmNvcyggeSAvIDIgKTsKCWNvbnN0IGMzID0gTWF0aC5jb3MoIHogLyAyICk7CgoJY29uc3QgczEgPSBNYXRoLnNpbiggeCAvIDIgKTsKCWNvbnN0IHMyID0gTWF0aC5zaW4oIHkgLyAyICk7Cgljb25zdCBzMyA9IE1hdGguc2luKCB6IC8gMiApOwoKCXN3aXRjaCAoIG9yZGVyICkgewoJCWNhc2UgJ1hZWic6CgkJCXEueCA9IHMxICogYzIgKiBjMyArIGMxICogczIgKiBzMzsKCQkJcS55ID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzOwoJCQlxLnogPSBjMSAqIGMyICogczMgKyBzMSAqIHMyICogYzM7CgkJCXEudyA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMzsKCQkJYnJlYWs7CgkJY2FzZSAnWVhaJzoKCQkJcS54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwoJCQlxLnkgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7CgkJCXEueiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMzsKCQkJcS53ID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzOwoJCQlicmVhazsKCQljYXNlICdaWFknOgoJCQlxLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7CgkJCXEueSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMzsKCQkJcS56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwoJCQlxLncgPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7CgkJCWJyZWFrOwoJCWNhc2UgJ1pZWCc6CgkJCXEueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMzsKCQkJcS55ID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzOwoJCQlxLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7CgkJCXEudyA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMzsKCQkJYnJlYWs7CgkJY2FzZSAnWVpYJzoKCQkJcS54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwoJCQlxLnkgPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7CgkJCXEueiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMzsKCQkJcS53ID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzOwoJCQlicmVhazsKCQljYXNlICdYWlknOgoJCQlxLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7CgkJCXEueSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMzsKCQkJcS56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwoJCQlxLncgPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7CgkJCWJyZWFrOwoJCWRlZmF1bHQ6CgkJCWNvbnNvbGUud2FybiggJ1txdWF0ZXJuaW9uLmZyb21FdWxlcl0gZW5jb3VudGVyZWQgYW4gdW5rbm93biBvcmRlcjogJyArIG9yZGVyKTsKCX0KCglyZXR1cm4gcTsKfQoKcXVhdGVybmlvbi5tdWx0aXBseVF1YXRlcm5pb25zID0gKGEsIGIpID0+IHsKCS8vIGZyb20gaHR0cDovL3d3dy5ldWNsaWRlYW5zcGFjZS5jb20vbWF0aHMvYWxnZWJyYS9yZWFsTm9ybWVkQWxnZWJyYS9xdWF0ZXJuaW9ucy9jb2RlL2luZGV4Lmh0bQoJY29uc29sZS5sb2coYFtxdWF0ZXJuaW9uLm11bHRpcGx5UXVhdGVybmlvbnNdIGE6YCwgSlNPTi5zdHJpbmdpZnkoYSkpOwoJY29uc29sZS5sb2coYFtxdWF0ZXJuaW9uLm11bHRpcGx5UXVhdGVybmlvbnNdIGI6YCwgSlNPTi5zdHJpbmdpZnkoYikpOwoJY29uc3QgcSA9IHF1YXRlcm5pb24uaWRlbnRpdHkoKTsKCWNvbnN0IHFheCA9IGEueCwgcWF5ID0gYS55LCBxYXogPSBhLnosIHFhdyA9IGEudzsKCWNvbnN0IHFieCA9IGIueCwgcWJ5ID0gYi55LCBxYnogPSBiLnosIHFidyA9IGIudzsKCglxLnggPSBxYXggKiBxYncgKyBxYXcgKiBxYnggKyBxYXkgKiBxYnogLSBxYXogKiBxYnk7CglxLnkgPSBxYXkgKiBxYncgKyBxYXcgKiBxYnkgKyBxYXogKiBxYnggLSBxYXggKiBxYno7CglxLnogPSBxYXogKiBxYncgKyBxYXcgKiBxYnogKyBxYXggKiBxYnkgLSBxYXkgKiBxYng7CglxLncgPSBxYXcgKiBxYncgLSBxYXggKiBxYnggLSBxYXkgKiBxYnkgLSBxYXogKiBxYno7CgoJcmV0dXJuIHE7Cn0KCnF1YXRlcm5pb24ubGVuZ3RoID0gKHEpID0+IHsKCXJldHVybiBNYXRoLnNxcnQoIHEueCAqIHEueCArIHEueSAqIHEueSArIHEueiAqIHEueiArIHEudyAqIHEudyApOwp9CgpxdWF0ZXJuaW9uLm5vcm1hbGl6ZSA9IChxKSA9PiB7CglsZXQgbCA9IHF1YXRlcm5pb24ubGVuZ3RoKHEpOwoKCWlmIChsID09PSAwKSB7CgkJcS54ID0gMDsKCQlxLnkgPSAwOwoJCXEueiA9IDA7CgkJcS53ID0gMTsKCX0gZWxzZSB7CgkJbCA9IDEgLyBsOwoKCQlxLnggPSBxLnggKiBsOwoJCXEueSA9IHEueSAqIGw7CgkJcS56ID0gcS56ICogbDsKCQlxLncgPSBxLncgKiBsOwoJfQoKCXJldHVybiBxOwp9CgpxdWF0ZXJuaW9uLmludmVydCA9IChxKSA9PiB7CgkvLyBxdWF0ZXJuaW9uIGlzIGFzc3VtZWQgdG8gaGF2ZSB1bml0IGxlbmd0aAoJcmV0dXJuIHF1YXRlcm5pb24uY29uanVnYXRlKHEpOwp9CgpxdWF0ZXJuaW9uLmNvbmp1Z2F0ZSA9IChxKSA9PiB7CglxLnggKj0gLSAxOwoJcS55ICo9IC0gMTsKCXEueiAqPSAtIDE7CgoJcmV0dXJuIHE7Cn0KCi8vID09PT09PT09PT0KLy8gbWF0cml4NAovLyA9PT09PT09PT09Cmdsb2JhbFRoaXMubWF0cml4NCA9IHt9OwoKbWF0cml4NC5pZGVudGl0eSA9ICgpID0+IHsKCXJldHVybiBbCgkJMSwgMCwgMCwgMCwKCQkwLCAxLCAwLCAwLAoJCTAsIDAsIDEsIDAsCgkJMCwgMCwgMCwgMQoJXTsKfQoKbWF0cml4NC5tdWx0aXBseU1hdHJpY2VzID0gKG0sIGEsIGIpID0+IHsKCWNvbnN0IGExMSA9IGFbMF0sIGExMiA9IGFbNF0sIGExMyA9IGFbOF0sIGExNCA9IGFbMTJdOwoJY29uc3QgYTIxID0gYVsxXSwgYTIyID0gYVs1XSwgYTIzID0gYVs5XSwgYTI0ID0gYVsxM107Cgljb25zdCBhMzEgPSBhWzJdLCBhMzIgPSBhWzZdLCBhMzMgPSBhWzEwXSwgYTM0ID0gYVsxNF07Cgljb25zdCBhNDEgPSBhWzNdLCBhNDIgPSBhWzddLCBhNDMgPSBhWzExXSwgYTQ0ID0gYVsxNV07CgoJY29uc3QgYjExID0gYlswXSwgYjEyID0gYls0XSwgYjEzID0gYls4XSwgYjE0ID0gYlsxMl07Cgljb25zdCBiMjEgPSBiWzFdLCBiMjIgPSBiWzVdLCBiMjMgPSBiWzldLCBiMjQgPSBiWzEzXTsKCWNvbnN0IGIzMSA9IGJbMl0sIGIzMiA9IGJbNl0sIGIzMyA9IGJbMTBdLCBiMzQgPSBiWzE0XTsKCWNvbnN0IGI0MSA9IGJbM10sIGI0MiA9IGJbN10sIGI0MyA9IGJbMTFdLCBiNDQgPSBiWzE1XTsKCgltWzBdID0gYTExICogYjExICsgYTEyICogYjIxICsgYTEzICogYjMxICsgYTE0ICogYjQxOwoJbVs0XSA9IGExMSAqIGIxMiArIGExMiAqIGIyMiArIGExMyAqIGIzMiArIGExNCAqIGI0MjsKCW1bOF0gPSBhMTEgKiBiMTMgKyBhMTIgKiBiMjMgKyBhMTMgKiBiMzMgKyBhMTQgKiBiNDM7CgltWzEyXSA9IGExMSAqIGIxNCArIGExMiAqIGIyNCArIGExMyAqIGIzNCArIGExNCAqIGI0NDsKCgltWzFdID0gYTIxICogYjExICsgYTIyICogYjIxICsgYTIzICogYjMxICsgYTI0ICogYjQxOwoJbVs1XSA9IGEyMSAqIGIxMiArIGEyMiAqIGIyMiArIGEyMyAqIGIzMiArIGEyNCAqIGI0MjsKCW1bOV0gPSBhMjEgKiBiMTMgKyBhMjIgKiBiMjMgKyBhMjMgKiBiMzMgKyBhMjQgKiBiNDM7CgltWzEzXSA9IGEyMSAqIGIxNCArIGEyMiAqIGIyNCArIGEyMyAqIGIzNCArIGEyNCAqIGI0NDsKCgltWzJdID0gYTMxICogYjExICsgYTMyICogYjIxICsgYTMzICogYjMxICsgYTM0ICogYjQxOwoJbVs2XSA9IGEzMSAqIGIxMiArIGEzMiAqIGIyMiArIGEzMyAqIGIzMiArIGEzNCAqIGI0MjsKCW1bMTBdID0gYTMxICogYjEzICsgYTMyICogYjIzICsgYTMzICogYjMzICsgYTM0ICogYjQzOwoJbVsxNF0gPSBhMzEgKiBiMTQgKyBhMzIgKiBiMjQgKyBhMzMgKiBiMzQgKyBhMzQgKiBiNDQ7CgoJbVszXSA9IGE0MSAqIGIxMSArIGE0MiAqIGIyMSArIGE0MyAqIGIzMSArIGE0NCAqIGI0MTsKCW1bN10gPSBhNDEgKiBiMTIgKyBhNDIgKiBiMjIgKyBhNDMgKiBiMzIgKyBhNDQgKiBiNDI7CgltWzExXSA9IGE0MSAqIGIxMyArIGE0MiAqIGIyMyArIGE0MyAqIGIzMyArIGE0NCAqIGI0MzsKCW1bMTVdID0gYTQxICogYjE0ICsgYTQyICogCWIyNCArIGE0MyAqIGIzNCArIGE0NCAqIGI0NDsKCglyZXR1cm4gbTsKfQoKbWF0cml4NC5pbnZlcnQgPSAobSkgPT4gewoJLy8gYmFzZWQgb24gaHR0cDovL3d3dy5ldWNsaWRlYW5zcGFjZS5jb20vbWF0aHMvYWxnZWJyYS9tYXRyaXgvZnVuY3Rpb25zL2ludmVyc2UvZm91ckQvaW5kZXguaHRtCgljb25zdCBuMTEgPSBtWzBdLCBuMjEgPSBtWzFdLCBuMzEgPSBtWzJdLCBuNDEgPSBtWzNdOwoJY29uc3QgbjEyID0gbVs0XSwgbjIyID0gbVs1XSwgbjMyID0gbVs2XSwgbjQyID0gbVs3XTsKCWNvbnN0IG4xMyA9IG1bOF0sIG4yMyA9IG1bOV0sIG4zMyA9IG1bMTBdLCBuNDMgPSBtWzExXTsKCWNvbnN0IG4xNCA9IG1bMTJdLCBuMjQgPSBtWzEzXSwgbjM0ID0gbVsxNF0sIG40NCA9IG1bMTVdOwoKCWNvbnN0IHQxMSA9IG4yMyAqIG4zNCAqIG40MiAtIG4yNCAqIG4zMyAqIG40MiArIG4yNCAqIG4zMiAqIG40MyAtIG4yMiAqIG4zNCAqIG40MyAtIG4yMyAqIG4zMiAqIG40NCArIG4yMiAqIG4zMyAqIG40NDsKCWNvbnN0IHQxMiA9IG4xNCAqIG4zMyAqIG40MiAtIG4xMyAqIG4zNCAqIG40MiAtIG4xNCAqIG4zMiAqIG40MyArIG4xMiAqIG4zNCAqIG40MyArIG4xMyAqIG4zMiAqIG40NCAtIG4xMiAqIG4zMyAqIG40NDsKCWNvbnN0IHQxMyA9IG4xMyAqIG4yNCAqIG40MiAtIG4xNCAqIG4yMyAqIG40MiArIG4xNCAqIG4yMiAqIG40MyAtIG4xMiAqIG4yNCAqIG40MyAtIG4xMyAqIG4yMiAqIG40NCArIG4xMiAqIG4yMyAqIG40NDsKCWNvbnN0IHQxNCA9IG4xNCAqIG4yMyAqIG4zMiAtIG4xMyAqIG4yNCAqIG4zMiAtIG4xNCAqIG4yMiAqIG4zMyArIG4xMiAqIG4yNCAqIG4zMyArIG4xMyAqIG4yMiAqIG4zNCAtIG4xMiAqIG4yMyAqIG4zNDsKCgljb25zdCBkZXQgPSBuMTEgKiB0MTEgKyBuMjEgKiB0MTIgKyBuMzEgKiB0MTMgKyBuNDEgKiB0MTQ7CgoJaWYgKGRldCA9PT0gMCkgcmV0dXJuIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTsKCgljb25zdCBkZXRJbnYgPSAxIC8gZGV0OwoKCW1bMF0gPSB0MTEgKiBkZXRJbnY7CgltWzFdID0gKG4yNCAqIG4zMyAqIG40MSAtIG4yMyAqIG4zNCAqIG40MSAtIG4yNCAqIG4zMSAqIG40MyArIG4yMSAqIG4zNCAqIG40MyArIG4yMyAqIG4zMSAqIG40NCAtIG4yMSAqIG4zMyAqIG40NCkgKiBkZXRJbnY7CgltWzJdID0gKG4yMiAqIG4zNCAqIG40MSAtIG4yNCAqIG4zMiAqIG40MSArIG4yNCAqIG4zMSAqIG40MiAtIG4yMSAqIG4zNCAqIG40MiAtIG4yMiAqIG4zMSAqIG40NCArIG4yMSAqIG4zMiAqIG40NCkgKiBkZXRJbnY7CgltWzNdID0gKG4yMyAqIG4zMiAqIG40MSAtIG4yMiAqIG4zMyAqIG40MSAtIG4yMyAqIG4zMSAqIG40MiArIG4yMSAqIG4zMyAqIG40MiArIG4yMiAqIG4zMSAqIG40MyAtIG4yMSAqIG4zMiAqIG40MykgKiBkZXRJbnY7CgoJbVs0XSA9IHQxMiAqIGRldEludjsKCW1bNV0gPSAobjEzICogbjM0ICogbjQxIC0gbjE0ICogbjMzICogbjQxICsgbjE0ICogbjMxICogbjQzIC0gbjExICogbjM0ICogbjQzIC0gbjEzICogbjMxICogbjQ0ICsgbjExICogbjMzICogbjQ0KSAqIGRldEludjsKCW1bNl0gPSAobjE0ICogbjMyICogbjQxIC0gbjEyICogbjM0ICogbjQxIC0gbjE0ICogbjMxICogbjQyICsgbjExICogbjM0ICogbjQyICsgbjEyICogbjMxICogbjQ0IC0gbjExICogbjMyICogbjQ0KSAqIGRldEludjsKCW1bN10gPSAobjEyICogbjMzICogbjQxIC0gbjEzICogbjMyICogbjQxICsgbjEzICogbjMxICogbjQyIC0gbjExICogbjMzICogbjQyIC0gbjEyICogbjMxICogbjQzICsgbjExICogbjMyICogbjQzKSAqIGRldEludjsKCgltWzhdID0gdDEzICogZGV0SW52OwoJbVs5XSA9IChuMTQgKiBuMjMgKiBuNDEgLSBuMTMgKiBuMjQgKiBuNDEgLSBuMTQgKiBuMjEgKiBuNDMgKyBuMTEgKiBuMjQgKiBuNDMgKyBuMTMgKiBuMjEgKiBuNDQgLSBuMTEgKiBuMjMgKiBuNDQpICogZGV0SW52OwoJbVsxMF0gPSAobjEyICogbjI0ICogbjQxIC0gbjE0ICogbjIyICogbjQxICsgbjE0ICogbjIxICogbjQyIC0gbjExICogbjI0ICogbjQyIC0gbjEyICogbjIxICogbjQ0ICsgbjExICogbjIyICogbjQ0KSAqIGRldEludjsKCW1bMTFdID0gKG4xMyAqIG4yMiAqIG40MSAtIG4xMiAqIG4yMyAqIG40MSAtIG4xMyAqIG4yMSAqIG40MiArIG4xMSAqIG4yMyAqIG40MiArIG4xMiAqIG4yMSAqIG40MyAtIG4xMSAqIG4yMiAqIG40MykgKiBkZXRJbnY7CgoJbVsxMl0gPSB0MTQgKiBkZXRJbnY7CgltWzEzXSA9IChuMTMgKiBuMjQgKiBuMzEgLSBuMTQgKiBuMjMgKiBuMzEgKyBuMTQgKiBuMjEgKiBuMzMgLSBuMTEgKiBuMjQgKiBuMzMgLSBuMTMgKiBuMjEgKiBuMzQgKyBuMTEgKiBuMjMgKiBuMzQpICogZGV0SW52OwoJbVsxNF0gPSAobjE0ICogbjIyICogbjMxIC0gbjEyICogbjI0ICogbjMxIC0gbjE0ICogbjIxICogbjMyICsgbjExICogbjI0ICogbjMyICsgbjEyICogbjIxICogbjM0IC0gbjExICogbjIyICogbjM0KSAqIGRldEludjsKCW1bMTVdID0gKG4xMiAqIG4yMyAqIG4zMSAtIG4xMyAqIG4yMiAqIG4zMSArIG4xMyAqIG4yMSAqIG4zMiAtIG4xMSAqIG4yMyAqIG4zMiAtIG4xMiAqIG4yMSAqIG4zMyArIG4xMSAqIG4yMiAqIG4zMykgKiBkZXRJbnY7CgoJcmV0dXJuIG07Cn0KCm1hdHJpeDQuY29tcG9zZSA9IChwb3NpdGlvbiwgcXVhdGVybmlvbiwgc2NhbGUpID0+IHsKCWNvbnN0IG0gPSBtYXRyaXg0LmlkZW50aXR5KCk7CgoJY29uc3QgeCA9IHF1YXRlcm5pb24ueCwgeSA9IHF1YXRlcm5pb24ueSwgeiA9IHF1YXRlcm5pb24ueiwgdyA9IHF1YXRlcm5pb24udzsKCWNvbnN0IHgyID0geCArIHgsCXkyID0geSArIHksIHoyID0geiArIHo7Cgljb25zdCB4eCA9IHggKiB4MiwgeHkgPSB4ICogeTIsIHh6ID0geCAqIHoyOwoJY29uc3QgeXkgPSB5ICogeTIsIHl6ID0geSAqIHoyLCB6eiA9IHogKiB6MjsKCWNvbnN0IHd4ID0gdyAqIHgyLCB3eSA9IHcgKiB5Miwgd3ogPSB3ICogejI7CgoJY29uc3Qgc3ggPSBzY2FsZS54LCBzeSA9IHNjYWxlLnksIHN6ID0gc2NhbGUuejsKCgltWzBdID0gKCAxIC0gKCB5eSArIHp6ICkgKSAqIHN4OwoJbVsxXSA9ICggeHkgKyB3eiApICogc3g7CgltWzJdID0gKCB4eiAtIHd5ICkgKiBzeDsKCW1bM10gPSAwOwoKCW1bNF0gPSAoIHh5IC0gd3ogKSAqIHN5OwoJbVs1XSA9ICggMSAtICggeHggKyB6eiApICkgKiBzeTsKCW1bNl0gPSAoIHl6ICsgd3ggKSAqIHN5OwoJbVs3XSA9IDA7CgoJbVs4XSA9ICggeHogKyB3eSApICogc3o7CgltWzldID0gKCB5eiAtIHd4ICkgKiBzejsKCW1bMTBdID0gKCAxIC0gKCB4eCArIHl5ICkgKSAqIHN6OwoJbVsxMV0gPSAwOwoKCW1bMTJdID0gcG9zaXRpb24ueDsKCW1bMTNdID0gcG9zaXRpb24ueTsKCW1bMTRdID0gcG9zaXRpb24uejsKCW1bMTVdID0gMTsKCglyZXR1cm4gbTsKfQoKbWF0cml4NC5kZWNvbXBvc2UgPSAobSkgPT4gewoJY29uc3QgcCA9IHZlY3RvcjMuemVybygpOwoJY29uc3QgcSA9IHF1YXRlcm5pb24uaWRlbnRpdHkoKTsKCWNvbnN0IHMgPSB2ZWN0b3IzLnplcm8oKTsKCglsZXQgc3ggPSB2ZWN0b3IzLmxlbmd0aCh7eDogbVswXSwgeTogbVsxXSwgejogbVsyXX0pOwoJY29uc3Qgc3kgPSB2ZWN0b3IzLmxlbmd0aCh7eDogbVs0XSwgeTogbVs1XSwgejogbVs2XX0pOwoJY29uc3Qgc3ogPSB2ZWN0b3IzLmxlbmd0aCh7eDogbVs4XSwgeTogbVs5XSwgejogbVsxMF19KTsKCgkvLyBpZiBkZXRlcm1pbmUgaXMgbmVnYXRpdmUsIHdlIG5lZWQgdG8gaW52ZXJ0IG9uZSBzY2FsZQoJY29uc3QgZGV0ID0gbWF0cml4NC5kZXRlcm1pbmFudChtKTsKCWlmICggZGV0IDwgMCApIHN4ID0gLSBzeDsKCglwLnggPSBtWzEyXTsKCXAueSA9IG1bMTNdOwoJcC56ID0gbVsxNF07CgoJLy8gc2NhbGUgdGhlIHJvdGF0aW9uIHBhcnQKCWxldCBtMSA9IFsuLi5tXTsKCgljb25zdCBpbnZTWCA9IDEgLyBzeDsKCWNvbnN0IGludlNZID0gMSAvIHN5OwoJY29uc3QgaW52U1ogPSAxIC8gc3o7CgoJbTFbMF0gKj0gaW52U1g7CgltMVsxXSAqPSBpbnZTWDsKCW0xWzJdICo9IGludlNYOwoKCW0xWzRdICo9IGludlNZOwoJbTFbNV0gKj0gaW52U1k7CgltMVs2XSAqPSBpbnZTWTsKCgltMVs4XSAqPSBpbnZTWjsKCW0xWzldICo9IGludlNaOwoJbTFbMTBdICo9IGludlNaOwoKCXF1YXRlcm5pb24uc2V0RnJvbVJvdGF0aW9uTWF0cml4KHEsIG0xKTsKCglzLnggPSBzeDsKCXMueSA9IHN5OwoJcy56ID0gc3o7CgoJcmV0dXJuIHsKCQlwb3NpdGlvbjogcCwKCQlxdWF0ZXJuaW9uOiBxLAoJCXNjYWxlOiBzLAoJfQp9CgptYXRyaXg0LmRldGVybWluYW50ID0gKG0pID0+IHsKCWNvbnN0IG4xMSA9IG1bIDAgXSwgbjEyID0gbVsgNCBdLCBuMTMgPSBtWyA4IF0sIG4xNCA9IG1bIDEyIF07Cgljb25zdCBuMjEgPSBtWyAxIF0sIG4yMiA9IG1bIDUgXSwgbjIzID0gbVsgOSBdLCBuMjQgPSBtWyAxMyBdOwoJY29uc3QgbjMxID0gbVsgMiBdLCBuMzIgPSBtWyA2IF0sIG4zMyA9IG1bIDEwIF0sIG4zNCA9IG1bIDE0IF07Cgljb25zdCBuNDEgPSBtWyAzIF0sIG40MiA9IG1bIDcgXSwgbjQzID0gbVsgMTEgXSwgbjQ0ID0gbVsgMTUgXTsKCgkvL1RPRE86IG1ha2UgdGhpcyBtb3JlIGVmZmljaWVudAoJLy8oIGJhc2VkIG9uIGh0dHA6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL2FsZ2VicmEvbWF0cml4L2Z1bmN0aW9ucy9pbnZlcnNlL2ZvdXJEL2luZGV4Lmh0bSApCglyZXR1cm4gKAoJCW40MSAqICgKCQkJKyBuMTQgKiBuMjMgKiBuMzIKCQkJCS0gbjEzICogbjI0ICogbjMyCgkJCQktIG4xNCAqIG4yMiAqIG4zMwoJCQkJKyBuMTIgKiBuMjQgKiBuMzMKCQkJCSsgbjEzICogbjIyICogbjM0CgkJCQktIG4xMiAqIG4yMyAqIG4zNAoJCSkgKwoJCW40MiAqICgKCQkJKyBuMTEgKiBuMjMgKiBuMzQKCQkJCS0gbjExICogbjI0ICogbjMzCgkJCQkrIG4xNCAqIG4yMSAqIG4zMwoJCQkJLSBuMTMgKiBuMjEgKiBuMzQKCQkJCSsgbjEzICogbjI0ICogbjMxCgkJCQktIG4xNCAqIG4yMyAqIG4zMQoJCSkgKwoJCW40MyAqICgKCQkJKyBuMTEgKiBuMjQgKiBuMzIKCQkJCS0gbjExICogbjIyICogbjM0CgkJCQktIG4xNCAqIG4yMSAqIG4zMgoJCQkJKyBuMTIgKiBuMjEgKiBuMzQKCQkJCSsgbjE0ICogbjIyICogbjMxCgkJCQktIG4xMiAqIG4yNCAqIG4zMQoJCSkgKwoJCW40NCAqICgKCQkJLSBuMTMgKiBuMjIgKiBuMzEKCQkJCS0gbjExICogbjIzICogbjMyCgkJCQkrIG4xMSAqIG4yMiAqIG4zMwoJCQkJKyBuMTMgKiBuMjEgKiBuMzIKCQkJCS0gbjEyICogbjIxICogbjMzCgkJCQkrIG4xMiAqIG4yMyAqIG4zMQoJCSkKCSk7Cn0KCm1hdHJpeDQubG9va0F0ID0gKG0sIGV5ZSwgdGFyZ2V0LCB1cCkgPT4gewoJbGV0IHgsIHksIHo7CgoJeiA9IG1hdGguc3VidHJhY3RWZWN0b3JzKHRhcmdldCwgZXllKTsKCglpZiAoIHZlY3RvcjMubGVuZ3RoU3EoeikgPT09IDAgKSB7CgkJLy8gZXllIGFuZCB0YXJnZXQgYXJlIGluIHRoZSBzYW1lIHBvc2l0aW9uCgkJei56ID0gMTsKCX0KCgl6ID0gbWF0aC5ub3JtYWxpemVWZWN0b3Ioeik7Cgl4ID0gdmVjdG9yMy5jcm9zc1ZlY3RvcnModXAsIHopOwoKCWlmICggdmVjdG9yMy5sZW5ndGhTcSh4KSA9PT0gMCApIHsKCQkvLyB1cCBhbmQgeiBhcmUgcGFyYWxsZWwKCQlpZiAoTWF0aC5hYnModXAueikgPT09IDEpIHsKCQkJei54ICs9IDAuMDAwMTsKCQl9IGVsc2UgewoJCQl6LnogKz0gMC4wMDAxOwoJCX0KCgkJeiA9IG1hdGgubm9ybWFsaXplVmVjdG9yKHopOwoJCXggPSB2ZWN0b3IzLmNyb3NzVmVjdG9ycyh1cCwgeik7Cgl9CgoJeCA9IG1hdGgubm9ybWFsaXplVmVjdG9yKHgpOwoJeSA9IHZlY3RvcjMuY3Jvc3NWZWN0b3JzKHosIHgpOwoKCW1bMF0gPSB4Lng7IG1bNF0gPSB5Lng7IG1bOF0gPSB6Lng7CgltWzFdID0geC55OyBtWzVdID0geS55OyBtWzldID0gei55OwoJbVsyXSA9IHguejsgbVs2XSA9IHkuejsgbVsxMF0gPSB6Lno7CgoJcmV0dXJuIG07Cn0KCm1hdHJpeDQubG9jYWxNYXRyaXhGcm9tQm90ID0gKGJvdCwgZGltZW5zaW9uKSA9PiB7Cgljb25zdCBwID0gewoJCXg6IGJvdC50YWdzW2RpbWVuc2lvbiArICJYIl0gPz8gMCwKCQl5OiBib3QudGFnc1tkaW1lbnNpb24gKyAiWSJdID8/IDAsCgkJejogYm90LnRhZ3NbZGltZW5zaW9uICsgIloiXSA/PyAwLAoJfTsKCWNvbnN0IHIgPSB7CgkJeDogYm90LnRhZ3NbZGltZW5zaW9uICsgIlJvdGF0aW9uWCJdID8/IDAsCgkJeTogYm90LnRhZ3NbZGltZW5zaW9uICsgIlJvdGF0aW9uWSJdID8/IDAsCgkJejogYm90LnRhZ3NbZGltZW5zaW9uICsgIlJvdGF0aW9uWiJdID8/IDAsCgl9OwoJY29uc3QgcSA9IHF1YXRlcm5pb24uZnJvbUV1bGVyKHIpOwoJY29uc3QgcyA9IHsKCQl4OiBib3QudGFnc1sic2NhbGVYIl0gPz8gMSwKCQl5OiBib3QudGFnc1sic2NhbGVZIl0gPz8gMSwKCQl6OiBib3QudGFnc1sic2NhbGVZIl0gPz8gMSwKCX07Cgljb25zdCBzY2FsYXIgPSBib3QudGFnc1sic2NhbGUiXSA/PyAxOwoJdmVjdG9yMy5tdWx0aXBseVNjYWxhcihzLCBzY2FsYXIpOwoKCXJldHVybiBtYXRyaXg0LmNvbXBvc2UocCwgcSwgcyk7Cn0KCm1hdHJpeDQud29ybGRNYXRyaXhGcm9tQm90ID0gKGJvdCwgZGltZW5zaW9uKSA9PiB7CglsZXQgbWF0cml4V29ybGQgPSBtYXRyaXg0LmlkZW50aXR5KCk7Cgljb25zdCBtYXRyaXhMb2NhbCA9IG1hdHJpeDQubG9jYWxNYXRyaXhGcm9tQm90KGJvdCwgZGltZW5zaW9uKTsKCgljb25zdCBwYXJlbnRJZCA9IGJvdC50YWdzLnRyYW5zZm9ybWVyOwoJbGV0IHBhcmVudCA9IHBhcmVudElkID8gZ2V0Qm90KCdpZCcsIHBhcmVudElkKSA6IG51bGw7CgoJaWYgKCFwYXJlbnQpIHsKCQltYXRyaXhXb3JsZCA9IG1hdHJpeExvY2FsOwoJfSBlbHNlIHsKCQljb25zdCBwYXJlbnRNYXRyaXhXb3JsZCA9IG1hdHJpeDQud29ybGRGcm9tQm90KHBhcmVudCwgZGltZW5zaW9uKTsKCQltYXRyaXhXb3JsZCA9IG1hdHJpeDQubXVsdGlwbHlNYXRyaWNlcyhtYXRyaXhXb3JsZCwgcGFyZW50TWF0cml4V29ybGQsIG1hdHJpeExvY2FsKTsKCX0KCglyZXR1cm4gbWF0cml4V29ybGQ7Cn0nANrEsI0KAAppbml0aWFsaXplAgQA2sSwjQqEkQGrDkBpZiAodGFncy5pbml0aWFsaXplZCkgewogICAgcmV0dXJuOwp9CgptYXNrcy5pbml0aWFsaXplZCA9IHRydWU7CgpncmlkUG9ydGFsQm90LnRhZ3MucG9ydGFsQ2FtZXJhVHlwZSA9ICdwZXJzcGVjdGl2ZSc7CmxlZnRXcmlzdFBvcnRhbEJvdC50YWdzLnBvcnRhbEdyaWRTY2FsZSA9IDAuMDI1OwpyaWdodFdyaXN0UG9ydGFsQm90LnRhZ3MucG9ydGFsR3JpZFNjYWxlID0gMC4wMjU7CgovLyoqKiBETyBXRSBORUVEIFRISVM/Pz8gSW5pdGlhbGl6ZSBjb25maWcgYm90IHdpdGggY3VzdG9tIHRhZ3MgYW5kIGFjdGlvbnMuCmNvbmZpZ0JvdC50YWdzLmluVlIgPSBmYWxzZTsKCmNvbmZpZ0JvdC50YWdzLm9uRW50ZXJWUiA9IGBACiAgICB0YWdzLmluVlIgPSB0cnVlOwogICAgc2hvdXQoJ29uQUJMZWZ0V3Jpc3QnKTsKYDsKY29uZmlnQm90LnRhZ3Mub25FeGl0VlIgPSBgQAogICAgdGFncy5pblZSID0gZmFsc2U7CmA7CmNvbmZpZ0JvdC50YWdzLmluQVIgPSBmYWxzZTsKY29uZmlnQm90LnRhZ3Mub25FbnRlckFSID0gYEAKICAgIHRhZ3MuaW5BUiA9IHRydWU7CiAgICBzaG91dCgnb25BQkxlZnRXcmlzdCcpOwpgOwpjb25maWdCb3QudGFncy5vbkV4aXRBUiA9IGBACiAgICB0YWdzLmluQVIgPSBmYWxzZTsKYDsKCmlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkfGlQaG9uZXxpUGFkfFdpbmRvd3MgUGhvbmV8TW9iaWxlL2kpKSB7CiAgICBjb25maWdCb3QudGFncy5pc01vYmlsZSA9IHRydWU7Cn0gZWxzZSB7CiAgICBjb25maWdCb3QudGFncy5pc01vYmlsZSA9IGZhbHNlOwp9CgovLyBDcmVhdGUgdGhlIG1haW4gc2NlbmUgZGltZW5zaW9uIGJvdC4KZ2xvYmFsVGhpcy5tYWluU2NlbmVCb3QgPSBjcmVhdGUoewogICAgc3BhY2U6ICd0ZW1wTG9jYWwnLAogICAgZm9ybTogJ2RpbWVuc2lvbicsCiAgICBmb3JtQWRkcmVzczogdGFncy5tYWluU2NlbmVEaW1lbnNpb24sCiAgICBbdGFncy5yb290RGltZW5zaW9uXTogdHJ1ZSwKICAgIFtgJHt0YWdzLnJvb3REaW1lbnNpb259WGBdOiAwLAogICAgW2Ake3RhZ3Mucm9vdERpbWVuc2lvbn1ZYF06IDAsCiAgICBbYCR7dGFncy5yb290RGltZW5zaW9ufVpgXTogMCwKICAgIFtgJHt0YWdzLnJvb3REaW1lbnNpb259Um90YXRpb25YYF06IDAsCiAgICBbYCR7dGFncy5yb290RGltZW5zaW9ufVJvdGF0aW9uWWBdOiAwLAogICAgW2Ake3RhZ3Mucm9vdERpbWVuc2lvbn1Sb3RhdGlvblpgXTogMCwKICAgIHN5c3RlbTogImFiLmltbWVyc2l2ZS50ZW1wTWFpblNjZW5lQm90Igp9KTsKCmlmICh0YWdzLnNob3dDb21wYXNzID09PSB0cnVlKSB7CiAgICBjcmVhdGUoewogICAgICAgIHNwYWNlOiAndGVtcExvY2FsJywKICAgICAgICBmb3JtOiAnc3ByaXRlJywKICAgICAgICBmb3JtQWRkcmVzczogJ2h0dHBzOi8vYnVpbGRlci1sdG0tZmlsZXMuczMuYW1hem9uYXdzLmNvbS8wMTc0NGQ0Nzc0M2FiYjgyNzI3NWI3YmI4NjVmMjZlNDM4NjAzOTc5OGQ5NzUzZDUyMTM5OTUxNWRjMzcwZmFiLnBuZycsCiAgICAgICAgZHJhZ2dhYmxlOiBmYWxzZSwKICAgICAgICBwb2ludGFibGU6IGZhbHNlLAogICAgICAgIFt0YWdzLm1haW5TY2VuZURpbWVuc2lvbl06IHRydWUsCiAgICAgICAgW2Ake3RhZ3MubWFpblNjZW5lRGltZW5zaW9ufVpgXTogLTEuNSwKICAgICAgICBzY2FsZTogMywKICAgICAgICBzeXN0ZW06ICJhYi5pbW1lcnNpdmUuY29tcGFzcyIKICAgIH0pOwp9CgpnbG9iYWxUaGlzLmltbWVyc2l2ZU1hbmFnZXIgPSB0aGlzQm90OwoKdGhpc0JvdC5jb21waWxlQ1NTKCk7Cgp0aGlzQm90Lm9uSW5pdGlhbGl6ZSgpOwoKbGlua3MuZnJ1c3R1bS5lbmFibGVGcnVzdHVtKCk7JwDaxLCNCgANcm9vdERpbWVuc2lvbgIEANrEsI0KsJ8BB2ltbWVyc2UnANrEsI0KABJtYWluU2NlbmVEaW1lbnNpb24CBADaxLCNCrifAQRob21lJwDaxLCNCgAMb25Jbml0aWFsaXplAgQA2sSwjQq9nwHLEUB0aGlzQm90Lm1vdW50KCk7Cgp0aGlzQm90LmluaXRpYWxpemVNYXRoKCk7CgpnbG9iYWxUaGlzLnRyYW5zZm9ybSA9IHt9OwoKdHJhbnNmb3JtLmdldEJvdFBvc2l0aW9uID0gKGJvdCwgZGltZW5zaW9uKSA9PiB7CiAgICByZXR1cm4gewogICAgICAgIHg6IGJvdC50YWdzW2Ake2RpbWVuc2lvbn1YYF0sCiAgICAgICAgeTogYm90LnRhZ3NbYCR7ZGltZW5zaW9ufVlgXSwKICAgICAgICB6OiBib3QudGFnc1tgJHtkaW1lbnNpb259WmBdLAogICAgfQp9Cgp0cmFuc2Zvcm0uc2V0Qm90UG9zaXRpb24gPSAoYm90LCBkaW1lbnNpb24sIHBvc2l0aW9uKSA9PiB7CiAgICBib3QudGFnc1tgJHtkaW1lbnNpb259WGBdID0gcG9zaXRpb24ueDsKICAgIGJvdC50YWdzW2Ake2RpbWVuc2lvbn1ZYF0gPSBwb3NpdGlvbi55OwogICAgYm90LnRhZ3NbYCR7ZGltZW5zaW9ufVpgXSA9IHBvc2l0aW9uLno7Cn0KCnRyYW5zZm9ybS5nZXRCb3RSb3RhdGlvbiA9IChib3QsIGRpbWVuc2lvbikgPT4gewogICAgY29uc3Qgcm90YXRpb24gPSBib3QudGFnc1tgJHtkaW1lbnNpb259Um90YXRpb25gXTsKICAgIGlmIChyb3RhdGlvbikgewogICAgICAgIHJldHVybiByb3RhdGlvbjsKICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgeDogYm90LnRhZ3NbYCR7ZGltZW5zaW9ufVJvdGF0aW9uWGBdLAogICAgICAgICAgICB5OiBib3QudGFnc1tgJHtkaW1lbnNpb259Um90YXRpb25ZYF0sCiAgICAgICAgICAgIHo6IGJvdC50YWdzW2Ake2RpbWVuc2lvbn1Sb3RhdGlvblpgXSwKICAgICAgICB9CiAgICB9Cn0KCnRyYW5zZm9ybS5zZXRCb3RSb3RhdGlvbiA9IChib3QsIGRpbWVuc2lvbiwgcm90YXRpb24pID0+IHsKICAgIGlmIChyb3RhdGlvbi5xdWF0ZXJuaW9uKSB7CiAgICAgICAgYm90LnRhZ3NbYCR7ZGltZW5zaW9ufVJvdGF0aW9uYF0gPSByb3RhdGlvbjsKICAgICAgICBkZWxldGUgYm90LnRhZ3NbYCR7ZGltZW5zaW9ufVJvdGF0aW9uWGBdOwogICAgICAgIGRlbGV0ZSBib3QudGFnc1tgJHtkaW1lbnNpb259Um90YXRpb25ZYF07CiAgICAgICAgZGVsZXRlIGJvdC50YWdzW2Ake2RpbWVuc2lvbn1Sb3RhdGlvblpgXTsKICAgIH0gZWxzZSB7CiAgICAgICAgYm90LnRhZ3NbYCR7ZGltZW5zaW9ufVJvdGF0aW9uWGBdID0gcm90YXRpb24ueDsKICAgICAgICBib3QudGFnc1tgJHtkaW1lbnNpb259Um90YXRpb25ZYF0gPSByb3RhdGlvbi55OwogICAgICAgIGJvdC50YWdzW2Ake2RpbWVuc2lvbn1Sb3RhdGlvblpgXSA9IHJvdGF0aW9uLno7CiAgICB9Cn0KCnRyYW5zZm9ybS5nZXRCb3RTY2FsZSA9IChib3QpID0+IHsKICAgIHJldHVybiB7CiAgICAgICAgeDogYm90LnRhZ3NbYHNjYWxlWGBdLAogICAgICAgIHk6IGJvdC50YWdzW2BzY2FsZVlgXSwKICAgICAgICB6OiBib3QudGFnc1tgc2NhbGVaYF0sCiAgICB9Cn0KCnRyYW5zZm9ybS5zZXRCb3RTY2FsZSA9IChib3QsIHNjYWxlKSA9PiB7CiAgICBib3QudGFnc1tgc2NhbGVYYF0gPSBzY2FsZS54OwogICAgYm90LnRhZ3NbYHNjYWxlWWBdID0gc2NhbGUueTsKICAgIGJvdC50YWdzW2BzY2FsZVpgXSA9IHNjYWxlLno7Cn0KCnRyYW5zZm9ybS5sb29rQXRQb2ludCA9IChleWVCb3QsIGV5ZUJvdERpbWVuc2lvbiwgcG9pbnQpID0+IHsKICAgIGNvbnN0IHRhcmdldFBvcyA9IHsuLi5wb2ludH07CiAgICBjb25zdCBleWVQb3MgPSB0cmFuc2Zvcm0uZ2V0Qm90UG9zaXRpb24oZXllQm90LCBleWVCb3REaW1lbnNpb24pOwogICAgCiAgICBjb25zdCBkaXJlY3Rpb24gPSBtYXRoLnN1YnRyYWN0VmVjdG9ycyh0YXJnZXRQb3MsIGV5ZVBvcyk7CgogICAgY29uc3QgbG9va1JvdGF0aW9uID0gbmV3IFJvdGF0aW9uKHsKICAgICAgICBkaXJlY3Rpb24sCiAgICAgICAgdXB3YXJkczogbmV3IFZlY3RvcjMoMCwgMCwgMSksCiAgICAgICAgZXJyb3JIYW5kbGluZzogJ251ZGdlJywKICAgIH0pCgogICAgdHJhbnNmb3JtLnNldEJvdFJvdGF0aW9uKGV5ZUJvdCwgZXllQm90RGltZW5zaW9uLCBsb29rUm90YXRpb24pOwp9Cgp0cmFuc2Zvcm0ubG9va0F0Qm90ID0gKCBleWVCb3QsIGV5ZUJvdERpbWVuc2lvbiwgdGFyZ2V0Qm90LCB0YXJnZXREaW1lbnNpb24gKSA9PiB7CiAgICBjb25zdCB0YXJnZXRQb3MgPSB0cmFuc2Zvcm0uZ2V0Qm90UG9zaXRpb24oIHRhcmdldEJvdCwgdGFyZ2V0RGltZW5zaW9uICk7CiAgICB0cmFuc2Zvcm0ubG9va0F0UG9pbnQoZXllQm90LCBleWVCb3REaW1lbnNpb24sIHRhcmdldFBvcyk7Cn0nANrEsI0KAApjb21waWxlQ1NTAgQA2sSwjQqJsQHRBEBnbG9iYWxUaGlzLmNvbXBpbGVDU1MgPSAoYm90cykgPT4gewogICAgYm90cyA9IEFycmF5LmlzQXJyYXkoYm90cykgPyBib3RzIDogW2JvdHNdOwoKICAgIGxldCBjc3MgPSBbXTsKCiAgICBmb3IgKGxldCBib3Qgb2YgYm90cykgewogICAgICAgIGZvciAobGV0IGtleSBpbiBib3QudGFncykgewogICAgICAgICAgICBpZiAoa2V5ICE9PSAnY29tcGlsZUNTUycgJiYga2V5LnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJ2NzcycpKSB7CiAgICAgICAgICAgICAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbY29tcGlsZUNTU10gZm91bmQgQ1NTIGtleTogJHtrZXl9YCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjc3MucHVzaChib3QudGFnc1trZXldKTsKICAgICAgICAgICAgfQogICAgICAgIH0KfQoKICAgIGNvbnN0IGNvbXBpbGVkID0gY3NzLmpvaW4oJ1xuXG4nKTsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFtjb21waWxlQ1NTXSBjb21waWxlZCBDU1M6XG5cbmAsIGNvbXBpbGVkKTsKICAgIH0KCiAgICByZXR1cm4gY29tcGlsZWQ7Cn07JwDaxLCNCgANb25BQkxlZnRXcmlzdAIEANrEsI0K27UBpgNAY29uZmlnQm90LnRhZ3MubGVmdFdyaXN0UG9ydGFsID0gdGFncy5sZWZ0V3Jpc3RQb3J0YWxOYW1lCgpsZWZ0V3Jpc3RQb3J0YWxCb3QudGFncy53cmlzdFBvcnRhbFdpZHRoID0gLTE7CmxlZnRXcmlzdFBvcnRhbEJvdC50YWdzLndyaXN0UG9ydGFsSGVpZ2h0ID0gLTE7CgovLyBDb21wYXNzIENhbGlicmF0aW9uIEJ1dHRvbgpjcmVhdGUodGhpc0JvdC5idXR0b24oewogICAgc3BhY2U6ICd0ZW1wTG9jYWwnLAogICAgZGltZW5zaW9uOiB0YWdzLmxlZnRXcmlzdFBvcnRhbE5hbWUsCiAgICBkaW1lbnNpb25YOiA1LjUsCiAgICBkaW1lbnNpb25ZOiAzLAogICAgbGFiZWw6ICdDb21wYXNzIENhbGlicmF0aW9uJywKICAgIG9uQ2xpY2s6IGBACiAgICAgICAgaW1tZXJzaXZlTWFuYWdlci5jb21wYXNzQ2FsaWJyYXRpb24oKTsKICAgIGAKfSkpOycA2sSwjQoACW9uRGVzdHJveQIEANrEsI0KgrkBhgFAZ2xvYmFsVGhpcy5jb21waWxlQ1NTID0gdW5kZWZpbmVkOwpnbG9iYWxUaGlzLm1hdGhVdGlscyA9IHVuZGVmaW5lZDsKZ2xvYmFsVGhpcy50cmFuc2Zvcm0gPSB1bmRlZmluZWQ7CgpjbGVhckludGVydmFsKHRhZ3MuaW50ZXJ2YWwpOycA2sSwjQoAA0FwcAIEANrEsI0KiboBrApAY29uc3QgY3NzID0gY29tcGlsZUNTUyhbIHRoaXNCb3QgXSk7CmNvbnN0IHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gPSBvcy5hcHBIb29rczsKCmNvbnN0IEVudGVyWFJCdXR0b24gPSAoeyBtb2RlLCBvbkNsaWNrIH0pID0+IHsKICAgIGlmIChtb2RlICE9PSAndnInICYmIG1vZGUgIT09ICdhcicpIHsKICAgICAgICBjb25zb2xlLndhcm4oYFtFbnRlclhSQnV0dG9uXSBVbmtub3duIG1vZGUgJHttb2RlfSwgZGVmYXVsdGluZyB0byB2cmApOwogICAgICAgIG1vZGUgPSAndnInOwogICAgfQoKICAgIHJldHVybiAoCiAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9J2VudGVyLXhyLWJ1dHRvbicgb25DbGljaz17b25DbGlja30+RW50ZXIge21vZGUudG9VcHBlckNhc2UoKX08L2J1dHRvbj4KICAgICkKfQoKY29uc3QgQXBwID0gKCkgPT4gewogICAgY29uc3Qgb25FbnRlclZSQ2xpY2sgPSAoKSA9PiB7CiAgICAgICAgb3MuZW5hYmxlVlIoKTsKICAgIH0KCiAgICBjb25zdCBvbkVudGVyQVJDbGljayA9ICgpID0+IHsKICAgICAgICBvcy5lbmFibGVBUigpOwogICAgfQoKICAgIGxldCBzdXBwb3J0c0FSID0gb3MuZGV2aWNlKCkuc3VwcG9ydHNBUjsKICAgIGxldCBzdXBwb3J0c1ZSID0gb3MuZGV2aWNlKCkuc3VwcG9ydHNWUjsKCiAgICByZXR1cm4gKAogICAgICAgIDw+ICAKICAgICAgICAgICAgPHN0eWxlPntjc3N9PC9zdHlsZT4KICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2VudGVyLXhyLWJ1dHRvbnMnPgogICAgICAgICAgICAgICAgeyBzdXBwb3J0c0FSICYmCiAgICAgICAgICAgICAgICAgICAgPEVudGVyWFJCdXR0b24gbW9kZT0nYXInIG9uQ2xpY2s9e29uRW50ZXJBUkNsaWNrfS8+CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB7IHN1cHBvcnRzVlIgJiYgCiAgICAgICAgICAgICAgICAgICAgPEVudGVyWFJCdXR0b24gbW9kZT0ndnInIG9uQ2xpY2s9e29uRW50ZXJWUkNsaWNrfS8+CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB7IGNvbmZpZ0JvdC50YWdzLmRldlZSICYmCiAgICAgICAgICAgICAgICAgICAgPEVudGVyWFJCdXR0b24gbW9kZT0nYXInIG9uQ2xpY2s9e29uRW50ZXJBUkNsaWNrfS8+CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB7IGNvbmZpZ0JvdC50YWdzLmRldlZSICYmIAogICAgICAgICAgICAgICAgICAgIDxFbnRlclhSQnV0dG9uIG1vZGU9J3ZyJyBvbkNsaWNrPXtvbkVudGVyVlJDbGlja30vPgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgPC8+CiAgICApCn0KCnJldHVybiBBcHA7JwDaxLCNCgAFbW91bnQCBADaxLCNCrbEAZgBQGlmICghdGhpc0JvdC52YXJzLmFwcEluc3RhbmNlKSB7CiAgICB0aGlzQm90LnZhcnMuYXBwSW5zdGFuY2UgPSB0aGlzQm90LkFwcCgpOwogICAgYXdhaXQgb3MucmVnaXN0ZXJBcHAodGFncy5hcHBJZCwgdGhpc0JvdCk7CgogICAgdGhpc0JvdC5yZWZyZXNoKCk7Cn0nANrEsI0KAAdyZWZyZXNoAgQA2sSwjQrPxQFbQGNvbnN0IEFwcCA9IHRoaXNCb3QudmFycy5hcHBJbnN0YW5jZTsKCmlmIChBcHApIHsKICAgIG9zLmNvbXBpbGVBcHAodGFncy5hcHBJZCwgPEFwcC8+KTsKfScA2sSwjQoAB3VubW91bnQCBADaxLCNCqvGAZEBQGlmICh0aGlzQm90LnZhcnMuYXBwSW5zdGFuY2UpIHsKICAgIHRoaXNCb3QudmFycyA9IHt9OwogICAgY2xlYXJUYWdNYXNrc1N0YXJ0aW5nV2l0aCh0aGlzQm90LCAnYXBwXycpOwogICAgYXdhaXQgb3MudW5yZWdpc3RlckFwcCh0YWdzLmFwcElkKTsKfScA2sSwjQoAB0FwcC5jc3MCBADaxLCNCr3HAd8ELmVudGVyLXhyLWJ1dHRvbnMgewogICAgcG9zaXRpb246IGZpeGVkOwogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7CiAgICB3aWR0aDogMTAwJTsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgY29sdW1uLWdhcDogNDBweDsKICAgIGJvdHRvbTogMTV2aDsKfQoKLmVudGVyLXhyLWJ1dHRvbnMgYnV0dG9uIHsKICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OwogICAgY29sb3I6ICM3QjY0RkY7CiAgICBmb250LXNpemU6IDEuMjVlbTsKICAgIHBhZGRpbmc6IDE0cHggMjhweDsKICAgIGJvcmRlci1yYWRpdXM6IDZweDsKICAgIGJvcmRlci1zdHlsZTogc29saWQ7CiAgICBib3JkZXItd2lkdGg6IDJweDsKICAgIGJvcmRlci1jb2xvcjogIzdCNjRGRjsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIHVzZXItc2VsZWN0OiBub25lOwp9CgpAbWVkaWEgKGhvdmVyKSB7CiAgICAuZW50ZXIteHItYnV0dG9ucyBidXR0b246aG92ZXIgewogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM2NjY7CiAgICB9Cn0KCi5lbnRlci14ci1idXR0b25zIGJ1dHRvbjphY3RpdmUgewogICAgYmFja2dyb3VuZC1jb2xvcjogIzg4ODsKfScA2sSwjQoABWFwcElkAgQA2sSwjQqdzAEDYXBwJwDaxLCNCgAbbGVmdFdyaXN0Q2FsaWJyYXRpb25CdXR0b25zAgQA2sSwjQqhzAEEdHJ1ZScA2sSwjQoAC3Nob3dDb21wYXNzAgQA2sSwjQqmzAEEdHJ1ZScA2sSwjQoAD2Zyb21Ub0RpbWVuc2lvbgIEANrEsI0Kq8wBhANAY29uc3QgeyBib3QsIGZyb20sIHRvIH0gPSB0aGF0OwoKYm90LnRhZ3NbZnJvbV0gPSBudWxsOwpib3QudGFnc1t0b10gPSB0cnVlOwoKY29uc3QgZnJvbVBvc2l0aW9uID0gdHJhbnNmb3JtLmdldEJvdFBvc2l0aW9uKGJvdCwgZnJvbSk7CmNvbnN0IGZyb21Sb3RhdGlvbiA9IHRyYW5zZm9ybS5nZXRCb3RSb3RhdGlvbihib3QsIGZyb20pOwpjb25zdCBmcm9tU2NhbGUgPSB0cmFuc2Zvcm0uZ2V0Qm90U2NhbGUoYm90LCBmcm9tKTsKCnRyYW5zZm9ybS5zZXRCb3RQb3NpdGlvbihib3QsIHRvLCBmcm9tUG9zaXRpb24pOwp0cmFuc2Zvcm0uc2V0Qm90Um90YXRpb24oYm90LCB0bywgZnJvbVJvdGF0aW9uKTsKdHJhbnNmb3JtLnNldEJvdFNjYWxlKGJvdCwgdG8sIGZyb21TY2FsZSk7JwDaxLCNCgAMb25BbnlCb3REcmFnAgQA2sSwjQqwzwGhB0BpZiAoIXRhZ3MuaW5pdGlhbGl6ZWQpCnsKICAgIHJldHVybjsKfQoKY29uc3QgZGltID0gdGhhdC5mcm9tLmRpbWVuc2lvbjsKY29uc3QgZHJhZ0JvdCA9IHRoYXQuYm90OwoKLy9NQVkgTkVFRCBUTyBSRUZJTkUgVEhJUwpjb25zdCBpc0Zyb21IYW5kbGVkRGltZW5zaW9uID0gZGltID09PSAnaG9tZScgfHwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaW0gPT09IG1haW5TY2VuZUJvdC50YWdzLmZvcm1BZGRyZXNzIHx8IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGltID09PSB0YWdzLmxlZnRXcmlzdFBvcnRhbE5hbWU7CgppZiAoIWlzRnJvbUhhbmRsZWREaW1lbnNpb24pIHsKICAgIHJldHVybjsKfQoKY29uc3QgaXNUb0JlSWdub3JlZCA9IGRyYWdCb3QudGFncy5pZ25vcmVNYWluU2NlbmVIYW5kbGVyOwppZiAoaXNUb0JlSWdub3JlZCkgewogICAgcmV0dXJuOwp9CgpkcmFnQm90LnRhZ3MubWFpblNjZW5lSGFuZGxlck9ic2VydmluZyA9IHRydWU7CgppZiAodGFncy5kZWJ1ZykgewogICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfV0gYWRkIGRyb3AgZ3JpZHNgKTsKfQoKb3MuYWRkRHJvcEdyaWQoCiAgICB7CiAgICAgICAgcG9ydGFsQm90OiBtYWluU2NlbmVCb3QsCiAgICAgICAgc2hvd0dyaWQ6IGZhbHNlLAogICAgICAgIHByaW9yaXR5OiAxMDAsCiAgICAgICAgYm91bmRzOiB7IHg6IDEwMDAwLCB5OiAxMDAwMCB9CiAgICB9LAogICAgewogICAgICAgIHBvcnRhbEJvdDogY29uZmlnQm90LAogICAgICAgIHBvcnRhbFRhZzogJ2xlZnRXcmlzdFBvcnRhbCcsCiAgICAgICAgcHJpb3JpdHk6IDIwMCwKICAgICAgICBzaG93R3JpZDogdHJ1ZSwKICAgICAgICBwb3NpdGlvbjogeyB4OiAzLCB5OiAyLCB6OiAwIH0sCiAgICAgICAgYm91bmRzOiB7IHg6IDEwLCB5OiAxMCB9CiAgICB9CikKJwDaxLCNCgAMb25BbnlCb3REcm9wAgQA2sSwjQrS1gGeBUBpZiAoIXRhZ3MuaW5pdGlhbGl6ZWQpCnsKICAgIHJldHVybjsKfQoKY29uc3QgZHJhZ0JvdCA9IHRoYXQuYm90OwoKaWYgKGRyYWdCb3QudGFncy5tYWluU2NlbmVIYW5kbGVyT2JzZXJ2aW5nKSB7CiAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX1dIG9uIGhhbmRsZWQgYm90IGRyb3BwZWRgKTsKICAgIH0KCiAgICBkcmFnQm90LnRhZ3MubWFpblNjZW5lSGFuZGxlck9ic2VydmluZyA9IG51bGw7CiAgICAKICAgIGNvbnN0IGJvdEluSG9tZSA9IGRyYWdCb3QudGFncy5ob21lID09PSB0cnVlOwogICAgY29uc3QgYm90SW5NYWluU2NlbmUgPSBkcmFnQm90LnRhZ3NbbWFpblNjZW5lQm90LnRhZ3MuZm9ybUFkZHJlc3NdID09PSB0cnVlOwoKICAgIGlmIChib3RJbkhvbWUgJiYgIWJvdEluTWFpblNjZW5lKSB7CiAgICAgICAgLy8gSWYgYSBib3QgdGhhdCB3YXMgYmVpbmcgaGFuZGxlZCBzb21laG93IGVuZHMgdXAgaW4gdGhlIGhvbWUgZGltZW5zaW9uLCB0aGVuIG1vdmUgaXQgYmFjayB0byB0aGUgbWFpblNjZW5lIGRpbWVuc2lvbi4KICAgICAgICB0aGlzQm90LmZyb21Ub0RpbWVuc2lvbih7IGJvdDogZHJhZ0JvdCwgZnJvbTogJ2hvbWUnLCB0bzogbWFpblNjZW5lQm90LnRhZ3MuZm9ybUFkZHJlc3MgfSk7CiAgICB9Cn0nANrEsI0KAAtvbkFueUNyZWF0ZQIEANrEsI0K8dsB5wRAaWYgKCF0YWdzLmluaXRpYWxpemVkKQp7CiAgICByZXR1cm47Cn0KCmNvbnN0IHsgYm90IH0gPSB0aGF0OwoKbGV0IGlzQUJCb3QgPSBsaW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiQm90ID8gYm90LmlkID09PSBsaW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiQm90LmlkIDogZmFsc2U7CmxldCBpc01lbnVCb3QgPSBib3QudGFnc1tjb25maWdCb3QudGFncy5tZW51UG9ydGFsXSA9PT0gdHJ1ZSA/IHRydWUgOiBmYWxzZTsKCmlmIChnbG9iYWxUaGlzLm1haW5TY2VuZUJvdCAmJiAhaXNNZW51Qm90ICYmICFpc0FCQm90ICYmIGJvdC50YWdzLnNwYWNlID09ICJzaGFyZWQiKSB7CiAgICBjb25zdCBib3RJbkltbWVyc2UgPSBib3QudGFncy5pbW1lcnNlID09PSB0cnVlOwogICAgY29uc3QgYm90SW5NYWluU2NlbmUgPSBib3QudGFnc1ttYWluU2NlbmVCb3QudGFncy5mb3JtQWRkcmVzc10gPT09IHRydWU7CiAgICAKICAgIGlmIChib3RJbkltbWVyc2UgJiYgIWJvdEluTWFpblNjZW5lKSAKICAgIHsKICAgICAgICB0aGlzQm90LmZyb21Ub0RpbWVuc2lvbih7IGJvdCwgZnJvbTogJ2ltbWVyc2UnLCB0bzogbWFpblNjZW5lQm90LnRhZ3MuZm9ybUFkZHJlc3MgfSk7CiAgICB9Cn0nANrEsI0KAAVkZWJ1ZwIEANrEsI0K2eABBHRydWUnANrEsI0KAAZidXR0b24CBADaxLCNCt7gAZ8IQGNvbnN0IHsgCiAgICBzcGFjZT0gJ3RlbXBMb2NhbCcsCiAgICBsYWJlbCA9ICdCdXR0b24nLAogICAgb25DbGljayA9IGBAb3MudG9hc3QoJ2J1dHRvbiBjbGlja2VkJylgLAogICAgZGltZW5zaW9uLAogICAgZGltZW5zaW9uWCA9IDAsCiAgICBkaW1lbnNpb25ZID0gMCwKICAgIGRpbWVuc2lvblogPSAwLAogICAgb25BZGRlZCwKfSA9IHRoYXQ7Cgphc3NlcnQoZGltZW5zaW9uLCAnW2J1dHRvbl0gZGltZW5zaW9uIHBhcmFtZXRlciBpcyByZXF1aXJlZCcpOwoKY29uc3QgYnV0dG9uTW9kID0gewogICAgc3BhY2UsCiAgICBsYWJlbCwKICAgIG9uQnV0dG9uQ2xpY2s6IG9uQ2xpY2ssCiAgICBzY2FsZVg6IDEuOSwKICAgIHNjYWxlWTogMC45LAogICAgc2NhbGVaOiAwLjMsCiAgICBkcmFnZ2FibGU6IGZhbHNlLAogICAgW2RpbWVuc2lvbl06IHRydWUsCiAgICBbZGltZW5zaW9uICsgJ1gnXTogZGltZW5zaW9uWCwKICAgIFtkaW1lbnNpb24gKyAnWSddOiBkaW1lbnNpb25ZLAogICAgW2RpbWVuc2lvbiArICdaJ106IGRpbWVuc2lvblosCiAgICBvbkFkZGVkLAogICAgb25Cb3RBZGRlZDogYEAKICAgICAgICB3aGlzcGVyKHRoaXNCb3QsICdvbkFkZGVkJyk7CiAgICBgLAogICAgb25DbGljazogYEAKICAgICAgICB3aGlzcGVyKHRoaXNCb3QsICdvbkJ1dHRvbkNsaWNrJyk7CiAgICAgICAgbWFza3MuY29sb3IgPSBudWxsOwogICAgICAgIG1hc2tzLnNjYWxlWiA9IG51bGw7CiAgICBgLAogICAgb25Qb2ludGVyRG93bjogYEAKICAgICAgICBtYXNrcy5jb2xvciA9ICdyb3lhbGJsdWUnOwogICAgICAgIG1hc2tzLnNjYWxlWiA9IDAuMTsKICAgIGAsCiAgICBvblBvaW50ZXJVcDogYEAKICAgICAgICBtYXNrcy5zY2FsZVogPSBudWxsOwogICAgYCwKICAgIG9uUG9pbnRlckVudGVyOiBgQAogICAgICAgIG1hc2tzLmNvbG9yID0gJ3NreWJsdWUnOwogICAgYCwKICAgIG9uUG9pbnRlckV4aXQ6IGBACiAgICAgICAgbWFza3MuY29sb3IgPSBudWxsOwogICAgICAgIG1hc2tzLnNjYWxlWiA9IG51bGw7CiAgICBgLAp9CgpyZXR1cm4gWyBidXR0b25Nb2QgXTsnANrEsI0KABJjb21wYXNzQ2FsaWJyYXRpb24CBADaxLCNCv7oAf8CQGlmICghZ2xvYmFsVGhpcy5tYWluU2NlbmVCb3QpIHsKICAgIGNvbnNvbGUuZXJyb3IoJ0NvbXBhc3MgY2FsaWJyYXRpb24gbmVlZHMgbWFpblNjZW5lQm90IHRvIGJlIGxvYWRlZC4nKTsKICAgIHJldHVybjsKfQoKY29uc3QgZGltID0gb3MuZ2V0Q3VycmVudERpbWVuc2lvbigpOwpjb25zdCBjYW1Qb3MgPSBvcy5nZXRDYW1lcmFQb3NpdGlvbignZ3JpZCcpOwoKbWFpblNjZW5lQm90LnRhZ3NbYCR7ZGltfVhgXSA9IGNhbVBvcy54OwptYWluU2NlbmVCb3QudGFnc1tgJHtkaW19WWBdID0gY2FtUG9zLnk7Cgpjb25zdCBjYW1Sb3QgPSBvcy5nZXRDYW1lcmFSb3RhdGlvbignZ3JpZCcpOwptYWluU2NlbmVCb3QudGFnc1tgJHtkaW19Um90YXRpb25aYF0gPSBjYW1Sb3QuejsoANrEsI0KAAxhYkJvdFZlcnNpb24BfQwnANrEsI0KAAhhYklnbm9yZQIEANrEsI0K/+sBBHRydWUnANrEsI0KAAdmcnVzdHVtAgQA2sSwjQqE7AEo8J+Ul2Y4NWFkMGEwLTIwNGQtNGJjZC1iMjE4LTdhMjMzNzRiNTA5OCcA2sSwjQoADW1hbmlmZXN0YXRpb24CBADaxLCNCqvsASjwn5SXZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkJwDaxLCNCgAKb25Cb3RBZGRlZAIEANrEsI0K0uwBuAFAYXdhaXQgb3Muc2xlZXAoNTAwKTsKCmxldCBzdXBwb3J0c0FSID0gb3MuZGV2aWNlKCkuc3VwcG9ydHNBUjsKbGV0IHN1cHBvcnRzVlIgPSBvcy5kZXZpY2UoKS5zdXBwb3J0c1ZSOwoKaWYgKHN1cHBvcnRzQVIgfHwgc3VwcG9ydHNWUikKewogICAgY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbCA9ICJpbW1lcnNpdmUiOwp9JwDaxLCNCgATbGVmdFdyaXN0UG9ydGFsTmFtZQIEANrEsI0Ki+4BDWFiV3Jpc3RQb3J0YWwoANrEsI0KAA1hYjFCb3RWZXJzaW9uAXt/+AAAAAAAACcBBGJvdHMkZjg1YWQwYTAtMjA0ZC00YmNkLWIyMTgtN2EyMzM3NGI1MDk4AScA2sSwjQqa7gEPX19mcnVzdHVtVXBkYXRlAgQA2sSwjQqb7gHhC0BpZiAoICFnbG9iYWxUaGlzLm1hdHJpeDQgfHwgIWdsb2JhbFRoaXMudHJhbnNmb3JtICkgewogICAgLy8gTmVlZCB0byB3YWl0IGZvciB0aGUgbWF0aCBhbmQgdHJhbnNmb3JtIGxpYnJhcmllcyB0byBiZSBsb2FkZWQuCiAgICByZXR1cm47Cn0KCmNvbnN0IGNhbVBvcyA9IHsKICAgIHg6IGdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFQb3NpdGlvblgsCiAgICB5OiBncmlkUG9ydGFsQm90LnRhZ3MuY2FtZXJhUG9zaXRpb25ZLAogICAgejogZ3JpZFBvcnRhbEJvdC50YWdzLmNhbWVyYVBvc2l0aW9uWiwKfTsKCmNvbnN0IGNhbVJvdCA9IG5ldyBSb3RhdGlvbih7CiAgICBldWxlcjogewogICAgICAgIHg6IGdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFSb3RhdGlvblgsCiAgICAgICAgeTogZ3JpZFBvcnRhbEJvdC50YWdzLmNhbWVyYVJvdGF0aW9uWSwKICAgICAgICB6OiBncmlkUG9ydGFsQm90LnRhZ3MuY2FtZXJhUm90YXRpb25aLAogICAgfQp9KTsKCmNvbnN0IGZydXN0dW1EaW0gPSB0YWdzLmN1cnJlbnREaW1lbnNpb247CgppZiAoIGdsb2JhbFRoaXMubWFpblNjZW5lQm90ICYmIGZydXN0dW1EaW0gPT09IGxpbmtzLmltbWVyc2l2ZU1hbmFnZXIudGFncy5tYWluU2NlbmVEaW1lbnNpb24gKSB7CiAgICAvLyBUcmFuc2xhdGUgY2FtZXJhJ3MgZ3JpZFBvcnRhbCBwb3NpdGlvbiB0byBiZSBpbiBtYWluU2NlbmUgbG9jYWwgc3BhY2UuCiAgICBjb25zdCBtc01hdHJpeCA9IG1hdHJpeDQud29ybGRNYXRyaXhGcm9tQm90KCBtYWluU2NlbmVCb3QsICdob21lJyApOwogICAgY29uc3QgY2FtTG9jYWxQb3MgPSB2ZWN0b3IzLndvcmxkVG9Mb2NhbCggey4uLmNhbVBvc30sIG1zTWF0cml4ICk7CiAgICB0cmFuc2Zvcm0uc2V0Qm90UG9zaXRpb24oIHRoaXNCb3QsIGZydXN0dW1EaW0sIGNhbUxvY2FsUG9zICk7CgogICAgLy8gRmluZCBwb2ludCBpbiBmcm9udCBvZiBjYW1lcmEgdGhhdCB3ZSBjYW46CiAgICAvLyAxLiBUcmFuc2xhdGUgdG8gbWFpblNjZW5lIGxvY2FsIHNwYWNlLgogICAgLy8gMi4gQ2FsY3VsYXRlIGEgbG9vayByb3RhdGlvbiB3aXRoLgogICAgY29uc3QgY2FtRm9yd2FyZCA9IG1hdGguZ2V0Rm9yd2FyZERpcmVjdGlvbiggY2FtUm90ICk7CiAgICBsZXQgbG9va1BvaW50ID0gbWF0aC5hZGRWZWN0b3JzKCB7Li4uY2FtUG9zfSwgbWF0aC5zY2FsZVZlY3RvciggY2FtRm9yd2FyZCwgNCkgKTsKICAgIGxvb2tQb2ludCA9IHZlY3RvcjMud29ybGRUb0xvY2FsKCB7Li4ubG9va1BvaW50fSwgbXNNYXRyaXggKTsKCiAgICB0cmFuc2Zvcm0ubG9va0F0UG9pbnQodGhpc0JvdCwgZnJ1c3R1bURpbSwgbG9va1BvaW50KTsKfSBlbHNlIHsKICAgIC8vIFVzZSBjYW1lcmEncyBncmlkUG9ydGFsIHBvc2l0aW9uIGFzLWlzLgogICAgdHJhbnNmb3JtLnNldEJvdFBvc2l0aW9uKCB0aGlzQm90LCBmcnVzdHVtRGltLCBjYW1Qb3MgKTsKICAgIHRyYW5zZm9ybS5zZXRCb3RSb3RhdGlvbiggdGhpc0JvdCwgZnJ1c3R1bURpbSwgY2FtUm90ICk7Cn0KJwDaxLCNCpruAQpfX29uQ3JlYXRlAgQA2sSwjQr9+QFaQG1hc2tzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gd2hpc3Blcih0aGlzQm90LCAnZnJ1c3R1bVVwZGF0ZScpLCB0YWdzLnVwZGF0ZVJhdGVNUyk7JwDaxLCNCpruARFfX29uUG9ydGFsQ2hhbmdlZAIEANrEsI0K2PoBhgRAaWYgKHRoYXQucG9ydGFsID09PSAnZ3JpZFBvcnRhbCcpIHsKICAgIGlmICh0aGF0LmRpbWVuc2lvbiA9PT0gJ2ltbWVyc2UnKSB7CiAgICAgICAgLy8gUmVtYXAgaG9tZSBkaW1lbnNpb24gdG8gbWFpblNjZW5lRGltZW5zaW9uLgogICAgICAgIC8vIFRoZSBob21lIGRpbWVuc2lvbnMgaXMgb25seSB1c2VkIHRvIHRoZSBtYWluU2NlbmVEaW1lbnNpb24gdG8gbW92ZQogICAgICAgIC8vIGFyb3VuZCBpbiBzbyB3ZSBkb250IHdhbnQgdG8gbW92ZSBvdXIgZnJ1c3R1bSB0aGVyZSwgd2Ugd2FudCB0byBrZWVwIHB1dCBpdCBpbiBtYWluU2NlbmVEaW1lbnNpb24uCiAgICAgICAgdGhhdC5kaW1lbnNpb24gPSBsaW5rcy5pbW1lcnNpdmVNYW5hZ2VyLnRhZ3MubWFpblNjZW5lRGltZW5zaW9uOwogICAgfQoKICAgIHRhZ3NbdGFncy5jdXJyZW50RGltZW5zaW9uXSA9IG51bGw7CiAgICB0YWdzLmN1cnJlbnREaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbjsKICAgIHRhZ3NbdGhhdC5kaW1lbnNpb25dID0gdHJ1ZTsKfScA2sSwjQqa7gEOX191cGRhdGVSYXRlTVMCBADaxLCNCt/+AQMyNTAnANrEsI0Kmu4BCmFiSURPcmlnaW4CBADaxLCNCuP+AQtyYy14ci1hbHBoYScA2sSwjQqa7gENYXV4Q29kZU9yaWdpbgIEANrEsI0K7/4BBXJjLXhyJwDaxLCNCpruAQ5kaXNhYmxlRnJ1c3R1bQIEANrEsI0K9f4B1AJALy8gW1J5YW5dIE5lZWQgdG8gaW5jbHVkZSBzYW1lIHNsZWVwIHRpbWUgYXMgZW5hYmxlRnJ1c3R1bSB0byBlbnN1cmUgaXQgcnVucyBpbgovLyB0aGUgc2FtZSBvcmRlciBpZiBib3RoIGFyZSBjYWxsZWQuCmF3YWl0IG9zLnNsZWVwKDUwMCk7CgovLyBEZXN0cm95IHByZXZpb3VzIGZydXN0dW0gaWYgaXQgZXhpc3RzLgppZiAobWFza3MuZnJ1c3R1bUJvdElkKSB7CiAgICBjb25zb2xlLmxvZyhgW3JlbW90ZUZydXN0dW1dIGRpc2FibGUgZnJ1c3R1bWApOwogICAgZGVzdHJveShnZXRCb3QoJ2lkJywgbWFza3MuZnJ1c3R1bUJvdElkKSk7CiAgICBtYXNrcy5mcnVzdHVtQm90SWQgPSBudWxsOwp9JwDaxLCNCpruAQ1lbmFibGVGcnVzdHVtAgQA2sSwjQrKgQLpC0BsZXQgcHJldmlvdXNGcnVzdHVtQm90ID0gbWFza3MuZnJ1c3R1bUJvdElkID8gZ2V0Qm90KCdpZCcsIG1hc2tzLmZydXN0dW1Cb3RJZCkgOiBudWxsOwppZiAocHJldmlvdXNGcnVzdHVtQm90KSB7CiAgICAvLyBGcnVzdHVtIGJvdCBpcyBhbHJlYWR5IGFjdGl2ZS4KICAgIHJldHVybjsKfQoKY29uc29sZS5sb2coYFtyZW1vdGVGcnVzdHVtXSBlbmFibGUgZnJ1c3R1bWApOwoKLy8gW1J5YW5dIEZvciBzb21lIHJlYXNvbiB3YWl0aW5nIGhhbGYgYSBzZWNvbmQgaGVyZSBmaXhlcyBhIGJ1ZwovLyB0aGF0IGNhdXNlcyBBVVggdG8gcHV0IHRoZSBmaXJzdCB1c2VyJ3MgZnJ1c3R1bSBpbiB0aGUgInNoYXJlZCIgc3BhY2UuCmF3YWl0IG9zLnNsZWVwKDUwMCk7Cgpjb25zdCBkaW0gPSBsaW5rcy5pbW1lcnNpdmVNYW5hZ2VyLnRhZ3MubWFpblNjZW5lRGltZW5zaW9uOwpjb25zdCBmcnVzdHVtTW9kID0ge307CgpmcnVzdHVtTW9kLnNwYWNlID0gInRlbXBTaGFyZWQiOwpmcnVzdHVtTW9kLmZtZnJ1c3R1bSA9IHRydWU7CmZydXN0dW1Nb2QuZnJ1c3R1bUlEID0gY29uZmlnQm90LmlkOwpmcnVzdHVtTW9kLmZvcm0gPSAiZnJ1c3R1bSI7CmZydXN0dW1Nb2QucG9pbnRhYmxlID0gZmFsc2U7CmZydXN0dW1Nb2QubWFpblNjZW5lRGltZW5zaW9uID0gbGlua3MuaW1tZXJzaXZlTWFuYWdlci50YWdzLm1haW5TY2VuZURpbWVuc2lvbjsKZnJ1c3R1bU1vZC5jdXJyZW50RGltZW5zaW9uID0gZGltOwoKZnJ1c3R1bU1vZFtkaW1dID0gdHJ1ZTsKZnJ1c3R1bU1vZFtkaW0rIlJvdGF0aW9uIl0gPSBg8J+UgTAsMCwwLDFgOwpmcnVzdHVtTW9kW2RpbSsiWCJdID0gZ3JpZFBvcnRhbEJvdC50YWdzLmNhbWVyYVBvc2l0aW9uWDsKZnJ1c3R1bU1vZFtkaW0rIlkiXSA9IGdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFQb3NpdGlvblk7CmZydXN0dW1Nb2RbZGltKyJaIl0gPSBncmlkUG9ydGFsQm90LnRhZ3MuY2FtZXJhUG9zaXRpb25aOwpmcnVzdHVtTW9kLmltbWVyc2l2ZU1hbmFnZXIgPSB0YWdzLmltbWVyc2l2ZU1hbmFnZXI7CmZydXN0dW1Nb2QudXBkYXRlUmF0ZU1TID0gdGFncy5fX3VwZGF0ZVJhdGVNUzsKZnJ1c3R1bU1vZC5vbkNyZWF0ZSA9IHRhZ3MuX19vbkNyZWF0ZTsKZnJ1c3R1bU1vZC5vbkRlc3Ryb3kgPSB0YWdzLl9fb25EZXN0cm95OwpmcnVzdHVtTW9kLmZydXN0dW1VcGRhdGUgPSB0YWdzLl9fZnJ1c3R1bVVwZGF0ZTsKZnJ1c3R1bU1vZC5vblBvcnRhbENoYW5nZWQgPSB0YWdzLl9fb25Qb3J0YWxDaGFuZ2VkOwoKY29uc3QgZnJ1c3R1bUJvdCA9IGNyZWF0ZShmcnVzdHVtTW9kKTsKCi8vIFN0b3JlIGlkIG9mIGZydXN0dW0gYm90IGxvY2FsbHksIHNvIHRoYXQgd2UgbWF5IGRlc3Ryb3kgaXQgbGF0ZXIgaWYgbmVlZGVkLgptYXNrcy5mcnVzdHVtQm90SWQgPSBmcnVzdHVtQm90LmlkOwoKLy8gTWFrZSBpbnZpc2libGUgdG8gbG9jYWwgdXNlci4KZnJ1c3R1bUJvdC5tYXNrcy5mb3JtID0gJ25vbmUnOwpmcnVzdHVtQm90Lm1hc2tzLmNvbG9yID0gJ2NsZWFyJzsnANrEsI0Kmu4BEm1haW5TY2VuZURpbWVuc2lvbgIEANrEsI0Kso0CCW1haW5TY2VuZScA2sSwjQqa7gEGc3lzdGVtAgQA2sSwjQq8jQIaYWIuaW1tZXJzaXZlLnJlbW90ZUZydXN0dW0nANrEsI0Kmu4BBHJjeHICBADaxLCNCteNAgR0cnVlJwDaxLCNCpruAQRmb3JtAgQA2sSwjQrcjQIHbm90aGluZygA2sSwjQqa7gEMYWJCb3RWZXJzaW9uAX0MJwDaxLCNCpruAQthYkltbWVyc2l2ZQIEANrEsI0K5Y0CBHRydWUnANrEsI0Kmu4BCGFiSWdub3JlAgQA2sSwjQrqjQIEdHJ1ZScA2sSwjQqa7gEQaW1tZXJzaXZlTWFuYWdlcgIEANrEsI0K740CKPCflJdjNDg5MTk4YS1mODk5LTRiZTYtYjFhMC1mNDI3ZGYyZmYzM2QoANrEsI0Kmu4BDWFiMUJvdFZlcnNpb24Be3/4AAAAAAAAAA=="}]}