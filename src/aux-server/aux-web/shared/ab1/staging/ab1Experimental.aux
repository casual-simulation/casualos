{"version":2,"updates":[{"id":0,"timestamp":1678731809085,"update":"AVrptv3lBgAnAQRib3RzJDI0ZDkxMzE2LTk2NDgtNDhmNy05ZGZhLTFlMTNmOWE4ZmY1YwEnAOm2/eUGAAZzeXN0ZW0CBADptv3lBgEZYWItMS5leHBlcmltZW50YWwuZm9jdXNBUigA6bb95QYADGFiMUludGVyZmFjZQF+JwDptv3lBgAEZm9ybQIEAOm2/eUGHAdub3RoaW5nJwDptv3lBgAPb25BbnlGb2N1c0VudGVyAgQA6bb95QYk1wNAaWYgKCFsaW5rcy5yZW1lbWJlci50YWdzLmFiMUF3YWtlU3RhdGUgfHwgdGhhdC5ib3QgIT0gbGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYjFCb3QgfHwgIWNvbmZpZ0JvdC50YWdzLkFSKQp7CiAgICByZXR1cm47Cn0KCmxpbmtzLm1hbmlmZXN0YXRpb24ubGlua3MuYWIxQm90Lm1hc2tzLmxhYmVsQ29sb3IgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiMUJhc2VDb2xvcjsKbGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYjFCb3QubWFza3MubGFiZWxGb250U2l6ZSA9IDAuNTsKbGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYjFCb3QubWFza3MubGFiZWwgPSAibGlzdGVuaW5nIjsKCmlmIChsaW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiMUJvdC50YWdzLmludGVydmFsKQp7CiAgICBsaW5rcy5tYW5pZmVzdGF0aW9uLmFiMUNsaWNrKCk7IAp9CgpsaW5rcy5zcGVlY2gub25DaGF0KHttZXNzYWdlOiAiQGxpc3RlbiJ9KTsnAOm2/eUGAA5vbkFueUZvY3VzRXhpdAIEAOm2/eUG/AP7AkBpZiAoIWxpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxQXdha2VTdGF0ZSB8fCB0aGF0LmJvdCAhPSBsaW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiMUJvdCB8fCAhY29uZmlnQm90LnRhZ3MuQVIpCnsKICAgIHJldHVybjsKfQoKbGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYjFCb3QubWFza3MubGFiZWxDb2xvciA9IG51bGw7CmxpbmtzLm1hbmlmZXN0YXRpb24ubGlua3MuYWIxQm90Lm1hc2tzLmxhYmVsID0gbnVsbDsKCmxpbmtzLnNwZWVjaC5vbkNoYXQoe21lc3NhZ2U6ICJAZWFybXVmZnMifSk7CgppZiAoIWxpbmtzLm1hbmlmZXN0YXRpb24ubGlua3MuYWIxQm90LnRhZ3MuaW50ZXJ2YWwpCnsKICAgIGxpbmtzLm1hbmlmZXN0YXRpb24uYWIxQ2xpY2soKTsgCn0nAOm2/eUGAA1tYW5pZmVzdGF0aW9uAgQA6bb95Qb4Bijwn5SXZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkJwDptv3lBgAEbWVudQIEAOm2/eUGnwco8J+Ul2IzMGM2YzVkLWE0ZjctNDI2Ni1iYTM4LTM5M2RjOTVlMWVjYicA6bb95QYACHJlbWVtYmVyAgQA6bb95QbGByjwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwDptv3lBgAGc3BlZWNoAgQA6bb95QbtByjwn5SXOTlkNzg5NWItNDI4MS00YWM2LWJiOTMtMmUyMzVjMzUzYWFiKADptv3lBgARYWIxQ29yZU1lbnVBY3Rpb24BficA6bb95QYAEGFiMUNvcmVNZW51TGFiZWwCBADptv3lBpUICGVudGVyIEFSJwDptv3lBgAPYWIxQ29yZU1lbnVJY29uAgQA6bb95QaeCAp2aWV3X2luX2FyJwDptv3lBgAVYWIxQ29yZU1lbnVPbkdlbmVyYXRlAgQA6bb95QapCDpAaWYgKGNvbmZpZ0JvdC50YWdzLkFSKQp7CiAgICB0YWdzLmxhYmVsID0gImRpc2FibGUgQVIiOwp9JwDptv3lBgAPYWIxRXhwZXJpbWVudGFsAgQA6bb95QbkCAR0cnVlJwDptv3lBgARY29yZUFjdGlvbk1lbnVSZWYCBADptv3lBukI/AFAaWYgKGNvbmZpZ0JvdC50YWdzLkFSKQp7CiAgIGNvbmZpZ0JvdC50YWdzLkFSID0gbnVsbDsKCiAgIG9zLnRvYXN0KCJBUiBkaXNhYmxlZCIpOwoKICAgb3MuZGlzYWJsZUFSKCk7Cn0KZWxzZQp7CiAgICBjb25maWdCb3QudGFncy5BUiA9IHRydWU7CgogICAgb3MudG9hc3QoIkFSIGVuYWJsZWQiKTsKCiAgICBvcy5lbmFibGVBUigpOwp9CgpsaW5rcy5tYW5pZmVzdGF0aW9uLmFiMUNsaWNrKCk7CgpzaG91dCgiYWIxTWVudVJlZnJlc2giKTsnAQRib3RzJDk5ZDc4OTViLTQyODEtNGFjNi1iYjkzLTJlMjM1YzM1M2FhYgEnAOm2/eUG5goGc3lzdGVtAgQA6bb95QbnChhhYi0xLmV4cGVyaW1lbnRhbC5zcGVlY2gnAOm2/eUG5goEZm9ybQIEAOm2/eUGgAsHbm90aGluZygA6bb95QbmCgxhYjFJbnRlcmZhY2UBfigA6bb95QbmChhhYjFFeHBlcmltZW50YWxJbnRlcmZhY2UBficA6bb95QbmCg9hYjFFeHBlcmltZW50YWwCBADptv3lBooLBHRydWUnAOm2/eUG5goGb25DaGF0AgQA6bb95QaPC4gFQGlmICh0aGF0Lm1lc3NhZ2VbMF0gIT0gIkAiKQp7CiAgICByZXR1cm47Cn0KCmxldCBtZXNzYWdlID0gdGhhdC5tZXNzYWdlLnNsaWNlKDEpOwoKc3dpdGNoIChtZXNzYWdlKQp7CiAgICBjYXNlICJsaXN0ZW4iOgogICAgICAgIAogICAgICAgIGlmIChvcy52YXJzLnNvY2tldCkgewogICAgICAgICAgICBhd2FpdCBvcy52YXJzLnNvY2tldC5jbG9zZSgpOwogICAgICAgIH0KCiAgICAgICAgYWIxLmxvZygiYWItMTogbGlzdGVuaW5nIik7CiAgICAgICAgCiAgICAgICAgdGhpc0JvdC5vcGVuQ29ubmVjdGlvbigpOwogICAgICAgIGJyZWFrOwogICAgY2FzZSAiRWFybXVmZnMuIjoKICAgIGNhc2UgIkVhciBtdWZmcy4iOgogICAgY2FzZSAiZWFybXVmZnMiOgogICAgICAgIGFiMS5sb2coImFiLTE6IGRvbmUgbGlzdGVuaW5nIik7CgogICAgICAgIGF3YWl0IG9zLnZhcnMuc29ja2V0LmNsb3NlKCk7CgogICAgICAgIC8vRVJST1JTIE9DQ1VSIFdIRU4gVEhJUyBJUyBHT05FLCBCVVQgSVQgQUxTTyBDQVVTRVMgQU4gRU5EIEVSUk9SIERVRSBUTyBBTk9USEVSIGVuZFJlY29yZGluZyBDYWxsCiAgICAgICAgYXdhaXQgb3MuZW5kQXVkaW9SZWNvcmRpbmcoKTsKCiAgICAgICAgb3MudmFycy5zb2NrZXQgPSBudWxsOwogICAgICAgIGJyZWFrOwp9JwDptv3lBuYKDm9wZW5Db25uZWN0aW9uAgQA6bb95QaYEIYRQC8vQWNjZXNzIHRva2VuIGRpcmVjdGx5IGZyb20gbXkgcGVyc29uYWwgcmV2LmFpIGFjY291bnQKY29uc3QgYWNjZXNzVG9rZW4gPSAnMDI0dzR2YlN2THpkaEhENi1RRnRvNnRhWFJPWmJnQjVBWWxiU1VlNERYNHZJZ01Cd1BQdGJ3WW5CQVNIUkdPLXpWbnF1Z1J0MmhhcXhiSzhYYzRXZDlFVFFXc0s4JzsKY29uc3QgZW5kcG9pbnQgPSAnd3NzOi8vYXBpLnJldi5haS9zcGVlY2h0b3RleHQvdjEvc3RyZWFtP2FjY2Vzc190b2tlbj0nICsgYWNjZXNzVG9rZW4gKyAnJmNvbnRlbnRfdHlwZT1hdWRpby94LXJhdztsYXlvdXQ9bm9uLWludGVybGVhdmVkO3JhdGU9NDgwMDA7Zm9ybWF0PUYzMkxFO2NoYW5uZWxzPTEnOwoKbGV0IHNvY2tldCA9IG9zLnZhcnM/LnNvY2tldDsKCmlmICghc29ja2V0KSB7CiAgICBzb2NrZXQgPSBuZXcgV2ViU29ja2V0KGVuZHBvaW50KTsKCiAgICBvcy52YXJzLnNvY2tldCA9IHNvY2tldDsKCiAgICBzb2NrZXQub25vcGVuID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBjb25zb2xlLmxvZygiW29wZW5dIENvbm5lY3Rpb24gZXN0YWJsaXNoZWRcblNlbmRpbmcgdG8gc2VydmVyIik7CiAgICB9OwoKICAgIHNvY2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBsZXQgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7CgogICAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7CiAgICAgICAgICAgIGNhc2UgImNvbm5lY3RlZCI6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRGF0YSByZWNlaXZlZDogQ29ubmVjdGVkIik7CgogICAgICAgICAgICAgICAgb3MuYmVnaW5BdWRpb1JlY29yZGluZyh7CiAgICAgICAgICAgICAgICAgICAgc3RyZWFtOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlOiAnYXVkaW8veC1yYXcnCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBsaW5rcy5ncHQzLnRhZ3MuZ3B0QWN0aXZlID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAicGFydGlhbCI6CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhPYmplY3QudmFsdWVzKGRhdGEuZWxlbWVudHMpKTsKICAgICAgICAgICAgICAgIC8vIGlmIChPYmplY3QudmFsdWVzKGRhdGEuZWxlbWVudHMpLmluY2x1ZGVzKCdvbmUnKSkKICAgICAgICAgICAgICAgIC8vICAgICAgYWIxLmxvZygiYWIxOiBpIGhlYXJkIHRoYXQiKTsKICAgICAgICAgICAgICAgIC8vYWIxLmxvZygiJSIrZGF0YS5lbGVtZW50cy5tYXAoeCA9PiB4LnZhbHVlKS5qb2luKCIgIikpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgImZpbmFsIjoKICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSAiQCIgKyBkYXRhLmVsZW1lbnRzLm1hcChlID0+IGUudmFsdWUpLmpvaW4oIiIpOwoKICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coYFttZXNzYWdlXSBEYXRhIHJlY2VpdmVkIGZyb20gc2VydmVyOlxuYCArIG1lc3NhZ2UpOwoKICAgICAgICAgICAgICAgIGxpbmtzLmdwdDMuYXNrR1BUKG1lc3NhZ2UpOwogICAgICAgICAgICAgICAgdGhpc0JvdC5vbkNoYXQoe21lc3NhZ2V9KTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgfTsKCiAgICBzb2NrZXQub25jbG9zZSA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGxpbmtzLmdwdDMudGFncy5ncHRBY3RpdmUgPSBmYWxzZTsKICAgICAgICAgICAgb3MuZW5kQXVkaW9SZWNvcmRpbmcoKTsKICAgICAgICB9IGNhdGNoKGUpewogICAgICAgICAgICBjb25zb2xlLmxvZygiVW5hYmxlIHRvIGVuZCByZWNvcmRpbmciKTsKICAgICAgICB9CiAgICAgICAgY29uc29sZS5sb2coZXZlbnQud2FzQ2xlYW4gPyBgW2Nsb3NlXSBDb25uZWN0aW9uIGNsb3NlZCBjbGVhbmx5LCBjb2RlPSByZWFzb249YCA6IGAke2V2ZW50fVxuW2Nsb3NlXSBDb25uZWN0aW9uIGRpZWRgKTsKICAgIH07CgogICAgc29ja2V0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhgW2Vycm9yXSAke2Vycm9yLm1lc3NhZ2V9YCk7CiAgICB9OwoKCn0gZWxzZSB7CiAgICBzb2NrZXQuY2xvc2UoKTsKICAgIG9zLnZhcnMuc29ja2V0ID0gbnVsbDsKfScA6bb95QbmCgxvbkF1ZGlvQ2h1bmsCBADptv3lBp8hG0Bvcy52YXJzLnNvY2tldC5zZW5kKHRoYXQpOycA6bb95QbmCgdDaGF0R1BUAgQA6bb95Qa7ISjwn5SXZWM4NWMxZDYtOWYxYS00MGQ0LTgyZTEtNWJkNjgwMzQ5YzI3JwDptv3lBuYKBGdwdDMCBADptv3lBuIhKPCflJdlYzg1YzFkNi05ZjFhLTQwZDQtODJlMS01YmQ2ODAzNDljMjcnAQRib3RzJGVjODVjMWQ2LTlmMWEtNDBkNC04MmUxLTViZDY4MDM0OWMyNwEnAOm2/eUGiSIGc3lzdGVtAgQA6bb95QaKIhZhYi0xLmV4cGVyaW1lbnRhbC5ncHQzJwDptv3lBokiBGZvcm0CBADptv3lBqEiB25vdGhpbmcnAOm2/eUGiSIPYWIxRXhwZXJpbWVudGFsAgQA6bb95QapIgR0cnVlJwDptv3lBokiBm9uQ2hhdAIEAOm2/eUGriLiA0BpZiAodGhhdC5tZXNzYWdlLnN1YnN0cmluZygwLCAzKSAhPSAiYWIxIikgcmV0dXJuOwoKbGV0IG1lc3NhZ2UgPSB0aGF0Lm1lc3NhZ2Uuc3Vic3RyaW5nKDQpOwoKaWYgKG1lc3NhZ2UgPT0gImxpc3RlbiIgJiYgIXRhZ3MuZ3B0QWN0aXZlKQp7CiAgICBhYjEubG9nKCJhYi0xIGlzIGxpc3RlbmluZyIpOwoKICAgIG9zLnRvYXN0KCJhYi0xIGlzIGxpc3RlbmluZyIpOwoKICAgIG1hc2tzLmdwdEFjdGl2ZSA9IHRydWU7CgogICAgcmV0dXJuOwp9CmVsc2UgaWYgKG1lc3NhZ2UgPT0gImxpc3RlbiIpCnsKICAgIGFiMS5sb2coImFiLTEgaXMgbm8gbG9uZ2VyIGxpc3RlbmluZyIpOwoKICAgIG9zLnRvYXN0KCJhYi0xIGlzIG5vIGxvbmdlciBsaXN0ZW5pbmciKTsKCiAgICBtYXNrcy5ncHRBY3RpdmUgPSBudWxsOwoKICAgIHJldHVybjsKfQoKYWIxLmxvZygiVVNFUjogIiArIG1lc3NhZ2UpOwoKdGhpc0JvdC5hc2tHUFQoIkAiICsgbWVzc2FnZSk7JwDptv3lBokiBmFza0dQVAIEAOm2/eUGkSbcBUBpZiAoIXRhZ3MuZ3B0QWN0aXZlKSByZXR1cm47CgpsZXQgaW5xdWlyeSA9IHRoYXQuc3Vic3RyaW5nKDEpOwoKYWIxLmxvZygiYWItMTogVGhpbmtpbmcgYWJvdXQgIiArIGlucXVpcnkpOwoKaWYgKGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxR3JpZEZvY3VzKQp7CiAgICBpbnF1aXJ5ID0gaW5xdWlyeSArIGAuIEJvdCBtdXN0IGluY2x1ZGUgeyR7bGlua3MucmVtZW1iZXIudGFncy5hYjFHcmlkRm9jdXMuZGltZW5zaW9ufTogdHJ1ZSwgJHtsaW5rcy5yZW1lbWJlci50YWdzLmFiMUdyaWRGb2N1cy5kaW1lbnNpb259WDogJHtsaW5rcy5yZW1lbWJlci50YWdzLmFiMUdyaWRGb2N1cy5wb3NpdGlvbi54fSwgJHtsaW5rcy5yZW1lbWJlci50YWdzLmFiMUdyaWRGb2N1cy5kaW1lbnNpb259WToke2xpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxR3JpZEZvY3VzLnBvc2l0aW9uLnl9fS5gCn0KCmNvbnN0IGFuc3dlciA9IGF3YWl0IHRoaXNCb3Quc3VibWl0UmVxdWVzdEdQVChpbnF1aXJ5KTsKCmFiMS5sb2coImFiLTE6IFtBTlNXRVJdICIgKyBhbnN3ZXIpOwoKY29uc3QgZXhlY3V0YWJsZSA9IGFuc3dlci5zdWJzdHJpbmcoYW5zd2VyLmluZGV4T2YoImBgYCIpICsgMywgYW5zd2VyLmxhc3RJbmRleE9mKCJgYGAiKSkudHJpbSgpOwoKYWIxLmxvZygiYWItMTogW0V4ZWN1dGVdICIgKyBleGVjdXRhYmxlKTsKb3MucnVuKGV4ZWN1dGFibGUpOwoKbGlua3MubWFuaWZlc3RhdGlvbi5hYjFDbGljaygpOygA6bb95QaJIglncHRBY3RpdmUBeScA6bb95QaJIhBzdWJtaXRSZXF1ZXN0R1BUAgQA6bb95QbvK8kiQC8vIGxldCBpbnRlbnRpb24gPSB7Ci8vIC8vICAgICBpbml0OiAoKSA9PiB7CgoKCi8vIC8vICAgICAgICAgICAgIHRoaXNCb3QudmFycy5JbnRlbnRPYmplY3QgPSB7Ci8vIC8vICAgICAgICAgICAgICAgICAibW9kZWwiOiAiZ3B0LTMuNS10dXJibyIsCi8vIC8vICAgICAgICAgICAgICAgICAicHJvbXB0IjogYFRoZSBmb2xsb3dpbmcgaXMgYSBjb252ZXJzYXRpb24gd2l0aCBhbiBBSSBhc3Npc3RhbnQuIFRoZSBhc3Npc3RhbnQgaXMgaGVscGZ1bCwgYW5kIGFuc3dlcnMgd2l0aCBhIHNpbmdsZSB3b3JkLiBUaGUgQUkgd2lsbCBiZSBnaXZlbiBhIGxpc3Qgb2YgZnVuY3Rpb24gbmFtZXMgaW50ZW50T2JqZWN0IGNvcnJlbGF0ZSB3aXRoIHVzYWdlcy9kZXNjcmlwdGlvbnMsIGFuZCB3aGVuIHRoZSBBSSBpcyBhc2tlZCB0byBwZXJmb3JtIGFuIGFjdGlvbiBpdCB3aWxsIHJlc3BvbmQgb25seSB3aXRoIG9uZSBleGFjdCBmdW5jdGlvbiBuYW1lIGludGVudE9iamVjdCBiZXN0IG1hdGNoZXMgdGhlIHJlcXVlc3QsIGluY2x1ZGluZyBubyBwdW5jdHVhdGlvbi4KLy8gLy8gLWNyZWF0ZSwgY3JlYXRlIG9uZSBvciBtdWx0aXBsZSBib3RzIGFuZCBtYW5pcHVsYXRlIGl0L3RoZW0gaWYgbmVlZGVkLgovLyAvLyAtZGVzdHJveSwgZGVsZXRlL2Rlc3Ryb3kgYSBib3QuCi8vIC8vIC1nZXRCb3QsIGdldCBhbiBleGlzdGluZyBib3QgdG8gYmUgbWFuaXB1bGF0ZWQsIG9yIHJlYWQuCi8vIC8vIC1nZXRCb3RzLCBnZXQgbXVsdGlwbGUgZXhpc3RpbmcgYm90cyB0byBiZSBtYW5pcHVsYXRlZCwgb3IgcmVhZC4KLy8gLy8gLU5BLCB1c2VkIHdoZW5ldmVyIGV2ZXJ5dGhpbmcgZWxzZSBpcyBub3QgdmFsaWQuYCwKLy8gLy8gICAgICAgICAgICAgICAgICJ0ZW1wZXJhdHVyZSI6IDAsCi8vIC8vICAgICAgICAgICAgICAgICAibWF4X3Rva2VucyI6IDE1MCwKLy8gLy8gICAgICAgICAgICAgICAgICJ0b3BfcCI6IDEsCi8vIC8vICAgICAgICAgICAgICAgICAiZnJlcXVlbmN5X3BlbmFsdHkiOiAwLAovLyAvLyAgICAgICAgICAgICAgICAgInByZXNlbmNlX3BlbmFsdHkiOiAwLjYsCi8vIC8vICAgICAgICAgICAgICAgICAic3RvcCI6IFsiIEh1bWFuOiIsICIgQUk6Il0KLy8gLy8gICAgICAgICAgICAgfQovLyAvLyAgICAgICAgICAgICBjb25zb2xlLmxvZygiSW5pdGlhbGl6ZWQgSW50ZW50T2JqZWN0Iik7Ci8vIC8vICAgICAgICAgfSwKLy8gICAgICAgICBwYXJzZUludGVudDogYXN5bmMgKHByb21wdCkgPT4gewogICAgICAgICAgICAKLy8gICAgICAgICB9LAovLyB9Cgphc3luYyBmdW5jdGlvbiBzZW5kQ2hhdEdwdFJlcXVlc3QocHJvbXB0KSB7CiAgICBjb25zdCBjaGF0R3B0UmVxdWVzdCA9IHsKICAgICAgICAibW9kZWwiOiAiZ3B0LTMuNS10dXJibyIsCiAgICAgICAgLy8icHJvbXB0IjogIlRoZSBmb2xsb3dpbmcgaXMgYSBjb252ZXJzYXRpb24gd2l0aCBhYjEuIGFiMSBpcyBoZWxwZnVsLCBjbGV2ZXIsIGFuZCBjYXBhYmxlLiBhYjEgd2lsbCByZXNwb25kIHdpdGggdGhlIGNvcnJlY3QgamF2YXNjcmlwdCBpbXBsZW1lbnRhdGlvbiAoY29kZSkgb2YgdGhlIHJlcXVlc3RlZCBhY3Rpb24uXG4iLAogICAgICAgICJtZXNzYWdlcyI6IFsKICAgICAgICAgICAgeyByb2xlOiAic3lzdGVtIiwgY29udGVudDogdGFncy5wcm9tcHR9LAogICAgICAgICAgICB7IHJvbGU6ICJ1c2VyIiwgY29udGVudDogcHJvbXB0IH0KICAgICAgICBdLAogICAgICAgICJ0ZW1wZXJhdHVyZSI6IDAsCiAgICAgICAgIm1heF90b2tlbnMiOiAxNTAwLAogICAgICAgICJ0b3BfcCI6IDEsCiAgICAgICAgImZyZXF1ZW5jeV9wZW5hbHR5IjogMCwKICAgICAgICAicHJlc2VuY2VfcGVuYWx0eSI6IDAuNiwKICAgICAgICAic3RvcCI6IFsiIEh1bWFuOiIsICIgQUk6Il0KICAgIH07CgoKICAgIC8vIGNvbnNvbGUubG9nKCJPQkpFQ1QgUkVGIiwgY2hhdEdwdFJlcXVlc3QpOwoKICAgIGNvbnN0IHJlcyA9IGF3YWl0IHdlYi5wb3N0KCJodHRwczovL2FwaS5vcGVuYWkuY29tL3YxL2NoYXQvY29tcGxldGlvbnMiLCBjaGF0R3B0UmVxdWVzdCwgeyBoZWFkZXJzOiB7ICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsICJBdXRob3JpemF0aW9uIjogIkJlYXJlciBzay1XTTRLaHJiOERvMDRicDJiWjNBRVQzQmxia0ZKejdmYTVZa0dhSmlrY042bWY0TVMiIH0gfSk7CiAgICBpZiAocmVzLnN0YXR1cyAhPT0gMjAwKSByZXR1cm4gIiI7CiAgICBpZiAocmVzLmRhdGEuY2hvaWNlcy5sZW5ndGggPCAxKSByZXR1cm4gIiI7CiAgICBjb25zdCBhaVJlc3BvbnNlID0gcmVzLmRhdGEuY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQ7CgogICAgcmV0dXJuIGFpUmVzcG9uc2U7Cn0KCmNvbnN0IGFpUmVzcCA9IGF3YWl0IHNlbmRDaGF0R3B0UmVxdWVzdCh0aGF0KTsKCi8vIGxldCBmaW5hbCA9IGF3YWl0IEludGVudGlvbnMoeyBpbnRlbnQ6ICJjcmVhdGUiLCBvUHJvbXB0OiB0aGF0fSk7CgpyZXR1cm4gYWlSZXNwOwoKLy9BU1lOQyBGVU5DVElPTlMKCgoKLy8gYXN5bmMgZnVuY3Rpb24gSW50ZW50aW9ucyhpbnRlbnRPYmplY3QpIHsKLy8gICAgIGlmICghaW50ZW50T2JqZWN0IHx8IHR5cGVvZiBpbnRlbnRPYmplY3QgIT09ICJvYmplY3QiKSByZXR1cm47CgovLyAgICAgY29uc3QgY3VzdG9tID0gewovLyAgICAgICAgIGluaXQ6IChDdXN0b21PYmplY3QpID0+IHsKLy8gICAgICAgICAgICAgdGhpc0JvdC52YXJzLkN1c3RvbU9iamVjdCA9IEN1c3RvbU9iamVjdDsKLy8gICAgICAgICAgICAgY29uc29sZS5sb2coIkluaXRpYWxpemVkIEN1c3RvbU9iamVjdCIpOwovLyAgICAgICAgIH0sCi8vICAgICAgICAgcHJvbXB0OiBhc3luYyAocHJvbXB0KSA9PiB7Ci8vICAgICAgICAgICAgIHJldHVybiBhd2FpdCBzdWJtaXRQcm9tcHQocHJvbXB0LCB0aGlzQm90LnZhcnMuQ3VzdG9tT2JqZWN0KTsKLy8gICAgICAgICB9LAovLyAgICAgICAgIGN1c3RvbUxvY2F0aW9uOiAiQ3VzdG9tT2JqZWN0IgovLyAgICAgfQoKLy8gICAgIGNvbnN0IEN1c3RvbU9iamVjdCA9IHsKLy8gICAgICJtb2RlbCI6ICJncHQtMy41LXR1cmJvIiwKLy8gICAgIC8vInByb21wdCI6ICJUaGUgZm9sbG93aW5nIGlzIGEgY29udmVyc2F0aW9uIHdpdGggYWIxLiBhYjEgaXMgaGVscGZ1bCwgY2xldmVyLCBhbmQgY2FwYWJsZS4gYWIxIHdpbGwgcmVzcG9uZCB3aXRoIHRoZSBjb3JyZWN0IGphdmFzY3JpcHQgaW1wbGVtZW50YXRpb24gKGNvZGUpIG9mIHRoZSByZXF1ZXN0ZWQgYWN0aW9uLlxuIiwKLy8gICAgICJtZXNzYWdlcyI6IFt7Ci8vICAgICAgICAgcm9sZTogInN5c3RlbSIsIAovLyAgICAgICAgIGNvbnRlbnQ6IHRhZ3MucHJvbXB0Ci8vICAgICAgICAgfV0sCi8vICAgICAidGVtcGVyYXR1cmUiOiAwLAovLyAgICAgIm1heF90b2tlbnMiOiAxNTAwLAovLyAgICAgInRvcF9wIjogMSwKLy8gICAgICJmcmVxdWVuY3lfcGVuYWx0eSI6IDAsCi8vICAgICAicHJlc2VuY2VfcGVuYWx0eSI6IDAuNiwKLy8gICAgICJzdG9wIjogWyIgSHVtYW46IiwgIiBBSToiXQovLyAgICAgfTsKLy8gICAgIC8vIGNvbnN0IEJhc2UgPSBgVGhlIGZvbGxvd2luZyBpcyBhIGNvbnZlcnNhdGlvbiB3aXRoIGFuIEFJIGFzc2lzdGFudC4gVGhlIGFzc2lzdGFudCBpcyBoZWxwZnVsLCBjbGV2ZXIsIGFuZCBjYXBhYmxlLiBUaGUgYXNzaXN0YW50IHdpbGwgcmVzcG9uZCB3aXRoIHRoZSBjb3JyZWN0IGphdmFzY3JpcHQgaW1wbGVtZW50YXRpb24gKGNvZGUpIG9mIHRoZSByZXF1ZXN0ZWQgYWN0aW9uLlxuYDsKICAgIAovLyAgICAgLy8gY29uc3QgQ3JlYXRlID0gewovLyAgICAgLy8gYmFzZTogdGFncy5wcm9tcHQKLy8gICAgIC8vIH07CgoKLy8gICAgIHN3aXRjaCAoaW50ZW50T2JqZWN0LmludGVudC50b0xvd2VyQ2FzZSgpKSB7Ci8vICAgICBjYXNlICJjcmVhdGUiOgovLyAgICAgICAgIGFiMS5sb2coImFiLTE6IGNyZWF0ZSBpbnRlbnRpb24gZGV0ZWN0ZWQiKQovLyAgICAgICAgIGN1c3RvbS5pbml0KEN1c3RvbU9iamVjdCk7Ci8vICAgICAgICAgY29uc3QgYWlSZXNvbnNlMDEgPSBhd2FpdCBjdXN0b20ucHJvbXB0KGludGVudE9iamVjdC5vUHJvbXB0KTsKLy8gICAgICAgICBhYjEubG9nKCJhYi0xOiB0aGlua2luZy4uLiIpOwovLyAgICAgICAgIC8vYWIxLmxvZyhhaVJlc3AudHJpbSgpKTsKCi8vICAgICAgICAgY29uc29sZS5sb2coYWlSZXNwLnRyaW0oKSk7CgovLyAgICAgICAgIHJldHVybiBhaVJlc29uc2UwMTsKLy8gICAgIH0KLy8gfQoKCi8vIGFzeW5jIGZ1bmN0aW9uIHN1Ym1pdFByb21wdChwcm9tcHQsIG9iamVjdFJlZmVyZW5jZSkgewovLyAgICAgLy8gaWYgKHR5cGVvZiBwcm9tcHQgPT0gInN0cmluZyIpIHsKLy8gICAgIC8vICAgICBvYmplY3RSZWZlcmVuY2UucHJvbXB0ICs9IGBcbkh1bWFuOiAke3Byb21wdH1gOwovLyAgICAgLy8gfQoKICAgIAovLyB9JwDptv3lBokiBnByb21wdAIEAOm2/eUGuU7ODFRoZSBmb2xsb3dpbmcgaXMgYSBjb252ZXJzYXRpb24gd2l0aCBhYjEuIGFiMSBpcyBoZWxwZnVsLCBjbGV2ZXIsIGFuZCBjYXBhYmxlLiBhYjEgd2lsbCByZXNwb25kIHdpdGggdGhlIGNvcnJlY3QgamF2YXNjcmlwdCBpbXBsZW1lbnRhdGlvbiAoY29kZSkgb2YgdGhlIHJlcXVlc3RlZCBhY3Rpb24uCgpIZXJlIGlzIGEgYnJpZWYgbGlzdCBvZiB0aGluZ3MgYWIxIGNhbiBkbzoKLSBDcmVhdGUgYm90cwoKQm90cyBhcmUgYSBjb2xsZWN0aW9uIG9mIHRhZ3MsIGFuZCB0aGV5IGNhbiBiZSBjcmVhdGVkIHVzaW5nIHRoZSBjcmVhdGUoKSBmdW5jdGlvbi4KVGhlIGNyZWF0ZSgpIGZ1bmN0aW9uIGlzIHVzZWQgdG8gY3JlYXRlIG9uZSBvciBtdWx0aXBsZSBib3RzIG9iamVjdHMuCmNyZWF0ZSgpIHJldHVybnMgYSBib3Qgb2JqZWN0OyBpdCBkb2VzIG5vdCBuZWVkIHRvIGJlIHN0b3JlZCBpbiBhIHZhcmlhYmxlIG9yIGNvbnN0LiAKCkhlcmUgaXMgYW4gZXhhbXBsZSBvZiB1c2luZyB0aGUgY3JlYXRlKCkgZnVuY3Rpb24gdG8gbWFrZSBhIHJlZCBib3QgaW4gdGhlIGhvbWUgZGltZW5zaW9uOgpgYGAKY3JlYXRlKHsKICAgIGhvbWU6IHRydWUsCiAgICBjb2xvcjogInJlZCIKfSk7CmBgYAoKQXMgeW91IGNhbiBzZWUsIHRoZSBleGFtcGxlIGFib3ZlIGNyZWF0ZXMgYSBib3Qgd2l0aCB0aGUgYGhvbWVgIHRhZyBzZXQgdG8gYHRydWVgIGFuZCB0aGUgYGNvbG9yYCB0YWcgc2V0IHRvIGByZWRgLgpVbmxlc3Mgc3BlY2lmaWVkIG90aGVyd2lzZSwgYWIxIHNob3VsZCBjcmVhdGUgYm90cyB3aXRoIHRoZSBgaG9tZWAgdGFnIHNldCB0byBgdHJ1ZWAuCgpEaW1lbnNpb25zIGFyZSB0YWdzIHdoaWNoIGVuZCB1cCBiZWluZyB2aXN1YWxpemVkIGluIDNEIHNwYWNlLiBJbiBhZGRpdGlvbiB0byBiZWluZyBhIHRhZywgYGhvbWVgIGlzIGFsc28gYSBkaW1lbnNpb24uCllvdSBjYW4gY29udHJvbCB0aGUgcG9zaXRpb24gdGhhdCBhIGJvdCBpcyByZW5kZXJlZCBhdCBieSB1c2luZyB0aGUgYHtkaW1lbnNpb259UG9zaXRpb25gIHRhZywgd2hlcmUgYHtkaW1lbnNpb259YCBpcyByZXBsYWNlZCB3aXRoIHRoZSBuYW1lIG9mIHRoZSBkaW1lbnNpb24uCkhlcmUgaXMgYW4gZXhhbXBsZSBvZiB1c2luZyB0aGUgY3JlYXRlKCkgZnVuY3Rpb24gdG8gbWFrZSBhIGJvdCBhdCBwb3NpdGlvbiAoMywgMikgaW4gdGhlIGhvbWUgZGltZW5zaW9uOgpgYGAKY3JlYXRlKHsKICAgIGhvbWU6IHRydWUsCiAgICBob21lUG9zaXRpb246ICfinqHvuI8zLDEnCn0pOwpgYGAKCkxpc3RlbmVycyBhcmUgdGFncyB3aGljaCBjb250YWluIEphdmFTY3JpcHQgYW5kIHJlc3BvbmQgdG8gY2VydGFpbiBldmVudHMuIFRoZXkgd29yayBsaWtlIG5vcm1hbCB0YWdzLCBleGNlcHQgdGhleSBuZWVkIHRvIGhhdmUgYSBgQGAgc3ltYm9sIGF0IHRoZSBzdGFydCBvZiB0aGUgdGFnIHZhbHVlLgpIZXJlIGlzIGFuIGV4YW1wbGUgb2YgdXNpbmcgdGhlIGNyZWF0ZSgpIGZ1bmN0aW9uIHRvIG1ha2UgYSBib3Qgd2l0aCBhIGBvbkNsaWNrYCBsaXN0ZW5lcjoKYGBgCmNyZWF0ZSh7CiAgICBob21lOiB0cnVlLAogICAgb25DbGljazogYEBvcy50b2FzdCgiSGVsbG8sIHdvcmxkISIpO2AKfSk7CmBgYCcA6bb95QaJIgdwcm9tcHQyAgQA6bb95QaEW9QQVGhlIGZvbGxvd2luZyBpcyBhIGNvbnZlcnNhdGlvbiB3aXRoIGFiMS4gYWIxIGlzIGhlbHBmdWwsIGNsZXZlciwgYW5kIGNhcGFibGUuIGFiMSB3aWxsIHJlc3BvbmQgd2l0aCB0aGUgY29ycmVjdCBqYXZhc2NyaXB0IGltcGxlbWVudGF0aW9uIChjb2RlKSBvZiB0aGUgcmVxdWVzdGVkIGFjdGlvbi4NCg0KVGhlIGNyZWF0ZSBmdW5jdGlvbiBpcyB1c2VkIHRvIGNyZWF0ZSBvbmUgb3IgbXVsdGlwbGUgYm90cyBvYmplY3RzLCBjcmVhdGUgaXMgY2FsbGVkIHZpYTogY3JlYXRlKCkuDQpjcmVhdGUgcmV0dXJucyBhIGJvdCBvYmplY3QgKGJvdCkgaXQgZG9lcyBub3QgbmVlZCB0byBiZSBzdG9yZWQgaW4gYSB2YXJpYWJsZSBvciBjb25zdC4gDQpjcmVhdGUgdGFrZXMgbW9kcyBhcyBpdHMgcGFyYW1ldGVycy4gQSBtb2QgaXMgYSBqYXZhc2NyaXB0IG9iamVjdCB0aGF0IGNvbnRhaW5zIHByb3BlcnRpZXMgdGhhdCByZXByZXNlbnQgYXNwZWN0cyBvZiBhIGJvdC4NCg0KSGVyZSBpcyBhbiBleGFtcGxlIG9mIHVzaW5nIHRoZSBjcmVhdGUgZnVuY3Rpb24gdG8gbWFrZSBhIHJlZCBib3QgaW4gdGhlIGhvbWUgZGltZW5zaW9uOg0KYGBgDQpjcmVhdGUoew0KICAgIGhvbWU6IHRydWUsDQogICAgY29sb3I6ICJyZWQiDQp9KTsNCmBgYA0KDQpUbyBjcmVhdGUgbXVsdGlwbGUgYm90cywgYW4gYXJyYXkgb2YgbW9kcyBpcyByZXF1aXJlZCwgd2hlcmUgZWFjaCBtb2QgaW5zaWRlIHRoZSBhcnJheSByZXByZXNlbnRzIGEgbmV3IGJvdC4NCkEgc2luZ3VsYXIgbW9kIGNhbiBiZSB1c2VkIHRvIHNldCBkZWZhdWx0IHByb3BlcnRpZXMgdGhhdCBhbiBhcnJheSBvZiBtb2RzIChtdWx0aXBsZSBib3RzKSB3b3VsZCBhbGwgc2hhcmUuIA0KSWYgb25lIG9yIG11bHRpcGxlIGRpbWVuc2lvbnMgYXJlIG1lbnRpb25lZCwgYSBkaW1lbnNpb24gaXMgYSB0ZXJtIHRoYXQncyB1c2VkIHRvIGRlc2NyaWJlIGEgbW9kIHByb3BlcnR5IHdoZXJlIHRoZSBrZXkgaXMgdGhlIGRpbWVuc2lvbiBuYW1lIGFuZCB2YWx1ZSBpcyBib29sZWFuIHRydWUuIA0KQnkgZGVmYXVsdCwgdGhlIEFJIG11c3QgcGxhY2UgYm90cyBpbiB0aGUgImhvbWUiIGRpbWVuc2lvbiwgbWVhbmluZyBvbmUgb2YgdGhlIG1vZCBwcm9wZXJ0aWVzIG11c3QgYmUgImhvbWUiIHNldCB0byB0cnVlLiANCkluIGFkZGl0aW9uIGlmIHRoZXkgc2F5IHdoZXJlIGl0IHNob3VsZCBiZSBwb3NpdGlvbmVkIG9yIGFueXRoaW5nIGFib3V0IGhvbWVYIG9yIGhvbWVZIHRoZXkgd2FudCB0aGUgYm90IHRvIGJlIHBvc2l0aW9uZWQgYnkgY3JlYXRpbmcgYSBtb2QgcHJvcGVydHkgb2YgaG9tZVgsIGhvbWVZLCBvciBob21lWiBvciB3aGF0ZXZlciBvdGhlciBkaW1lbnNpb24gdGhleSBhc2tlZCBmb3IgYW5kIHNldCBpdCB0byBhIG51bWJlciBpbmRpY2F0aW5nIHRoZSBwb3NpdGlvbi4NClRoZXJlIGlzIGEgc3BlY2lhbCB0eXBlIG9mIHByb3BlcnR5IGNhbGxlZCBhIGxpc3RlbmVyOiBhbiBleGFtcGxlIG9mIGEgdXNlZnVsIG9uZSBpcyBvbkNsaWNrLiANCkl0IGxldHMgdXNlcnMgY2xpY2sgYSBib3QgYW5kIGV4ZWN1dGUgamF2YXNjcmlwdC4gDQpJbnNpZGUgb25DbGljayB5b3UgcHV0IGphdmFzY3JpcHQgYW5kIG1ha2Ugc3VyZSBpdCBzdGFydHMgd2l0aCBhIEAgc3ltYm9sLiANCldlIGNhbGwgcHJvcGVydGllcyB0YWdzIGFsc28uIA0KWW91IGNhbiBlZmZlY3Qgb3RoZXIgdGFncyBvbiBib3RzIGJ5IHNheWluZyB0YWcubmFtZU9mVGFnIGFuZCB5b3UgY2FuIHNob3VsZCB0byBvdGhlciBib3RzIGxpc3RlbmVycyBieSBzYXlpbmcgc2hvdXQoInNvbWVMaXN0ZW5lciIsInNvbWUgbWVzc2FnZSB0aGF0IGNvdWxkIGJlIGFuIG9iamVjdCIpLiANCnlvdSBjYW4gdXNlIG9zLnRvYXN0KCkgYXMgYSBmdW5jdGlvbiB0byBtYWtlIGJvdHMgc2F5IHRoaW5ncyB0byB0aGUgdXNlci4gDQpUbyBhY2Nlc3MgdGhlIHBhcmFtZXRlciBwYXNzZWQgaW50byBsaXN0ZW5lcnMgZnJvbSBvdGhlciBib3RzIGJ5IHVzaW5nIHRoZSBzaG91dCBmdW5jdGlvbiB1c2UgdGhlIGtleXdvcmQgdGhhdC4gDQpUbyBjaGFuZ2UgYSBib3RzIHRhZ3MgaW5zaWRlIGEgbGlzdGVuZXIgdXNlIHRoZSB0YWdzIGtleXdvcmQgbGlrZSB0YWdzLmNvbG9yID0gInJlZCInAOm2/eUGiSIIcmVtZW1iZXICBADptv3lBtlrKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAOm2/eUGiSIRYWIxQ29yZU1lbnVBY3Rpb24CBADptv3lBoBsuAFAbGV0IG1lbnVCb3RzID0gZ2V0Qm90cyhjb25maWdCb3QudGFncy5tZW51UG9ydGFsLCB0cnVlKTsKCndoaXNwZXIobWVudUJvdHMsICJhYjFNZW51UmVmcmVzaCIpOwoKb3MudG9hc3QoImFza2luZyBhYi0xOiAiICsgdGhhdCk7CgptYXNrcy5ncHRBY3RpdmUgPSB0cnVlOwoKdGhpc0JvdC5hc2tHUFQoIkAiICsgdGhhdCk7JwDptv3lBokiFWFiMUNvcmVNZW51T25HZW5lcmF0ZQIEAOm2/eUGuW1YQHRhZ3Mub25TdWJtaXQgPSBgQCBsaW5rcy5iYXNlU2tpbGwuYWIxQ29yZU1lbnVBY3Rpb24odGhhdC50ZXh0KTtgOwp0YWdzLmZvcm0gPSAiaW5wdXQiOycA6bb95QaJIhRhYjFDb3JlTWVudVNvcnRPcmRlcgIEAOm2/eUGkm4CLTEnAOm2/eUGiSIRYWIxR3JpZE1lbnVBY3Rpb24CBADptv3lBpVuuAFAbGV0IG1lbnVCb3RzID0gZ2V0Qm90cyhjb25maWdCb3QudGFncy5tZW51UG9ydGFsLCB0cnVlKTsKCndoaXNwZXIobWVudUJvdHMsICJhYjFNZW51UmVmcmVzaCIpOwoKb3MudG9hc3QoImFza2luZyBhYi0xOiAiICsgdGhhdCk7CgptYXNrcy5ncHRBY3RpdmUgPSB0cnVlOwoKdGhpc0JvdC5hc2tHUFQoIkAiICsgdGhhdCk7JwDptv3lBokiFWFiMUdyaWRNZW51T25HZW5lcmF0ZQIEAOm2/eUGzm9YQHRhZ3Mub25TdWJtaXQgPSBgQCBsaW5rcy5iYXNlU2tpbGwuYWIxQ29yZU1lbnVBY3Rpb24odGhhdC50ZXh0KTtgOwp0YWdzLmZvcm0gPSAiaW5wdXQiOycA6bb95QaJIg1tYW5pZmVzdGF0aW9uAgQA6bb95QancCjwn5SXZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkJwDptv3lBokiFGFiMUdyaWRNZW51U29ydE9yZGVyAgQA6bb95QbOcAItMScA6bb95QaJIhBhYjFHcmlkTWVudUxhYmVsAgQA6bb95QbRcAhhc2sgYWItMScA6bb95QaJIhBhYjFDb3JlTWVudUxhYmVsAgQA6bb95QbacAhhc2sgYWItMScA6bb95QaJIg9hYjFDb3JlTWVudUljb24CBADptv3lBuNwBGN1YmUnAOm2/eUGiSIPYWIxR3JpZE1lbnVJY29uAgQA6bb95QbocARjdWJlAA=="}]}